(function(n,e,h){window.__MTS={version:"2.0.1",Config:{}};window.Matisse={};var c=__MTS.Util={go:function(a){a(n,e,c)},ga:function(){},createObj:function(a){if(!a)return{};Object.create?a=Object.create(a):(c.ga.prototype=a,a=new c.ga);return a},createClass:function(a){var b=a.main||function(){};a.main=h;b.prototype=a;return b},inherit:function(a,b){var d=b.main||function(){a.apply(this,arguments)};b.main=h;d.prototype=c.createObj(a.prototype);d.prototype._name="";c.ext(d.prototype,b);c.isO(a.prototype.opt)&&
(d.prototype.opt=c.ext({},c.createObj(a.prototype.opt),d.prototype.opt));return d},extClass:function(a){var b=c.aryArgs(arguments),d={},k=b.length-1,m=b[k],l=m.main||function(){a.apply(this,arguments)};m.main=h;l.prototype=c.createObj(a.prototype);c.ext(d,c.createObj(a.prototype.opt));for(var s=1,e;s<k;s++)e=b[s],c.ext(l.prototype,e.prototype),c.ext(d,c.createObj(e.prototype.opt));c.ext(l.prototype,m);c.ext(d,m.opt);c.isEmptyObj(d)||(l.prototype.opt=d);return l},regClass:function(a,b){var d=__MTS[a]=
c.createClass(b);d.prototype._name=a;return d},regInherit:function(a,b,d){b=__MTS[a]=c.inherit(b,d);b.prototype._name=a;return b},regExtClass:function(a,b){var d=c.aryArgs(arguments),d=__MTS[a]=c.extClass.apply(c,d.slice(1));d.prototype._name=a;return d},plugin_regClass:function(a,b,d){__MTS[a]||(__MTS[a]={});d=__MTS[a][b]=c.createClass(d);d.prototype._name=a+"_"+b;return d},plugin_regInherit:function(a,b,d,k){__MTS[a]||(__MTS[a]={});d=__MTS[a][b]=c.inherit(d,k);d.prototype._name=a+"_"+b;return d},
ext:function(){return n.extend.apply(n,arguments)},applyIf:function(){var a=arguments[0]||{},b,d,k;if(2>arguments.length)return a;for(b=1;b<arguments.length;b++)for(d in k=arguments[b],k)a[d]!==h&&(a[d]=k[d]);return a},ignoreIf:function(){var a={},b,d,k,c=arguments[0];if(2>arguments.length)return a;for(b=1;b<arguments.length;b++)for(d in k=arguments[b],k)c[d]===h&&(a[d]=k[d]);return a},each:function(a,b){if(a){var d,k;if(c.isA(a))for(d=0;d<a.length&&(k=b(d,a[d]),!0===k||!1!==k);d++);else for(d in a)if(k=
b(d,a[d]),!0!==k&&!1===k)break;return a}},reverseEach:function(a,b){if(a){var d,k;if(c.isA(a))for(d=a.length-1;0<=d&&(k=b(d,a[d]),!0===k||!1!==k);d--);else for(d in a)if(k=b(d,a[d]),!0!==k&&!1===k)break;return a}},filterEach:function(a,b,d){if(a){c.isA(d)&&d.length||(d=e);var k,m;if(c.isA(a))for(k=0;k<a.length&&(d&&0<=c.aryIndexOf(k,d)||(m=b(k,a[k]),!0===m||!1!==m));k++);else for(k in a)if(!(d&&0<=c.aryIndexOf(k,d))&&(m=b(k,a[k]),!0!==m&&!1===m))break;return a}},map:function(a,b){if(!c.isA(a))return e;
var d=[],k,m;for(k=0;k<a.length;k++)m=b(a[k],k),m!==h&&d.push(m);return d},eachLeafAry:function(a,b,d,k,m){d||(d=0);d++;c.isA(a)&&99>d&&(c.isA(a[0])?c.each(a,function(k,m){c.eachLeafAry(m,b,d,a,k)}):b(a,k,m));return a},aryArgs:function(a,b,d){a=Array.prototype.slice.call(a);c.isA(b)&&(a=b.concat(a));c.isA(d)&&(a=a.concat(d));return a},aryIndexOf:function(a,b){var d=-1;c.isA(b)&&(b.indexOf?d=b.indexOf(a):c.each(b,function(b,c){if(a==c)return d=b,!1}));return d},proxy:function(a,b){var d=e;c.isF(a)&&
(a.isProxy?d=a:(d=function(){return a.apply(b,arguments)},d.isProxy=1));return d},clearObj:function(a){c.each(a,function(b,d){if(!c.isF(d)||a.hasOwnProperty(d))a[b]=e});return a},dupObj:function(a){if(a&&JSON)a=JSON.stringify(a),a=JSON.parse(a);else if(c.isO(a)||c.isA(a))a=c.ext(!0,c.isA(a)?[]:{},a);return a},dupAry:function(a,b){b||(b=0);b++;c.isA(a)&&99>b&&(a=a.slice(),c.isA(a[0])&&c.each(a,function(d,k){a[d]=c.dupAry(k,b)}));return a},findDateIndex:function(a,b){a=new Date(a);if(!b||isNaN(a))return-9;
c.isA(b)||(b=b.toString().split(","));var d=0,k=new Date(b[0]),m=new Date(b[1]),l=new Date(b[b.length-1]);1<b.length&&0>m-k&&(d=1);return d&&a>k||!d&&a<k?-1:d&&a<l||!d&&a>l?-2:c.P(a,b,0,0)},findNumIndex:function(a,b){a=+a;if(!b||isNaN(a))return-9;c.isA(b)||(b=b.toString().split(","));var d=0,k=+b[0],m=+b[1],l=+b[b.length-1];1<b.length&&0>m-k&&(d=1);return d&&a>k||!d&&a<k?-1:d&&a<l||!d&&a>l?-2:c.Q(a,b,0,0)},P:function(a,b,d,k){var m=Math.round(b.length/2),l=new Date(b[m])-a;k++;if(0==l||1E3<k)return d+
m;if(3>b.length)return 0<l?d:d+m;0<l?d=c.P(a,b.slice(0,m),d,k):0>l&&(d+=m,d=c.P(a,b.slice(m,b.length),d,k));return d},Q:function(a,b,d,k){var m=Math.round(b.length/2),l=Math.abs(a-b[m]),h=Math.abs(a-b[m-1]);k++;if(3>b.length)return l<h?d+1:d;if(0==l||isNaN(l)||1E3<k)return d+m;if(0==h||l==h||isNaN(h)||1E3<k)return d+m-1;h<l?d=c.Q(a,b.slice(0,m),d,k):l<h&&(d+=m,d=c.Q(a,b.slice(m,b.length),d,k));return d},scroll2Inside:function(a,b){a=c.getJqElm(a);b=c.getJqElm(b);var d=a[0].offsetHeight,k=a[0].offsetTop,
m=b[0].offsetHeight,l=b[0].offsetTop;k+d>l+m?b.scrollTop(k+d-m):k<l&&b.scrollTop(k)},scroll2Top:function(a,b){a=c.getJqElm(a);b=c.getJqElm(b);var d=a[0].offsetTop,k=b[0].offsetTop;(d+a[0].offsetHeight>k+b[0].offsetHeight||d<k)&&b.scrollTop(d)},tagStart:function(a,b,d,k){if(!a)return"";b?c.isA(b)&&(b=b.join(" ")):b="";var m=["<",a],l=k;b&&m.push(' class="',b,'"');k&&(c.isO(k)&&(l=[],c.each(k,function(a,d){l.push(a+":"+d)}),l=l.join(";")),m.push(' style="',l,'"'));c.isO(d)&&c.each(d,function(a,d){m.push(" ",
a,'="',d,'"')});"input"==a.toLowerCase()?m.push("/>"):m.push(">");return m.join("")},getJqElm:function(a){return"object"==typeof a&&a.jquery?a:n(a)},getPow10:function(a){var b=a.toString().split(".");return 1<b.length&&1>a?-1*b[1].length:b[0].length-1},getDP:function(a){if(!a)return 0;a=a.toString().split(".");return 1<a.length?a[1].length:0},getDPmax:function(a){for(var b=0,d,k=0;k<a.length;k++)d=c.getDP(a[k]),d>b&&(b=d);return b},getArrayLevel:function(a,b){var d=0;b||(b=0);b++;c.isA(a)&&99>b&&
(d++,d+=c.getArrayLevel(a[0],b));return d},getTouchEvent:function(a,b){b||(b=0);return c.isTouch?a.originalEvent.changedTouches[b]:0<b?e:a},getTouchNum:function(a){return c.isTouch?a.originalEvent.touches.length:0},getPosition:function(a,b){a=c.getJqElm(a)[0];b?(b=c.getJqElm(b),"absolute"!=b.css("position")&&(b=n("body"))):b=n("body");for(var d,k,m=window.outerHeight||0,l=window.outerWidth||0,h=0,e=0,q=a.offsetHeight||0,r=a.offsetWidth||0;null!=a&&"BODY"!=a.nodeName&&"HTML"!=a.nodeName&&(h+=a.offsetLeft,
e+=a.offsetTop,a.offsetHeight&&(d=a.offsetHeight),a.offsetWidth&&(k=a.offsetWidth),a=a.offsetParent,a!=b[0]););1===b.length&&(a=b[0],e+=a.offsetTop,h+=a.offsetLeft,d=a.offsetHeight>m?a.offsetHeight:m,k=a.offsetWidth>l?a.offsetWidth:l);return{x:h,y:e,h:q,w:r,H:d,W:k}},movePositionTo:function(a,b,d){var k=a.h||0,m=a.w||0;a=a.Sa||0;var l=c.getPosition(b);b={left:l.x,top:l.y};2==d?(b.left-=m-l.w,b.top+=l.h):1==d?b.left+=l.w:b.top+=l.h;l.H>b.top&&l.H<b.top+k&&(b.top=2==d?l.y-k-a:1==d?l.H-k-a:l.y-k-a);
b.left+m>l.W&&(b.left=l.W-m);0>b.top&&(b.top=0);0>b.left&&(b.left=0);return b},getJqTargetUpByCss:function(a,b,d){var c=0,m=n(a.target);for(d||(d=10);!m.hasClass(b)&&c<d&&m[0]!=a.currentTarget;)m=m.parent(),c++;return m.hasClass(b)?m:e},getOffset:function(a,b){var d=c.isTouch?a.originalEvent.layerX:a.offsetX,k=c.isTouch?a.originalEvent.layerY:a.offsetY;b||(b=a.currentTarget);d==h&&(d=a.layerX,k=a.layerY);if(d==h)return c.getPageOffset(a,b);if(a.target!==b){for(var m=a.target,l=0,e=0,p=0;m!==b&&10>
l;)e+=m.offsetLeft,p+=m.offsetTop,m=m.parentNode,l++;d+=e;k+=p}return{X:d,Y:k}},getPageOffset:function(a,b){b||(b=a.currentTarget);var d=c.getPageXY(a),k=n(b).offset();return{X:d.pageX-k.left,Y:d.pageY-k.top}},onPageXY:e,getPageXY:function(a){var b=a.pageX;a=a.pageY;if(c.onPageXY){var d=c.onPageXY({pageX:b,pageY:a});d&&d.pageX&&(b=d.pageX);d&&d.pageY&&(a=d.pageY)}return{pageX:b,pageY:a}},getStrLen:function(a){a=a.toString();for(var b=0,d=0;d<a.length;d++)b+=0<a.charCodeAt(d)>>8?2:1;return b},getTextWidth:function(a,
b,d){d||(d="Arial");c.isNum(a)&&(a=a.toString());return a?c.measureText(a,b,d).width:0},pa:12,K:"",measureText:function(a,b,d){var k=n("#measureText"),m={},l=b,h=1;if(!l||12>l)l=12,h=b/12;l=c["int"](l);d||(d=c.K);k.length||(k=n('<span id="measureText"></span>'),n("body").append(k));l!==c.pa&&(m["font-size"]=l+"px");d&&d!==c.K&&(c.K=d,m["font-family"]=d);c.isEmptyObj(m)||k.css(m);k.html(a);c.pa=l;c.K=d;b=k.width();k=k.height();b||(b=Math.round(c.getStrLen(a)*l/2.2));k||(k=l+2);c.isIE(7)?b=Math.round(1.15*
b):c.isIE(8)?b=Math.round(b):1>h&&(b=c.floor(b*h),k=c.floor(k*h));return{width:b,height:k}},Ma:function(a){if(!a)return"";a=a.toString();for(var b=0,d=a.length-1;(" "==a.substr(b,1)||"\u3000"==a.substr(b,1))&&b<d;)b++;for(;(" "==a.substr(d,1)||"\u3000"==a.substr(d,1))&&0<d;)d--;return a.substring(b,d+1)},trim:function(a){return c.aa?c.Ma(a):n.trim(a)},sa:/^#?([a-f\d])([a-f\d])([a-f\d])$/i,ra:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,ka:function(a){c.sa.test(a)&&(a=c.sa.exec(a),a=["#",a[1],a[1],
a[2],a[2],a[3],a[3]].join(""));return a},hex2rgb:function(a){var b=null;a=c.ka(a);c.ra.test(a)&&(a=c.ra.exec(a),b=[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]);return b},rgb2hex:function(a){var b=a,d=/\(([\,\s\d]+)\)/i,k=c.Ka;c.isStr(a)&&0===a.indexOf("rgb")&&d.test(a)&&(a=d.exec(a),a=a[1].split(","),a=[a[0],a[1],a[2]]);return b=c.isA(a)?["#",k(+a[0]),k(+a[1]),k(+a[2])].join(""):c.ka(b)},Ka:function(a){a=a.toString(16);return 2>a.length?"0"+a:a},flt:parseFloat,"int":function(a){return parseInt(a,
10)},toFixed:function(a,b){isNaN(+a)||(a=c.round(+a,b).toString());return a},round:function(a,b){if(!b)return Math.round(a);var d=Math.pow(10,b);return Math.round(Math.round(a*Math.pow(10,2*b))/d)/d},rounds:function(a,b){if(!b)return c.map(a,function(a){return Math.round(a)});var d=Math.pow(10,b),k=Math.pow(10,2*b);return c.map(a,function(a){return Math.round(Math.round(a*k)/d)/d})},floor:function(a,b){if(!b)return Math.floor(a);var d=Math.pow(10,b);return Math.floor(Math.round(a*Math.pow(10,2*b))/
d)/d},ceil:function(a,b){if(!b)return Math.ceil(a);var d=Math.pow(10,b);return Math.ceil(Math.round(a*Math.pow(10,2*b))/d)/d},findMax:function(){var a=c.aryArgs(arguments),b;c.each(a,function(a,c){if(isNaN(b)||c>b)b=c});return b},findMin:function(){var a=c.aryArgs(arguments),b;c.each(a,function(a,c){if(isNaN(b)||c<b)b=c});return b},fmtNum:function(a,b){if(!c.isNum(+a))return a;var d=(0<=b?c.flt(a).toFixed(b):a.toString()).split("."),k=d[0],d=1<d.length?"."+d[1]:"",m=/(\d+)(\d{3})/;if(-1==k.indexOf(","))for(;m.test(k);)k=
k.replace(m,"$1,$2");return k+d},fmtMM:function(a){a=a.getMonth()+1;return 10>a?"0"+a:a.toString()},fmtDD:function(a){a=a.getDate();return 10>a?"0"+a:a.toString()},fmtHour:function(a){a=a.getHours();return 10>a?"0"+a:a.toString()},fmtMin:function(a){a=a.getMinutes();return 10>a?"0"+a:a.toString()},fmtSDate:function(a,b){var d=b.getFullYear(),k=c.fmtMM(b),m=c.fmtDD(b);return a.toString().replace("YYYY",d).replace("MM",k).replace("DD",m)},fmtSFullDate:function(a,b){var d=c.fmtHour(b),k=c.fmtMin(b);
return c.fmtSDate(a,b).replace("hh",d).replace("mm",k)},fmtPercent:function(a,b){return c.round((a-b)/Math.abs(b)*100,2)},fmtLevelArrayUpper:function(a,b){var d=e;b||(b=1);c.isA(a)&&(d=c.getArrayLevel(a),d=c.xa(a,b-d));return d},xa:function(a,b){0<b&&(a=[a],b--,a=c.xa(a,b));return a},safeHtmlText:function(a){a&&(a=a.replace(/\</g,"&lt;"),a=a.replace(/\n/g,"<br/>"));return a},unsafeHtmlText:function(a){a&&(a=a.replace(/<br\/>/g,"\n"),a=a.replace(/&lt;/g,"<"));return a},fmt2Str:function(a){return JSON&&
JSON.stringify?JSON.stringify(a):c.isO(a)?c.ca(a):c.isA(a)?c.ba(a):c.da(a)},ba:function(a,b){var d=[];b||(b=0);100>b&&(b++,c.each(a,function(a,m){c.isA(m)?d.push(c.ba(m,b)):c.isO(m)?d.push(c.ca(m,b)):((m=c.da(m))||(m="null"),d.push(m))}));return"["+d.join(",")+"]"},ca:function(a,b){var d=[];b||(b=0);100>b&&(b++,c.each(a,function(a,m){var l=['"',a,'":'];c.isA(m)?l.push(c.ba(m,b)):c.isO(m)?l.push(c.ca(m,b)):(m=c.da(m))?l.push(m):l=e;l&&d.push(l.join(""))}));return"{"+d.join(",")+"}"},da:function(a){var b;
if(c.isStr(a))b='"'+a+'"';else if(c.isNum(a))b=a.toString();else if(c.isBool(a))b=a?"true":"false";else if(a===e||isNaN(a)||!isFinite(a))b="null";return b},isElmInRange:function(a,b,d){var c=0,m=0;for(d||(d=10);a&&c<d;){if(a==b){m=1;break}c++;a=a.parentNode}return m},isF:function(a){return n.isFunction(a)},isA:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isO:function(a){return"[object Object]"===Object.prototype.toString.call(a)},isBool:function(a){return"boolean"==typeof a},
isStr:function(a){return"string"==typeof a},isNum:function(a){return"number"==typeof a&&!isNaN(a)&&Infinity!==Math.abs(a)},isSNum:function(a){return c.isStr(a)||c.isNum(a)},isEmptyObj:function(a){var b=0;if(!c.isO(a))return!1;c.each(a,function(a,c){if(c!==h||c!==e)return b++,!1});return!b},isNotEmpty:function(a){return!(a===h||a===e||""===a)},isFullDate:function(a){return/^((19|20|21)(\d{2,2})[-\/]?)?((0[1-9]|1[012])[-\/]?)?((0[1-9]|[12]\d|[3][01])\s?)(([01]\d|2[0-4]):?)([0-5]\d)$/.test(a)},isDate:function(a){return/^(19|20|21)(\d{2,2})[-\/]?(0[1-9]|1[012])[-\/]?(0[1-9]|[12][0-9]|3[01])$/.test(a)},
isMin:function(a){return/^[0-2]?\d:[0-5]\d/.test(a)},isSec:function(a){return/^[0-2]?\d:[0-5]\d:[0-5]\d/.test(a)},isQuarter:function(a){return/^(19|20|21)(\d{2,2})\W?(Q[1-4]|[1-4]Q)$/.test(a)},isYear:function(a){return/^(19|20|21)(\d{2,2})$/.test(a)},isIE:function(a){if(!a)return c.aa||c.Na;var b=document.documentMode?document.documentMode:document.compatMode;return c.aa&&(isNaN(b)?1:b>a?0:1)},Na:/Edge/.test(navigator.userAgent),aa:/msie|rv:11.0/i.test(navigator.userAgent),isAndroid:function(){var a=
navigator.userAgent.toLowerCase(),b=a.indexOf("android"),d="";-1<b&&(d=a.substr(b+7).split(";")[0]);return d},isTouch:"Win32"==navigator.platform?0:window.ontouchstart===h?0:1,oa:[],log:function(a){c.oa.push(a)},showLog:function(){return c.oa.slice()},"":""};c.isIE(8)&&(c.isTouch=0)})(jQuery,null);
__MTS.Util.go(function(){var n=__MTS.AniMath={distance:function(e,h,c,a){e=c-e;h=a-h;return Math.sqrt(e*e+h*h)},getInnerArg:function(e,h,c,a,b,d){c-=e;a-=h;e=b-e;h=d-h;return Math.acos((c*e+a*h)/Math.sqrt(c*c+a*a)/Math.sqrt(e*e+h*h))/(Math.PI/180)},linreg:function(e,h){var c=0,a=0,b=0,d=0,k=0,m=e.length,l;l=0;for(var s,p;l<m;l++)s=e[l],p=h[l],isNaN(s)||isNaN(p)||(c+=s,a+=p,b+=s*s,d+=s*p,k+=p*p);l=(m*d-c*a)/(m*b-c*c);return[a/m-l*c/m,l,(m*d-c*a)/Math.sqrt(m*b-c*c)/Math.sqrt(m*k-a*a)]},d:0,va:0,ia:1,
i:0,esBegin:function(e,h,c){this.d=e;this.va=c?h+1:1;this.ia=c?c:1;this.i=this.va/this.ia;return this},esLinear:function(e){return this.d+(e-this.d)*this.i},esoutT2:function(e){var h=this.i-1;return this.d-(e-this.d)*(h*h-1)},esoutT3:function(e){var h=this.i-1;return this.d+(e-this.d)*(h*h*h+1)},esoutT4:function(e){var h=this.i-1;return this.d-(e-this.d)*(h*h*h*h-1)},esoutT5:function(e){var h=this.i-1;return this.d+(e-this.d)*(h*h*h*h*h+1)},esoutBounce:function(e){var h,c=this.i;c<1/2.75?h=0:c<2/
2.75?(c-=1.5/2.75,h=0.75):c<2.5/2.75?(c-=2.25/2.75,h=0.9375):(c-=2.625/2.75,h=0.984375);return this.d+(e-this.d)*(7.5625*c*c+h)},animateStop:function(e){e&&(e.fa=0,clearInterval(e.ya))},animateFrame:function(e,h,c,a,b){if(!b)return 0;var d=0,k=Math.floor(a/1E3*b);a=Math.floor(a/b);e||(e={});if(e.fa)return e;e.fa=1;clearInterval(e.ya);e.ya=setInterval(function(){e.fa&&d<k&&1E3>d?(h(d,k),d++):(n.animateStop(e),c(k))},a);return e},"":""}});
__MTS.Util.go(function(n,e,h){function c(a){a.getContext&&h.filterEach(a.getContext("2d"),function(a,d){h.isF(d)&&!b.prototype[a]&&(b.prototype[a]=function(){var d=this.ctx[a].apply(this.ctx,arguments);return d?d:this})},["webkitImageSmoothingEnabled"])}function a(){CanvasRenderingContext2D.Ga||(CanvasRenderingContext2D.Ga=1,h.ext(CanvasRenderingContext2D.prototype,{clearRect:function(a,b,c,l){if(arguments.length){0>a&&(a=0);0>b&&(b=0);for(var h=this.element_,e=[],q=0,n;q<h.childNodes.length;q++)n=
h.childNodes[q],n.offsetLeft>=a-1&&n.offsetTop>=b-1&&n.offsetLeft+n.offsetWidth<=a+c&&n.offsetTop+n.offsetHeight<=b+l&&e.push(n);if(h.childNodes.length==e.length)h.innerHTML="";else for(q=0;q<e.length;q++)h.removeChild(e[q]);this.currentPath_=[]}else this.element_.innerHTML=""},arcTo:function(a,b,c,l,h){b=this.getCoords_(a,b);l=this.getCoords_(c,l);a=b.x;b=b.y;c=l.x;l=l.y;h*=10;var e=this.currentX_,n=this.currentY_,r=e-a,t=n-b,u=c-a,v=l-b,r=Math.sqrt(r*r+t*t),u=Math.sqrt(u*u+v*v),e=a+(e-a)*h/r,n=
b+(n-b)*h/r,v=a+(c-a)*h/u;h=b+(l-b)*h/u;this.currentPath_.push({type:"lineTo",x:e,y:n},{type:"bezierCurveTo",cp1x:(e+a)/2,cp1y:(n+b)/2,cp2x:(v+a)/2,cp2y:(h+b)/2,x:v,y:h},{type:"lineTo",x:c,y:l});this.currentX_=c;this.currentY_=l},drawImage:function(a,b){var c,l,h,e,n,r,t,u;c=a.runtimeStyle.width;l=a.runtimeStyle.height;a.runtimeStyle.width="auto";a.runtimeStyle.height="auto";var v=a.width,w=a.height;a.runtimeStyle.width=c;a.runtimeStyle.height=l;if(3==arguments.length)c=arguments[1],l=arguments[2],
n=r=0,t=h=v,u=e=w;else if(5==arguments.length)c=arguments[1],l=arguments[2],h=arguments[3],e=arguments[4],n=r=0,t=v,u=w;else if(9==arguments.length)n=arguments[1],r=arguments[2],t=arguments[3],u=arguments[4],c=arguments[5],l=arguments[6],h=arguments[7],e=arguments[8];else throw Error("Invalid number of arguments");var x=[];x.push('<g_vml_:image src="',a.src,'"',' style="position:absolute;'," top:",l,"px;"," left:",c,"px;"," width:",h,"px;"," height:",e,'px;"',' cropleft="',n/v,'"',' croptop="',r/
w,'"',' cropright="',(v-n-t)/v,'"',' cropbottom="',(w-r-u)/w,'"'," />");this.element_.insertAdjacentHTML("BeforeEnd",x.join(""))}}))}var b=h.regClass("APen",{main:function(){this.ta=1<window.devicePixelRatio?window.devicePixelRatio:1},el:e,ctx:e,ta:1,init:function(d){this.el=h.getJqElm(d)[0];if(!this.el)return this;window.G_vmlCanvasManager&&(a(),G_vmlCanvasManager.initElement(this.el),this.save||c(this.el));this.el.getContext&&(this.ctx=this.el.getContext("2d"));return this},setSize:function(a,b,
c,l){var h=n(this.el),e={},q=this.ta;0<=c&&(e.left=c);0<=l&&(e.top=l);0<=a&&(h.attr("width",a*q),e.width=a);0<=b&&(h.attr("height",b*q),e.height=b);if(0<=a||0<=b)1<q&&this.ctx.scale(q,q),h.css(e),h.find(">div").length&&(h=h.find(">div"),h.css(e));return this},setStrokeStyle:function(a){a&&(this.ctx.strokeStyle=a);return this},setFillStyle:function(a){a&&(this.ctx.fillStyle=a);return this},setLineCap:function(a){a&&(this.ctx.lineCap=a);return this},setLineJoin:function(a){a&&(this.ctx.lineJoin=a);
return this},setLineWidth:function(a){a&&(this.ctx.lineWidth=a);return this},setGlobalAlpha:function(a){if(a||0===a)this.ctx.globalAlpha=a;return this},setGlobalCompositeOperation:function(a){a&&(this.ctx.globalCompositeOperation=a);return this},setMiterLimit:function(a){a&&(this.ctx.miterLimit=a);return this},setShadow:function(a,b,c,h){this.ctx.shadowOffsetX=a;this.ctx.shadowOffsetY=b;this.ctx.shadowBlur=c;h&&(this.ctx.shadowColor=h);return this},U:0,b:function(a){return a=this.U&&1>=this.ctx.lineWidth?
Math.floor(a)+0.5:h.round(a)},beginPath:function(a){this.ctx.beginPath();this.U=a?1:0;return this},rect:function(a,b,c,l){this.ctx.rect(this.b(a),this.b(b),h.round(c),h.round(l));return this},pathLine:function(a,b,c,h){a==c&&(a=c=this.b(a));b==h&&(b=h=this.b(b));this.moveTo(a,b).lineTo(c,h);return this},strokeDashed:function(){var a=h.aryArgs(arguments);this.save().beginPath(1);h.isA(a[0])?this.Ia.apply(this,a):this.Ha.apply(this,a);this.stroke().restore();return this},Ia:function(a,b,c){b||(b=1);
c||(c=b);var h=a[0],e=h[0],h=h[1];this.setLineDash([b,c]).moveTo(e,h);for(b=1;b<a.length;b++)h=a[b],e=h[0],h=h[1],this.lineTo(e,h)},Ha:function(a,b,c,h,e,n){e||(e=1);n||(n=e);a==c&&(a=c=this.b(a));b==h&&(b=h=this.b(b));this.setLineDash([e,n]).moveTo(a,b).lineTo(c,h)},pathRect:function(a,b,c,l){var e=this.b(a),n=this.b(b);a=h.round(c-a);b=h.round(l-b);l=Math.abs(a);1>Math.abs(b)&&2>l&&(b=0>b?-1:1);this.moveTo(e,n).lineTo(e+a,n).lineTo(e+a,n+b).lineTo(e,n+b).lineTo(e,n);this.U&&1>=this.ctx.lineWidth&&
!h.isIE(8)&&this.moveTo(e+a,n).lineTo(e+a+0.5,n);return this},pathRoundRect:function(a,b,c,l,e){a=this.b(a);b=this.b(b);c=h.round(c);l=h.round(l);this.moveTo(a+e,b).arcTo(a,b,a,b+e,e).arcTo(a,b+l,a+e,b+l,e).arcTo(a+c,b+l,a+c,b+l-e,e).arcTo(a+c,b,a+c-e,b,e).closePath();return this},pathArrow:function(a,b,c,l,e){var n;a=this.b(a);b=this.b(b);c=h.round(c);l=h.round(l);3==e?(n=e=a+c,c=b-l/2,l=b+l/2):2==e?(e=a-c/2,n=a+c/2,l=c=b+l):1==e?(n=e=a-c,c=b-l/2,l=b+l/2):(e=a-c/2,n=a+c/2,l=c=b-l);e=this.b(e);c=
this.b(c);n=this.b(n);l=this.b(l);this.moveTo(a,b).lineTo(e,c).lineTo(n,l).closePath();return this},pathCircle:function(a,b,c){this.ctx.arc(a,b,c,0,2*Math.PI,!0);return this},pathOval:function(a,b,c,h){var e=this.ctx;if(isNaN(a)||isNaN(b))return this;e.save();e.translate(a,b);0!=c-h&&e.scale(1,h/c);e.arc(0,0,c,0,2*Math.PI,!0);e.restore();return this},pathPolygon:function(a,b,c,h,e){e=isNaN(e)?270:e;a=360/a;for(var n=Math.PI/180,q=0,r,t;5>q;q++)r=(e+a*q)%360*n,t=b+h*Math.cos(r),r=c+h*Math.sin(r),q?
this.lineTo(t,r):this.moveTo(t,r);this.closePath();return this},fillPanel:function(a,b){a&&b&&"transparent"!==b.toLowerCase()&&this.save().setFillStyle(b).beginPath().pathRect(a.x,a.y,a.getX2(),a.getY2()).fill().restore();return this},clearRect:function(a,b,c,e){var s=n(this.el),p=h.isAndroid();this.ctx.clearRect(a,b,c,e);p&&(0<=p.indexOf("4.1.2")||0<=p.indexOf("4.2")||0<=p.indexOf("4.3"))&&(s.css("visibility","hidden"),this.el.offsetHeight,s.css("visibility","inherit"));return this},clearAll:function(){var a=
n(this.el),b=h.flt(a.attr("width")),a=h.flt(a.attr("height"));window.G_vmlCanvasManager?(this.ctx.clearRect(),n(this.el).find("span").remove()):this.clearRect(0,0,b,a);return this},fontFamily:"Arial",fontSize:12,setFontFamily:function(a){a&&(this.fontFamily=a);return this},setFont:function(a){a&&(this.fontSize=a);a=this.fontSize;12>a&&(a=12);this.ctx.font=a+"px "+this.fontFamily;return this},setTextBaseline:function(a){a&&"baseline"!=a||(a="alphabetic");this.ctx.textBaseline=a;return this},measureText:function(a,
b){b||(b=this.fontSize);return h.measureText(a,b,this.fontFamily)},Ba:function(a,b,c,e,n,p){var q=this.fontSize,r=12>q?q/12:1;e||(e=this.ctx.fillStyle);0<+p&&(p=[p,p,p,p]);h.isA(p)||(p=[0,1,0,2]);this.save();1>r&&(this.translate(a,b).scale(r,r),b=a=0);if(n){var t=this.measureText(c,q).width,r=a-p[3],u=b-q-p[0],t=a+t+p[1];p=b+Math.ceil(0.15*q)+p[2];this.setFillStyle(n).beginPath().setLineJoin("round").moveTo(r,u).lineTo(t,u).lineTo(t,p).lineTo(r,p).closePath().fill()}this.setFillStyle(e).fillText(c,
a,b);this.restore()},Aa:function(a,b,c,h,e){var p=this.fontSize,q=["position:absolute"],r=[];a&&q.push("left:"+a+"px");b&&q.push("top:"+(b-p)+"px");h&&q.push("color:"+h);e&&q.push("background-color:"+e);q.push("font-size:"+p+"px");r.push('<span style="',q.join(";"),'">',c,"</span>");n(this.el).append(r.join(""))},drawText:function(a,b,c,h,e,n){this.ctx.fillText?this.Ba(a,b,c,h,e,n):this.Aa(a,b,c,h,e);return this},getCreateLinearGradient:function(a,b,c,e){h.isNum(a)||(a=0);h.isNum(b)||(b=0);h.isNum(c)||
(c=0);h.isNum(e)||(e=0);return this.ctx.createLinearGradient(a,b,c,e)},getOffset:function(){return n(this.el).offset()},destroy:function(){h.clearObj(this)}});e=document.createElement("canvas");c(e)});
__MTS.Util.go(function(n,e,h){h.regClass("BaseClass",{main:function(){this.event={}},event:e,addEvent:function(c,a,b,d,k,e){k||(k="");b||(b=this);e||(e=0);h.isF(a)&&(this.event[c]||(this.event[c]={}),h.isA(d)||(d=[]),this.event[c][k]={fn:a,v:b,ea:d,key:k,za:e});return this},removeEvent:function(c,a){a||(a="");var b,d=this.event?this.event[c]:e;d&&d[a]&&(b=d[a],b.fn=e,b.v=e,b.ea=e,d[a]=void 0);h.isEmptyObj(d)&&(this.event[c]=void 0);return this},hasEvent:function(c,a){var b=this.event&&this.event[c]?
1:0;b&&a&&(b=this.event[c][a]?1:0);return b},triggerEvent:function(c,a,b){a?h.isA(a)||(a=Array.prototype.slice.apply(a)):a=[];var d=[],k;if(b&&this.hasEvent(c,b))return d=this.event[c][b],a=a.concat(d.ea),d.fn.apply(d.v,a);if(this.hasEvent(c))return h.each(this.event[c],function(a,b){d.push(b)}),d.sort(function(a,b){return b.za-a.za}),h.each(d,function(b,c){k=c.fn.apply(c.v,a.concat(c.ea))}),k},hasTriggerEvent:function(c,a,b){this.hasEvent(c)&&(b=this.triggerEvent(c,a));return b},triggerEventOrDefaultFn:function(c,
a,b){this.hasEvent(c)?this.triggerEvent(c,a):b();return this},destroy:function(){var c=this;"BaseClass"==c._name?h.log("error_destroy"):c.isDestroy||(c.triggerEvent("-"),h.each(c.event,function(a){c.removeEvent(a)}),h.clearObj(c),c.isDestroy=1)}})});
__MTS.Util.go(function(n,e,h){var c=h.isTouch,a=c?"touchstart":"mousedown",b=c?"touchmove":"mousemove",d=c?"touchend":"mouseup";h.regInherit("Draggable",__MTS.BaseClass,{main:function(){__MTS.BaseClass.apply(this);this.e=h.proxy(this.e,this);this.s=h.proxy(this.s,this);this.r=h.proxy(this.r,this)},c:e,p:e,j:e,a:e,Oa:0,bind:function(c,e){e||(e={});this.unbind();this.a={handle:e.handle||"",parents:e.parents||"",cursor:e.cursor||"move",zIndex:e.zIndex||1E3};this.c=h.getJqElm(c);this.p=this.a.handle?
this.c.find(this.a.handle):this.c;this.j=this.a.parents?n(this.a.parents):this.c.parents(":first");this.Oa=this.c.css("z-index")||0;this.p.css("cursor",this.a.cursor).bind(a,this.e);this.j.bind(b,this.s).bind(d,this.r);return this},unbind:function(){this.p&&this.p.unbind(a,this.e);this.j&&this.j.unbind(b,this.s).unbind(d,this.r);this.j=this.p=this.c=e;return this},start:function(a){a&&this.e(a);return this},onDragStart:function(a,b){return this.addEvent("start",a,b)},onDragMove:function(a,b){return this.addEvent("move",
a,b)},onDragEnd:function(a,b){return this.addEvent("end",a,b)},destroy:function(){this.unbind();this.r=this.s=this.e=e;__MTS.BaseClass.prototype.destroy.apply(this,arguments)},G:0,M:NaN,N:NaN,e:function(a){if(this.c){var b=h.getPageOffset(a,this.c[0]),c=this.j.offset();c||(c={left:0,top:0});this.M=b.X+c.left;this.N=b.Y+c.top;this.G=1;this.c.css("z-index",this.a.zIndex);this.triggerEvent("start",[a,this.c[0]])}},s:function(a){var b=h.getPageXY(a);!this.G||isNaN(this.M)||isNaN(this.N)||(this.c.css({position:"absolute",
left:b.pageX-this.M,top:b.pageY-this.N}),this.triggerEvent("move",[a,this.c[0]]))},r:function(a){this.G&&(this.c.css("z-index",""),this.triggerEvent("end",[a,this.c[0]]));this.G=0;this.N=this.M=NaN}})});
__MTS.Util.go(function(n,e,h){h.regClass("EventMgr",{C:e,L:e,init:function(c){this.C&&this.clear();this.C=h.getJqElm(c);this.L={};return this},reg:function(c,a,b,d){if(!a||!h.isF(b))return this;var e;e=h.isTouch;var m=this.L,l=this.ma(c);"start"==a?a=e?"touchstart":"mousedown":"move"==a?a=e?"touchmove":"mousemove":"end"==a&&(a=e?"touchend":"mouseup");m[c]||(m[c]={});(e=m[c][a])&&l.unbind(a,e);e=m[c][a]=h.proxy(b,d);l.bind(a,e);return this},clear:function(){var c=this,a;h.each(c.L,function(b,d){a=
c.ma(b);h.each(d,function(b,c){a.unbind(b,c)});c.L[b]=e});return c},ma:function(c){return"global"==c||"html"==c?n("html"):"body"==c?n("body"):c?this.C.find(c):this.C},destroy:function(){this.isDestroy||(this.clear(),h.clearObj(this),this.isDestroy=1)}})});
__MTS.Util.go(function(n,e,h){var c=h.isTouch?"touchstart":"mousedown",a=__MTS.gEvtMgr={gStart:{},regStart:function(b,d,e){h.isEmptyObj(a.gStart)&&n("html").bind(c,a.e);a.gStart[b]={fn:d,v:e};return a},unStart:function(b){a.gStart[b]=e;h.isEmptyObj(a.gStart)&&(n("html").unbind(c,a.e),a.gStart={});return a},e:function(b){h.each(a.gStart,function(a,c){c&&c.fn.apply(c.v,[b])})}}});
__MTS.Util.go(function(n,e,h){var c=0;h.regInherit("IconEvtMgr",__MTS.BaseClass,{f:e,S:"iconID",bind:function(a,b,c,e){a=h.getJqElm(a);this.ja(a,b,c,e,"bind");return this},on:function(a,b,c,e){a=h.getJqElm(a);this.ja(a,b,c,e,a.on?"on":"bind");return this},unbind:function(a,b){this.wa(a,b);return this},off:function(a,b){this.wa(a,b);return this},ja:function(a,b,d,e,m){var l,n=h.isTouch;l=a.attr(this.S);"start"==b?b=n?"touchstart":"mousedown":"move"==b?b=n?"touchmove":"mousemove":"end"==b&&(b=n?"touchend":
"mouseup");this.f||(this.f={});d=h.proxy(d,e);d.A=m;l||(c++,l=c);e=this.f[l];e?e.g[b]&&(l=e.g[b],"on"==l.A?a.off(b,l):a.unbind(b,l)):(e=this.f[l]={el:a,g:{}},a.attr(this.S,l));e.g[b]=d;if("on"==d.A)a.on(b,d);else a.bind(b,d)},wa:function(a,b){var c;c=a.attr(this.S);var h=this.f[c];h&&h.g[b]&&(c=h.g[b],"on"==c.A?a.off(b,c):a.unbind(b,c),h.g[b]=e)},clear:function(){this.f&&h.each(this.f,function(a,b){h.each(b.g,function(a,c){"on"==c.A?b.el.off(a,c):b.el.unbind(a,c)});b.g=e;b.el=e});this.f=e;return this},
destroy:function(){this.clear();__MTS.BaseClass.prototype.destroy.apply(this,arguments)}})});
__MTS.Util.go(function(n,e,h){h.regClass("InstMgr",{main:function(c){this.B={};this.u=c||""},B:e,ha:0,u:"",na:"__instKey",T:"__isDestroy",R:"",setDestroyEventName:function(c){c&&(this.R=c);return this},list:function(){var c=this,a=[];h.each(c.B,function(b,d){d&&!d[c.T]&&a.push(d)});return a},create:function(c){var a;this.u&&__MTS[this.u]&&(a=new __MTS[this.u][c],this.ha++,this.Ja(c+this.ha,a));return a},Ja:function(c,a){a&&!a[this.T]&&(a[this.na]=c,this.B[c]=a,this.R&&a.addEvent(this.R,this.Fa,this,
[a],this.u))},Fa:function(c){if(h.isO(c)){var a=c[this.na];a&&(this.B[a]=e,c[this.T]=1)}}})});
__MTS.Util.go(function(n,e,h){h.regClass("OptionMgr",{o:e,a:e,setDef:function(c){var a=this;a.a={};a.o={};h.each(c,function(b,c){if(c.name){var e=c.name.toLowerCase();a.a[b]=c.val;a.o[e]={id:b,type:c.type}}});return a},setOption:function(c){var a=this;a.o||a.setDef();h.each(c,function(b,c){b=b.toLowerCase();var k=a.o[b];k&&k.id&&("bool"==k.type||"number"==k.type?c=isNaN(+c)?e:+c:"int"==k.type?c=parseInt(c,10):"string"==k.type?c=h.isSNum(c)?c.toString():e:"array"==k.type?h.isSNum(c)?c=[c]:h.isA(c)||
(c=e):"object"!=k.type||h.isO(c)||(c=e),c!==e&&(a.a[k.id]=c))});return a},get:function(){return this.a},clear:function(){h.clearObj(this.a);this.a={};return this},destroy:function(){h.clearObj(this.o);h.clearObj(this.a)}})});
__MTS.Util.go(function(n,e,h){h.regClass("Panel",{main:function(){arguments.length&&this.set.apply(this,arguments)},x:0,y:0,w:0,h:0,set:function(c,a,b,d){if(h.isO(c)&&c.isEq)return this.set(c.x,c.y,c.w,c.h);this.x=c;this.y=a;this.w=b;this.h=d;return this},getX2:function(){return this.x+this.w},getY2:function(){return this.y+this.h},isEq:function(c){return c&&c.x==this.x&&c.y==this.y&&c.w==this.w&&c.h==this.h}})});
__MTS.Util.go(function(n,e,h){h.regInherit("Sortable",__MTS.BaseClass,{main:function(){__MTS.BaseClass.apply(this);this.F=new __MTS.IconEvtMgr},D:e,k:e,q:e,a:e,F:e,I:0,l:-9,t:-9,Z:0,V:0,qa:e,J:e,init:function(c,a){a||(a={});this.unbind();this.a={handle:a.handle||"",O:a.sortItem||"",Qa:a.cssHolder||"",Pa:a.cssHidden||"",tag:a.tag||"div",zIndex:a.zIndex||1E3};this.D=h.getJqElm(c);this.k=n(this.La(this.a.tag,["mts-placeholder",this.a.Qa]));this.bind();return this},bind:function(){var c=this.a.handle,
a=this.D.find(this.a.O);c&&a.length&&this.F.bind(a.find(c),"start",this.Ea,this).bind("html","move",this.Da,this).bind("html","end",this.Ca,this);return this},unbind:function(){this.F.clear();return this},onSwitch:function(c,a){return this.addEvent("onSwitch",c,a)},onStart:function(c,a){return this.addEvent("onStart",c,a)},onMove:function(c,a){return this.addEvent("onMove",c,a)},onMoveBefore:function(c,a){return this.addEvent("onMoveBefore",c,a)},onEnd:function(c,a){return this.addEvent("onEnd",c,
a)},destroy:function(){this.unbind();this.F.destroy();__MTS.BaseClass.prototype.destroy.apply(this,arguments)},La:function(c,a,b){a=[h.tagStart(c,a)];b&&a.push("</",c,">");return a.join("")},Ra:function(c,a){var b=this.a.Pa;c&&(a?b&&!c.hasClass(b)?c.addClass(b):"none"!=c.css("display")&&c.hide():b&&c.hasClass(b)?c.removeClass(b):"none"==c.css("display")&&c.show())},la:function(c){return{idxFrom:this.l,idxTo:this.t,el_item:c,el_holder:this.k}},Ea:function(c){var a=this,b=-9,d=n(c.currentTarget),e=
d.parents(a.a.O),m=a.D;c=m.find(a.a.O);var l=parseInt(e.css("padding-top"))||0,d=h.getPosition(d,m),s=h.getPosition(e,m),m=m.offset();a.J=[];c.each(function(c,d){d==e[0]&&(b=c);a.J.push(d.offsetTop+l+d.offsetHeight/3)});0<=b&&(a.I=1,a.l=b,a.q=e,a.Z=e.width(),a.V=e.height(),a.qa={left:m.left+(d.x-s.x),top:m.top+(d.y-s.y)},a.k.css({width:a.Z,height:a.V}),a.triggerEvent("onStart",[a.la(e)]))},Da:function(c){if(this.I){c.preventDefault();c.stopPropagation();var a=-1,b=this.l,d=h.getPageXY(c),e=this.qa;
c=d.pageY-e.top;d={position:"absolute",left:d.pageX-e.left,top:c,width:this.Z,height:this.V,"z-index":this.a.zIndex};this.triggerEvent("onMoveBefore",[this.q,d]);this.q.css(d);for(d=this.J.length-1;0<=d;d--)if(e=this.J[d],c>=e){a=d;break}this.t=a==b||a==b-1?-9:a<b?a+1:a;b=0<=a?a:0;b=this.D.find(this.a.O).filter(":eq("+b+")");0>a?this.k.insertBefore(b):this.k.insertAfter(b);this.triggerEvent("onMove",[this.la(b)])}},Ca:function(){this.I&&(-9!=this.t&&-9!=this.l&&this.triggerEvent("onSwitch",[this.l,
this.t]),this.q.css({position:"",left:"",top:"",width:"",height:"","z-index":""}),this.q=e,this.k.remove(),this.triggerEvent("onEnd"));this.I=0;this.t=this.l=-9}})});
__MTS.Util.go(function(n,e,h){h.regClass("Svg",{el:e,n:e,ua:0,m:e,init:function(c){this.el=h.getJqElm(c)[0];this.clearAll();return this},setSize:function(c,a){var b=n(this.el),d={};0<c&&(b.attr("width",c),d.width=c);0<a&&(b.attr("height",a),d.height=a);b.css(d);return this},beginPath:function(){this.m=[];return this},moveTo:function(c,a){this.m.push("M",c,a);return this},lineTo:function(c,a){this.m.push("L",c,a);return this},ArcTo:function(c,a,b,d,e,h){this.m.push("A",c,a,0,b?1:0,d?1:0,e,h);return this},
closePath:function(){this.m.push("Z");return this},getPath:function(){return this.m.join(" ")},svgTag:function(c){return document.createElementNS("http://www.w3.org/2000/svg",c)},createElm:function(c,a,b){c=c.toLowerCase();var d=this.svgTag(c);this.ua++;c+=this.ua;this.n[c]=d;a||(a={});a._gid=c;this.setElm(c,a,b);return c},setElm:function(c,a,b){var d=this.getElm(c);d&&(a&&h.each(a,function(a,b){d.setAttribute(a,b)}),h.isStr(b)&&"text"==d.nodeName&&(d.textContent=b));return this},getElm:function(c){return this.n?
this.n[c]:e},getAttr:function(c,a){var b=this.getElm(c);return b?b.getAttribute(a):e},getGid:function(c){return c.getAttribute("_gid")},getOffset:function(){return n(this.el).offset()},removeElm:function(c){var a=this.getElm(c);this.n[c]=e;a&&n(a).remove();return this},appendElm:function(c,a){var b,d=this.getElm(c);d&&(b=a?this.getElm(a):this.el)&&b.appendChild(d)},clearAll:function(){h.clearObj(this.n);this.n={};n(this.el).empty();return this},destroy:function(){this.clearAll();h.clearObj(this)}})});
__MTS.Util.isIE(8)||"use strict";
__MTS.Util.go(function(){__MTS.Constant={Dq:5,Nl:"sdate",oq:"sliderdate",Yl:"squarter",sw:"smin",pq:"ssec",Chart:"Chart",Area:"Area",NPArea:"NPArea",Bamboo:"Bamboo",Bar:"Bar",NPBar:"NPBar",Cross:"Cross",KBar:"KBar",Rotate:"Rotate",HorzBar:"HorzBar",SliderView:"SliderView",XOnlyView:"XOnlyView",Ew:"touchstart",Dw:"touchmove",vq:"touchend",Vg:"mousedown",ol:"mousemove",Vi:"mouseup",GC:"mouseout",mouseleave:"mouseleave",HC:"wheel mousewheel",keydown:"keydown",BB:"dblclick",click:"click",resize:"resize",
ij:"tip_status_event",KE:"tip_status_event_move",yw:"tip_status_event_hover",zw:"tip_status_event_keydown",Bw:"tip_status_resize",qc:"tip_status_force",LE:"tip_status_moveLegend",Aw:"tip_status_goto",gm:"tip_status_notify",nu:"#-",oa:"array",U:"number",sa:"string",object:"object",Oa:"bool","int":"int",Lf:"lowerCase",xq:"upperCase",display:"display",Fd:"block",mb:"none",width:"width",height:"height",oG:"min-height",NB:"font-size",top:"top",left:"left",bottom:"bottom",right:"right",qu:"center",kv:"middle",
round:"round",min:"min",max:"max",AC:"mid",ea:"base","":""}});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.DataParser={dateCounter:function(c,e){var k=[];c=l.map(c,function(c){return new Date(c)});c[0]>c[1]&&c.reverse();l.each(e,function(e,m){var n=b.cx(c,m[0],m[1]);k.push(n)});return k},cx:function(c,e,k){if(!e)return 0;var h=new Date(c[c.length-1]),b=0,n=h.getFullYear(),s=h.getMonth(),t=h.getDate();e=e.toUpperCase();"M"==e&&0<k?h.setMonth(s-k):"W"==e&&0<k?h.setDate(t-6*k):"Y"==e&&0<k?h.setFullYear(n-k):"YTD"==e&&(h.setMonth(0),h.setDate(1));
for(e=c.length-1;0<=e;e--){k=c[e];if(h>=k)break;b++}return b},mj:function(c){var e=[],k,h;e.push(void 0);if(1==c.length)return e;for(k=1;k<c.length;k++)void 0==c[k-1]?e.push(void 0):(h=c[k]-c[k-1],h=0<h?1:0>h?-1:0,e.push(h));return e},Pw:function(c){var e=[],k,h;e.push(void 0);if(1==c.length)return e;for(k=1;k<c.length;k++)void 0==c[k-1]?e.push(void 0):(h=c[k]-c[k-1],h=0<h?1:0>h?-1:0,1<k&&!h&&(h=e[e.length-1]),e.push(h));return e},eF:function(c,e){var k=[],h,b;if(0==l.isA(c)||0==l.isA(e)||c.length!==
e.length)return p;for(h=0;h<c.length;h++)b=e[h]-c[h],b=0<b?1:0>b?-1:0,k.push(b);return k},Vu:function(c,e,k,h){var b={Kk:[],Qk:h};if(techCalc){switch(c){case "RSI":case "BOB":case "MAE":k=k.C}h?b.Kk=h.calcAcc(k):(b.Qk=techCalc(c),b.Kk=b.Qk.calc(k,e))}return b},np:function(c,e){var k=__MTS.Template,h=[];c.legend&&h.push(k.md(c.legend,"mts-fgTxt-legend"));c.signTag&&h.push(c.signTag);h.push(k.md(e,"mts-fgTxt-value"));c.unit&&h.push(k.md(c.unit,"mts-fgTxt-unit"));return h.join("")},fmtOrderBy:function(c){if(!l.isA(c)||
2>c.length||!l.isDate(c[0])&&!l.isFullDate(c[0]))return 0;var e=0,k=l.aryArgs(arguments).slice(1);new Date(c[0])>new Date(c[c.length-1])&&(c.reverse(),l.each(k,function(c,e){l.eachLeafAry(e,function(c){c.reverse()})}),e=1);return e},dl:function(c,e){var k;e&&l.isDate(c)&&(k=new Date(c),c=0<e.indexOf(":")?l.fmtSFullDate(e,k):l.fmtSDate(e,k));return c},fmtLabels:function(c,e){if(!c.length)return c;e==q.U?c=l.map(c,function(c){return+c}):e!==q.sa&&(c=b.fmtDateLabels(c));return c},fmtDateLabel:function(c){l.isNum(c)?
c=c.toString():c&&0<c.indexOf("-")&&(c=c.replace(/\-/g,"/"));0>c.indexOf("/")&&(l.isFullDate(c)&&12==c.length?c=[c.substr(0,4),"/",c.substr(4,2),"/",c.substr(6,2)," ",c.substr(8,2),":",c.substr(10,2)].join(""):l.isDate(c)&&8==c.length&&(c=[c.substr(0,4),"/",c.substr(4,2),"/",c.substr(6,2)]));return c},fmtDateLabels:function(c){var e,k,h,b=c[0],n=new Date,s=n.getFullYear(),t=n.getMonth()+1;l.isNum(b)?(c=l.map(c,function(c){return c.toString()}),b=c[0]):b&&0<b.indexOf("-")?(c=l.map(c,function(c){return c.replace(/\-/g,
"/")}),b=c[0]):c=c.slice();l.isFullDate(b)&&0>b.indexOf("/")?12==b.length?c=l.map(c,function(c){return[c.substr(0,4),"/",c.substr(4,2),"/",c.substr(6,2)," ",c.substr(8,2),":",c.substr(10,2)].join("")}):8==b.length?(c.reverse(),t=c[0].substr(0,2),c=l.map(c,function(c){k=c.substr(0,2);k!==t&&(k>t&&s--,t=k);return[s,"/",k,"/",c.substr(2,2)," ",c.substr(4,2),":",c.substr(6,2)].join("")}),c.reverse()):6==b.length&&(c.reverse(),e=c[0].substr(0,2),c=l.map(c,function(c){h=c.substr(0,2);h!==e&&(h>e&&(1===
t?(t=12,s--):t--),e=h);k=10>t?"0"+t:t;return[s,"/",k,"/",h," ",c.substr(2,2),":",c.substr(4,2)].join("")}),c.reverse()):l.isDate(b)&&8==b.length&&(c=l.map(c,function(c){return[c.substr(0,4),c.substr(4,2),c.substr(6,2)].join("/")}));return c},MB:function(c){c=+c%2400;0==c&&(c=2400);return c},XE:function(c){var e=[],k,h;l.each(c.split(";"),function(c,b){k=b.substr(0,4);h=b.substr(4,4);+h<+k&&(b=k+"2400;0000"+h);e.push(b)});return e.join(";")},Lu:function(c){var e=[],k=[],h,m,n,s,t,w,E,q,p,z,C;c=b.XE(c);
l.each(c.split(";"),function(c,e){m=e.substr(0,4)-0;n&&n%2400==m%2400&&m++;n=+e.substr(4,4);s=+e.substr(0,2);w=+e.substr(2,2);t=+e.substr(4,2);E=+e.substr(6,2);z=Math.ceil((n-m)/100);0<w&&0<E&&0>=E-w&&s!==t&&z++;for(q=0;q<z;q++)h={h:s+q,xp:0,yp:59},0==q&&(h.xp=m%100),q==z-1&&(h.yp=0==n%100?59:n%100),k.push(h);0==n%100&&k.push({h:t,xp:0,yp:0})});l.each(k,function(c,h){for(p=h.xp;p<=h.yp;p++)C=b.MB(100*+h.h+p),e.push(C)});return e},IB:function(c){var e=[];l.each(c,function(c,h){var b=Math.floor(h/100),
n=h%100;10>n&&(n="0"+n);e.push(b+":"+n)});return e},tF:function(c){var e=[];l.each(c,function(c,h){var b=Math.floor(h/1E4),n=Math.floor(h/100)%100,s=h%100;10>n&&(n="0"+n);10>s&&(s="0"+s);e.push([b,n,s].join(":"))});return e},Mu:function(c,e){return(+c/Math.pow(10,e)).toFixed(e).split(".")[1]}}});
__MTS.Util.go(function(u,p,l){l.regInherit("Lines",__MTS.BaseClass,{main:function(l){__MTS.BaseClass.apply(this);this.Qb={};this.clear();l&&this.hu(l)},Da:p,fe:p,Qb:p,clear:function(){var l=this.Qb;this.Da=[];this.fe=[];l.min=NaN;l.max=NaN;l.dp=0;l.za=NaN;l.Fa=NaN;l.ma=NaN;return this},hu:function(q){var b=this,c;q.Oi(function(e){var k=[];b.Da.push(k);l.each(e,function(e,b){c=b.slice();c.min=b.min;c.max=b.max;c.dp=b.dp;c.za=b.za;c.Fa=b.Fa;c.ma=b.ma;k.push(c)})});l.each(q.fe,function(c,k){b.fe.push(k)});
b.Te();return b},tE:function(q){var b=this;l.each(q,function(c,e){b.Md(e,c)});return this},Md:function(l,b){b||(b=0);this.fe[b]=l||[];return this},iu:function(l){l||(l=[]);this.fe.push(l);return this},xa:function(q){var b=this;l.isA(q)&&(b.clear(),l.each(q,function(c,e){b.Da.push([]);l.each(e,function(e,h){b.xb(h,c)})}));return b},ej:function(q,b,c){var e=this;if(!q)return e;b||(b=0);e.Da[b]=[];l.isA(q[0])?l.each(q,function(k,h){e.xb(h,b,c)}):e.xb(q,b,c);return e},Df:function(l,b){return this.ej(l,
this.va(),b)},xb:function(q,b,c){b||(b=0);b=+b;var e=this.Qb,k=this.Da[b];l.isStr(q)&&(q=q.split(","));if(l.isA(q)){k||(k=this.Da[b]=[]);q=isNaN(q.max)||isNaN(q.min&&0<=q.dp)?this.Pi(q,c):q;if(isNaN(e.min)||e.min>q.min)e.min=q.min,e.za=q.za;if(isNaN(e.max)||e.max<q.max)e.max=q.max,e.Fa=q.Fa;if(isNaN(e.ma)||e.ma>q.ma)e.ma=q.ma;e.dp<q.dp&&(e.dp=q.dp);k.push(q)}return this},eh:function(l,b){var c=this.Da[l];c&&(c.gC=b?1:0);return this},Mi:function(q,b,c){var e=this,k,h=e.Da[b];if(!h||!q.length)return e;
l.isA(q[0])||(q=[q]);l.each(h,function(b,n){0<=c&&(n=e.Pi(n.slice(0,c)));if(k=q[b]){if(isNaN(k.min)||isNaN(k.max))k=e.Pi(k);if(isNaN(n.min)||n.min>k.min)n.min=k.min,n.za=k.za+n.length;if(isNaN(n.max)||n.max<k.max)n.max=k.max,n.Fa=k.Fa+n.length;isNaN(n.ma)&&(n.ma=k.ma+n.length);n.dp<k.dp&&(n.dp=k.dp);k=h[b]=n.concat(k);k.min=n.min;k.max=n.max;k.dp=n.dp;k.za=n.za;k.Fa=n.Fa;k.ma=n.ma}});e.Te();return e},rF:function(q,b,c){var e=this,k,h=e.Da[b];if(!h||!q.length)return e;l.isA(q[0])||(q=[q]);l.each(h,
function(b,n){0<=c&&(n=e.Pi(n.slice(c)));if(k=q[b]){if(isNaN(k.min)||isNaN(k.max))k=e.Pi(k);isNaN(n.min)||n.min>k.min?(n.min=k.min,n.za=k.za):n.za+=k.length;isNaN(n.max)||n.max<k.max?(n.max=k.max,n.Fa=k.Fa):n.Fa+=k.length;n.dp<k.dp&&(n.dp=k.dp);k=h[b]=k.concat(n);k.min=n.min;k.max=n.max;k.dp=n.dp;k.za=n.za;k.Fa=n.Fa;isNaN(k.ma)&&0<=n.ma&&(k.ma=n.ma+k.length)}});e.Te();return e},zG:function(){this.va()&&l.each(this.Da,function(q,b){l.each(b,function(c,e){e.reverse()})});return this},Te:function(){var q=
this.Qb;q.dp=0;q.min=NaN;q.max=NaN;q.za=NaN;q.Fa=NaN;q.ma=NaN;this.Oi(function(b){b&&b.length&&!b.gC&&l.each(b,function(c,e){if(isNaN(q.min)||q.min>e.min)q.min=e.min,q.za=e.za;if(isNaN(q.max)||q.max<e.max)q.max=e.max,q.Fa=e.Fa;if(isNaN(q.ma)||q.ma>e.ma)q.ma=e.ma;q.dp<e.dp&&(q.dp=e.dp)})});return this},op:function(q){this.Rc(function(b){var c=q?q:b[0];l.each(b,function(e,k){isNaN(c)&&(c=k);b[e]=l.fmtPercent(k,c)});b.dp=2;b.min=l.fmtPercent(b.min,c);b.max=l.fmtPercent(b.max,c)});this.Te();return this},
WC:function(q,b){this.Rc(function(c){var e,k;l.each(c,function(h,m){m=q.apply(b,[m,c.min,c.max]);c[h]=m;if(isNaN(e)||e>m)e=m;if(isNaN(k)||k<m)k=m});c.min=e;c.max=k});this.Te();return this},hC:function(l){var b=this,c,e;b.clear();l.Rc(function(k,h,m){(c=b.Da[m])||(c=b.Da[m]=[]);e=c[h]=[];e.min=NaN;e.max=NaN;e.dp=0;e.za=NaN;e.za=NaN});return b},bB:function(){this.Rc(function(l){l.push(NaN)});return this},aB:function(q,b){var c=this,e,k,h,m;q.Rc(function(n,s,t){h=n[b];e=c.Da[t];k=e[s];m=l.getDP(h);if(isNaN(k.min)||
k.min>h)k.min=h,k.za=b;if(isNaN(k.max)||k.max<h)k.max=h,k.Fa=b;k.dp<m&&(k.dp=m);k.push(h)});return c},DB:function(q,b){var c=this.Qb;0<=b&&(c.dp=b);this.Rc(function(e){l.each(e,function(b,h){e[b]=l.round(h*q,c.dp)})});c.min=l.round(c.min*q,c.dp);c.max=l.round(c.max*q,c.dp)},hb:function(){return this.Qb},va:function(){return this.Da?this.Da.length:0},EF:function(){return this.Da},ed:function(l){l||(l=0);return this.Da?this.Da[l]:p},fl:function(l){l||(l=0);return this.fe?this.fe[l]:p},le:function(l,
b){var c=this.ed(l);return c?c[b]:p},dd:function(l){return(l=this.ed(l))?l[0]:p},Ec:function(l){return(l=this.ed(l))?l[l.length-1]:p},Pi:function(q,b){var c=NaN,e=NaN,k=0,h,m,n,s,t=NaN;m=l.map(q,function(m,E){m=""===m?NaN:+m;0<=b?(m=l.round(m,b),h=b):h=l.getDP(m);if(isNaN(c)||c>m)c=m,n=E;if(isNaN(e)||e<m)e=m,s=E;!isNaN(m)&&isNaN(t)&&(t=E);h>k&&(k=h);return m});m.min=c;m.max=e;m.dp=k;m.za=n;m.Fa=s;m.ma=t;return m},rw:function(q,b){var c=[];this.va()&&l.each(this.Da,function(e,k){c.push([]);l.each(k,
function(h,k){c[e].push(k.slice(q,b))})});return c},FE:function(q,b){var c=[];this.fe.length&&l.each(this.fe,function(e,k){k||(k=[]);c.push(k.slice(q,b))});return c},Oi:function(q,b){if(!l.isF(q)||!this.va())return this;l.each(this.Da,function(c,e){if(e&&e.length)return q.apply(b,[e,c])});return this},Rc:function(q,b){if(!l.isF(q)||!this.va())return this;l.each(this.Da,function(c,e){var k;e&&e.length&&l.each(e,function(e,m){m&&(k=q.apply(b,[m,e,c]));return k});return k});return this},"":""})});
__MTS.Util.go(function(u,p,l){l.regInherit("OptClass",__MTS.BaseClass,{main:function(q){__MTS.BaseClass.apply(this);this.opt=l.ext({},this.opt);this.setOption(q)},opt:p,setOption:function(q){l.ext(this.opt,q);return this},JF:function(){return this.opt}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.OptClass.prototype;l.regInherit("StyleOptClass",__MTS.OptClass,{main:function(){__MTS.OptClass.apply(this,arguments);this.zu()},Ho:p,Bb:p,setOption:function(){q.setOption.apply(this,arguments);this.wn();return this},wn:function(){this.Bb=l.dupObj(this.opt);l.ext(this.Bb,this.Ho)},zu:function(){this.Ho={};this.wn();return this},wE:function(b){l.ext(this.Ho,b);this.wn();return this},YF:function(){return this.Bb}})});
__MTS.Util.go(function(u,p,l){var q='<canvas class="',b="</canvas>";l.isIE(8)&&(q='<div class="',b="</div>");var c=__MTS.Template={nG:function(){return'<div class="mts-mask"></div>'},view:function(){return['<div class="mts-view">',q,'mts-chartBg">',b,q,'mts-chartFg">',b,c.hm("mts-sensor"),'<svg class="mts-svg"></svg><div class="mts-tip"></div><div class="mts-tip-tmpl"></div><div class="mts-fgTxt"></div></div></div>'].join("")},LD:function(){return['<div class="mts-mask"></div>',c.pa("mts-sct-legend"),
"</div>",c.pa("mts-sct-titleY"),"</div>",c.view(),c.pa("mts-sct-titleX"),"</div>",c.pa("mts-sct-DLevel"),"</div>"].join("")},nq:function(){return[c.hm("mts-sliderView"),c.pa("mts-sldView-sld"),q,'mts-chartBg">',b,c.pa("mts-slider"),'<div class="mts-sld-block"><div class="mts-sld-innerBlock"></div></div><div class="mts-sld-rngL"><div class="mts-sld-innerRngL"></div></div><div class="mts-sld-rngR"><div class="mts-sld-innerRngR"></div></div><div class="mts-sld-arrowL"></div><div class="mts-sld-arrowR"></div><span class="mts-sld-msgL"></span><span class="mts-sld-msgR"></span></div></div>',
c.pa("mts-sldView-cmd"),"</div></div>"].join("")},GE:function(e,b,h){e=[c.pa("mts-sldv-btncmd",{val:e})];h?e.push(c.pa(["mts-sldv-icon","+"==h?"mts-sldv-plus":"-"==h?"mts-sldv-minus":"<"==h?"mts-sldv-left":">"==h?"mts-sldv-right":h]),"</div>"):b&&e.push(b);e.push("</div>");return e.join("")},av:function(e){var b=[];b.push('<div class="',["mts-k",e].join(" "),'">',c.hm("mts-head"),"</div>",c.view(),"</div>");return b.join("")},rC:function(e,b){return['<div class="mts-kTitle">',c.md(e,"mts-title",p,
{title:b}),'<span class="mts-subtitle"><span class="mts-signC"></span><div class="mts-close"></div></span><span class="mts-date"></span><span class="mts-subtitle"><div class="mts-ud"></div><div class="mts-udp"></div></span><span class="mts-subtitle"><div class="mts-high"></div><div class="mts-low"></div><div class="mts-open"></div></span><span class="mts-subtitle"><div class="mts-vol"></div><div class="mts-bgCV"></div></span></div>'].join("")},pC:function(){return['<div class="mts-kboundary"><div class="mts-kb kb-top"><div class="kb-dashline"></div><div class="kb-tip">',
c.pa("kb-tip-inner"),'<div></div></div></div></div><div class="mts-kb kb-btm"><div class="kb-dashline"></div><div class="kb-tip">',c.pa("kb-tip-inner"),'<div></div></div></div></div><div class="mts-kb kb-right"><div class="kb-dashline"></div><div class="kb-tip">',c.pa("kb-tip-inner"),"<div></div></div></div></div></div>"].join("")},nB:function(){return['<div class="mts-bubble">',q,'mts-bubbleBG">',b,q,'mts-bubbleFG">',b,"</div>"].join("")},kD:function(){return['<div class="mts-painting">',q,'mts-paintBG">',
b,q,'mts-paintFG">',b,"</div>"].join("")},sG:function(){return'<div class="mts-paintTip"></div>'},tG:function(){return'<div class="mts-paintTxt"></div>'},EG:function(){return'<div class="mts-tip-rng"><div class="mts-tip-lineX"></div><div class="mts-tip-lineY"></div><div class="mts-tip-msgX"></div><div class="mts-tip-msgY"></div><div class="mts-tip-focus"><div></div></div></div>'},uF:function(){return'<div class="mts-fgTxt-rng"></div>'},JB:function(e,b){b=b?1:0;e||(e="");var h=b?"mts-boxOn":"";return[c.pa("mts-fgCheckBox",
{val:e,on:b}),c.pa(h),"</div></div>"].join("")},LB:function(e){e||(e="");return[c.pa("mts-fgRmBox",{val:e}),"<div></div></div>"].join("")},KB:function(e){e||(e="");return[c.pa("mts-fgDragDown",{val:e}),"<div></div></div>"].join("")},qC:function(e){return[c.pa("mts-kSplitter",{name:e}),"<div></div></div>"].join("")},hm:function(e){return c.Io("div",[e,"unselectable"],{unselectable:"on"})},pa:function(e,b,h){return c.Io("div",e,b,h)},span:function(e,b,h){return c.Io("span",e,b,h)},Io:function(c,b,h,
m){return l.tagStart(c,b,h,m)},Nb:function(e,b,h,m){return[c.pa(b,m,h),e,"</div>"].join("")},md:function(e,b,h,m){return[c.span(b,m,h),e,"</span>"].join("")}}});
__MTS.Util.go(function(u,p,l){l.regClass("TimerMove",{Ko:p,rb:p,Nn:0,Mm:0,on:function(l,b,c){c||(c=[]);this.rb||(this.rb={});this.rb.fn=l;this.rb.Tg=b;this.rb.ku=c;return this},ip:function(l,b){this.rb&&(b&&(this.rb.ku=b),this.Vz(l));return this},destroy:function(){this.Go();this.rb&&l.clearObj(this.rb);l.clearObj(this)},Vz:function(l){if(!l||20>l)l=20;var b=this,c=0.4*l;b.Mm++;10<c&&(c=10);b.Mm>c?(b.Go(),b.mr()):b.Nn||(b.Nn=1,b.Ko=setTimeout(function(){b.Go();b.mr.apply(b)},l))},Go:function(){this.Mm=
this.Nn=0;clearTimeout(this.Ko);this.Ko=p},mr:function(){var l=this.rb;l&&l.fn.apply(l.Tg,l.ku)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.CHART=__MTS.TREND=__MTS.LINE=l.regInherit("Chart",__MTS.StyleOptClass,{main:function(c){__MTS.StyleOptClass.apply(this,[c]);this.Oh={}},opt:{uB:0,Sk:p,Cc:0,Wb:NaN,Hi:0,ke:1,Oc:1,Yo:0,Pc:1,Gi:0,gb:1,Ig:1,Xo:1,Hg:0,Ii:1,uu:0,Qc:q.right,Jg:0,Ji:1,Qe:"",vu:q.right,tB:"",Dc:p,Ki:p,Li:p},Ya:0,ib:0,zIndex:0,HG:-1,Mg:"",u:p,j:p,Bg:p,e:p,Ha:p,d:p,G:p,b:p,jb:p,Oh:p,vo:p,wo:p,Nj:p,tn:p,Ln:1,sf:1,kb:NaN,hb:function(c){var e=p;this.jb&&(c&&this.jb.Te(),
e=this.jb.hb());return e},Kf:function(c){var e=this.jb;return 0<=c?e.ed(c):e},YB:function(){return this.b},Su:function(c){var e=this.opt.color_line;return e[(this.opt.Cc+c)%e.length]},RB:function(c,e){var b=this.Mg,b="sign"==b?c:"val"==b?e:"";return 0<b?this.opt.color_vol_up:0>b?this.opt.color_vol_dn:this.opt.color_vol_eq},ZB:function(c,e){return this.Mr(this.opt.Ki,c,e)},$B:function(c,e){return this.Mr(this.opt.Li,c,e)},Jd:function(){return this.Ou(this.e,this.Ha.opt.Yb,this.b.length)},Ou:function(c,
e,b){e=this.Fr(c,e,b);c=e/3;20<e?c=e/4:5>=e?c=1:10>=e&&(c=e/3.5);c=l.floor(e-c);c=2*l.floor(c/2);1>c?c=1:c>this.opt.s_bar_maxWidth&&(c=this.opt.s_bar_maxWidth);return c},AF:function(){return this.Bb.Qc},pF:function(){return this.Bb.Jg},Ol:function(c){var e={};if(c){if(c==q.mb)e.gb=0,e.Oc=0;else if(c==q.left||c==q.right)e.gb=1,e.Oc=1,e.Qc=c;this.wE(e)}else this.zu();return this},fh:function(c,e,b){this.u=c;this.j=e;this.Bg=b;return this},ya:function(c,e){this.e=c;this.Ha=e;return this},la:function(c,
e){this.d=c;this.G=e;return this},fa:function(c,e){this.sf=e||1;l.isA(c)&&(this.b=c);return this},xa:function(c){c.va&&(this.jb=c);return this},Ue:function(c){this.kb=c;return this},Vk:function(){this.Oh={};return this},dj:function(c,e){this.Oh[c]=e?1:0;this.eh(c,2==e?1:0);return this},eh:function(c,e){this.jb.eh(c,e).Te();return this},Yu:function(){for(var c=1,e=this.jb.va(),b=0;b<e;b++)if(!this.Oh[b]){c=0;break}return c},Ia:function(){var c=this.e;this.vo=this.Ha.opt.Yb==q.U?l.map(this.b,function(e){return c.c(e)}):
l.map(this.b,function(e,h){return c.c(h)});var e=this.wo=[];this.jb.Rc(function(b,h,m){b=l.map(b,function(e){return c.i(e)});e[m]||(e[m]=[]);e[m][h]=b});return this},If:function(){if(!this.opt.Ig)return this;var c=this.Ha.Ib,e=this.Ha.ub,b=this.opt.color_border;l.isA(b)||(this.opt.color_border=[b,b,b,b]);this.opt.ke&&this.QA(c);this.opt.Pc&&this.SA(c);this.Bb.Oc&&this.RA(e);this.Bb.gb&&this.TA(e);this.CA();return this},Jb:function(c,e){if(!this.opt.Xo)return this;var b=this,h=[],m=[],n=b.opt.Sk||
[],s=b.Oh;b.jb.Oi(function(c,e){if(!s[e]){var m=n[e],m=m&&__MTS[m]?__MTS[m].prototype:b;h.push({M:e,Ra:c,hv:m.zIndex+(b.Ln?e:0),Wo:m})}});h.sort(function(c,e){return e.hv-c.hv});l.each(h,function(h,n){m.push({Qi:c,Ri:e,M:n.M,mc:n.M+b.opt.Cc,labels:b.b,Ra:n.Ra,wa:b.vo,ra:b.wo[n.M],Wo:n.Wo})});var t=b.triggerEvent("_onDele_FgData",[m]);t&&(m=t);l.each(m,function(c,e){b.opt.uB||e.Wo.qa.apply(b,[e])});b.opt.Gi&&b.Ut();return b},Mr:function(c,e,b){var h="";0<=e&&l.isA(c)&&(h=e<c.length?c[e]:c[0],0<=b&&
l.isA(h)&&(h=h[b]));if(l.isA(h)||!h)h="";return h},Fr:function(c,e,b){c||(c=this.e);var h=c.wh,m=c.Mc,n=c.oe(this.sf);e==q.U&&1===b&&(n=0.3*m.Ld);n>h||0>=n?n=h:c.oe(1)<n&&(n=c.oe(1));return n},Xh:function(c){var e=this.opt.s_lineW,b=this.opt.Dc;l.isA(b)&&b.length>c&&1<=b[c]&&(e=b[c]);return e},sb:function(c,e){var b=this.opt,b=2==e?b.color_gdn2:e?b.color_gdn1:b.color_line;return b[c%b.length]},qa:function(c){b.prototype.Vt.apply(this,[c])},Vt:function(c){var e=0,b=this.j,h=this.d,m=c.labels.length,
n=this.opt.uu,s=this.Xh(c.M),t=c.Ra.length-1,w=c.Ra[t].ma,l=this.sb(c.mc);if(!isNaN(w)){var m=Math.ceil(__MTS.AniMath.esBegin(0,c.Ri,c.Qi).esoutT4(m)),t=c.ra[t],B=c.wa[w],p=t[w],z=1;n&&(B=h.x);b.save().setGlobalAlpha(this.opt.s_line_a).setLineWidth(s).setLineJoin(q.round).setLineCap(q.round).setStrokeStyle(l).setFillStyle(l).beginPath(1).moveTo(B,p);for(var s=w,C,F;s<m;s++)C=c.wa[s],F=t[s],isNaN(F)||(e++,b.lineTo(C,F)),z&&F!=p&&(z=0);n&&(C=h.getX2(),b.lineTo(C,F));1===e&&this.opt.Ii&&!n?b.pathCircle(B,
p,4,4).fill():(z&&b.beginPath(1).pathLine(B,p,C,F),b.stroke());b.restore()}},kF:function(){},CA:function(){var c=this.u,e=this.d,b=this.opt.color_border,h=this.opt.s_border,m=e.x,n=e.getX2(),s=e.y,e=e.getY2();h[0]||s--;h[2]||e--;c.save();h[1]&&c.setStrokeStyle(b[1]).setLineWidth(h[1]).beginPath(1).pathLine(m,s,m,e).stroke();h[3]&&c.setStrokeStyle(b[3]).setLineWidth(h[3]).beginPath(1).pathLine(n,s,n,e).stroke();h[0]&&c.setStrokeStyle(b[0]).setLineWidth(h[0]).beginPath(1).pathLine(m,s,n,s).stroke();
h[2]&&c.setStrokeStyle(b[2]).setLineWidth(h[2]).beginPath(1).pathLine(m,e,n,e).stroke();c.restore()},QA:function(c){var e,b,h=this.u,m=this.d,n=m.y,s=m.getY2(),t=this.Ya&&this.opt.Hi,w=this.opt.color_gridBaseline;h.save().setGlobalAlpha(this.opt.s_grid_a).setStrokeStyle(this.opt.color_grid_x).setLineWidth(this.opt.s_thick_gridX).beginPath(1);for(var l=0,B;l<c.length;l++)B=c[l],1>Math.abs(B.pos-m.x)||1>Math.abs(B.pos-m.getX2())||(B.type==q.ea?e=B:t&&0===B.val?b=B:h.pathLine(B.pos,n,B.pos,s));h.stroke();
e&&h.setStrokeStyle(w).beginPath(1).pathLine(e.pos,n,e.pos,s).stroke();b&&(e&&(w=this.opt.color_grid_x),h.setStrokeStyle(w).beginPath(1).pathLine(b.pos,n,b.pos,s).stroke());h.restore()},RA:function(c){var e,b,h=this.u,m=this.d,n=m.x,s=m.getX2(),t=!this.Ya&&this.opt.Hi,w=this.opt.color_gridBaseline;h.save().setGlobalAlpha(this.opt.s_grid_a).setStrokeStyle(this.opt.color_grid_y).setLineWidth(this.opt.s_thick_gridY).beginPath(1);for(var l=0,B;l<c.length;l++)B=c[l],1>Math.abs(B.pos-m.y)||1>Math.abs(B.pos-
m.getY2())||(B.type==q.ea?e=B:t&&0===B.val?b=B:this.opt.Yo||h.pathLine(n,B.pos,s,B.pos));h.stroke();e&&h.setStrokeStyle(w).beginPath(1).pathLine(n,e.pos,s,e.pos).stroke();b&&(e&&(w=this.opt.color_grid_y),h.setStrokeStyle(w).beginPath(1).pathLine(n,b.pos,s,b.pos).stroke());h.restore()},my:function(c,e){e=e||this.opt.vu;return Math.round(c*(1>e?e:e==q.right?0.125:"mid"==e?0.5:0.875))},Nx:function(c,e){for(var b=[],h=this.d,m=this.G,n=this.opt.Gi,s=this.opt.s_fontSizeX,t=0,w,E;t<c.length;t++)w=c[t],
"off"!=w.type&&(w.cr||(w.cr=this.opt.color_txt_x),w.nd=l.getTextWidth(w.txt,s),w.Ob=n?w.pos+1:l.round(w.pos-this.my(w.nd)),w.Zb=n?e-1:e+this.opt.s_tickGap+this.opt.s_tickLen+s,w.Ob<m.x?w.Ob=m.x:w.Ob+w.nd>m.getX2()?w.Ob=m.getX2()-w.nd-1:n&&w.Ob+w.nd>h.getX2()&&(w.Ob=h.getX2()-w.nd-1),E&&t<c.length-1&&Math.abs(w.Ob-E.Ob)<E.nd+10||(E=w,b.push(w)));(E=b[b.length-2])&&w.Ob<E.Ob+E.nd&&b.pop();return b},SA:function(c){var e=this.opt.Gi,b=this.u,h=this.opt.s_tickLen,m=this.d.getY2();this.Nj=this.Nx(c,m);
e||(b.save(),this.Ut(),h&&(b.setStrokeStyle(this.opt.color_border[2]).beginPath(1),l.each(this.Nj,function(c,e){e.txt&&b.pathLine(e.pos,m,e.pos,m+h)}),b.stroke()),b.restore())},Ut:function(){var c=this.opt.Gi?this.j:this.u;this.Nj&&(c.save().setFont(this.opt.s_fontSizeX),l.each(this.Nj,function(e,b){c.drawText(b.Ob,b.Zb,b.txt,b.cr,b.bg)}),c.restore())},$r:function(){var c=this.opt.s_tickLen,e=this.opt.s_border,b=this.opt.Oc,h=this.Bb.Qc,h=h==q.oF?q.left:q.right;b?4==e.length&&(h==q.right&&0==e[3]?
c=0:0==e[1]&&(c=0)):c=0;return c},Ox:function(c,e){var b=[],h,m=this.opt.Ji,n=this.d,s=this.G,t=this.$r(),w=this.opt.s_tickLen,E=this.opt.s_tickGap,B=this.opt.s_fontSizeY,p=this.opt.Qe,z=this.Bb.Qc==q.left?1:0,C=this.Bb.Jg;this.opt.Hg&&(h=this.sb(this.opt.Cc));for(var F=0,D,u,G;F<c.length;F++){D=c[F];h&&(D.cr=h);D.cr||(D.cr=this.opt.color_txt_y);D.nd=l.getTextWidth(D.txt,B);D.Zb=D.pos+B/2;C?(D.Ob=z?e+E:e-D.nd-E-1,"max"==D.type?D.Zb=n.y+B:"min"==D.type&&(D.Zb=n.getY2()-1)):D.Ob=z?e-D.nd-t-E-1:e+t+
E;D.Zb<s.y+B?D.Zb=s.y+B:D.Zb>s.getY2()-1?D.Zb=s.getY2()-1:D.Zb>n.getY2()+w&&(D.Zb=n.getY2()+w);G=u&&Math.abs(D.Zb-u.Zb)<B+2?1:0;if(D.type==q.ea||m&&F==c.length-1||!m&&1==F)G&&b.pop();else if(G)continue;this.triggerEvent("_onScaleItemY",[D]);u=D;b.push(D);p&&"max"==D.type&&(u=D={type:"unitY",txt:p,Ob:D.Ob,Zb:D.Zb+B,cr:D.cr,bg:D.bg},b.push(D))}return b},TA:function(c){var e=this.u,b=this.$r(),h=this.Bb.Qc==q.left?1:0,m=this.Bb.Jg,n=h?this.d.x:this.d.getX2();this.tn=this.Ox(c,n);e.save().setFont(this.opt.s_fontSizeY);
m&&e.setGlobalAlpha(this.opt.s_txtInnerY_a);l.each(this.tn,function(c,h){e.drawText(h.Ob,h.Zb,h.txt,h.cr,h.bg)});b&&!m&&(e.setStrokeStyle(this.opt.color_border[h?1:3]).beginPath(1),l.each(this.tn,function(c,m){m.txt&&!isNaN(m.pos)&&e.pathLine(n,m.pos,n+(h?-1:1)*b,m.pos)}),e.stroke());e.restore()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.AREA=l.regInherit("Area",__MTS.Chart,{opt:{Hi:1,ru:1,Gf:0,Ff:0},zIndex:200,Dg:function(b,c,e){var k=this.j,h=this.d,m=h.y,n=h.getY2(),h=c.mc%this.opt.color_line.length,s=this.sb(h),t=this.sb(h,1),w=this.sb(h,2),h=this.e.i(0<e?this.opt.Gf:this.opt.Ff),l=this.opt.Mv,q=this.opt.Nv,p=this.opt.s_area_a,h=h<m?m:h>n?n:h;this.hasEvent("dele_AreaColor")?e=this.triggerEvent("dele_AreaColor",[e]):t&&w&&t!=w?(e=k.getCreateLinearGradient(0,h,0,0<e?m:n),e.addColorStop(0,
t),1>l&&e.addColorStop(l,t),0<q&&e.addColorStop(q,w),e.addColorStop(1,w)):e=t&&w&&t==w?t:s;__MTS.AniMath.esBegin(h,c.Ri,c.Qi);k.save();k.setGlobalAlpha(p).setFillStyle(e);c=0;for(var z;c<b.length;c++){e=b[c];for(t=m=0;t<e.length;t++)n=e[t],z=n[0],isNaN(z)||(n=__MTS.AniMath.esoutT5(n[1]),m?k.lineTo(z,n):(m=1,k.beginPath().moveTo(z,n)));m&&k.lineTo(z,h).closePath().fill()}k.restore()},qa:function(b){var c=q.prototype.Fn.apply(this,[b,this.opt.Gf,this.opt.Ff]),e=c[0],c=c[1];c.length&&q.prototype.Dg.apply(this,
[c,b,-1]);e.length&&q.prototype.Dg.apply(this,[e,b,1]);this.opt.ru&&__MTS.DashFirstLine.prototype.qa.apply(this,arguments)},Fn:function(b,c,e){var k=this.d,h=k.y,m=k.getY2(),k=q.prototype.ry,n=this.e.i(c),s=this.e.i(e),t=b.wa,w=b.ra[b.ra.length-1],l=b.Ra[b.Ra.length-1];b=b.labels;for(var B=[],A=[],n=n<h?h:n>m?m:n,s=s<h?h:s>m?m:s,h=0,z,C,F,D,u,G,H;h<b.length;h++)m=l[h],isNaN(m)||(z=t[h],C=w[h],F=m>=c?1:m<=e?-1:0,!D||!H||H==F&&F||(0<H?(D.push([k(u,G,z,C,n),n]),B.push(D)):(D.push([k(u,G,z,C,s),s]),A.push(D)),
D=p),F&&(D||(D=[],m>c?isNaN(G)?D.push([z,n]):D.push([k(u,G,z,C,n),n]):m<e&&(isNaN(G)?D.push([z,s]):D.push([k(u,G,z,C,s),s]))),D.push([z,C])),u=z,G=C,H=F);D&&(0<F?(D.push([z,n]),B.push(D)):(D.push([z,s]),A.push(D)));return[B,A]},ry:function(b,c,e,k,h){return l.round(b+(e-b)*(h-c)/(k-c),6)}})});
__MTS.Util.go(function(u,p,l){__MTS.NPAREA=l.regInherit("NPArea",__MTS.Area,{main:function(){__MTS.Area.apply(this,arguments);this.addEvent("dele_AreaColor",this.dx,this)},dx:function(l){return 0<l?this.opt.color_vol_upin:this.opt.color_vol_dnin}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.UDAREA=l.regInherit("UDArea",__MTS.Area,{main:function(){__MTS.Area.apply(this,arguments);this.addEvent("_onScaleItemY",this.no,this)},Mg:"sign",no:function(b){this.opt.Hg&&(b.cr=this.opt.color_vol_eq)},Dg:function(b,c,e){var k=this.d.getY2(),h=this.j;c=0<e?this.opt.color_vol_upin:0>e?this.opt.color_vol_dnin:this.opt.color_vol_eqin;h.save();h.setFillStyle(c).setGlobalAlpha(this.opt.s_area_a);l.each(b,function(c,e){var b=e[0],t=b[0];h.beginPath().moveTo(t,
k);for(var w=0;w<e.length;w++)b=e[w],t=b[0],b=b[1],h.lineTo(t,b);h.lineTo(t,k).closePath();h.fill()});h.restore()},qa:function(b){for(var c=b.wa,e=b.ra[b.ra.length-1],k=b.Ra[b.Ra.length-1],h=[],m=[],n=[],s=0,t=[],w,l,B,p,z,C;s<b.labels.length;s++)l=k[s],isNaN(l)||(w=[c[s],e[s]],(B=0<l-z?1:0>l-z?-1:0)||(B=C),C&&B!=C&&(t.length&&(0<C?m.push(t):0>C?n.push(t):h.push(t)),t=[p]),t.push(w),p=w,z=l,C=B);t.length&&(0<B?m.push(t):0>B?n.push(t):h.push(t));h.length&&q.prototype.Dg.apply(this,[h,b,0]);n.length&&
q.prototype.Dg.apply(this,[n,b,-1]);m.length&&q.prototype.Dg.apply(this,[m,b,1])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.BAMBOO=l.regInherit("Bamboo",__MTS.Chart,{ib:1,da:function(b,c,e){var k=this.j,h=0<e?this.opt.color_kbar_up:this.opt.color_kbar_dn,m=this.opt.s_line_a;e=l.round(0.7*c.bd);var n=3<e?1.5:1,s=1<n?1:0,t=s?1:0;e=2>c.bd?1:2>e?2:e;k.save();k.setGlobalAlpha(m).setStrokeStyle(h).setLineWidth(n).beginPath(s?0:1);for(var h=0,w,E;h<b.length;h++)m=b[h],n=s?l.round(m.Se):m.Se,w=s?l.round(m.Se-e):n-e,E=s?l.round(m.Se+e):n+e,c.mC||k.pathLine(w,m.Bl,n+t,m.Bl).pathLine(E,m.Al,
n-t,m.Al),k.pathLine(n,m.hd,n,m.Yi);k.stroke();k.restore()},qa:function(b){for(var c=this.Jd(),e=b.Ra,k=b.ra,h=[],m=[],n=0,s;n<b.labels.length;n++)s={time:b.labels[n],open:e[0][n],close:e[3][n],Se:b.wa[n],Bl:l.round(k[0][n]),hd:l.round(k[1][n]),Yi:l.round(k[2][n]),Al:l.round(k[3][n])},s.close>s.open?h.push(s):m.push(s);b.bd=c;b.mC=2>c&&300<b.labels.length?1:0;m.length&&q.prototype.da.apply(this,[m,b,-1]);h.length&&q.prototype.da.apply(this,[h,b,1])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Chart.prototype,b=__MTS.BAR=l.regInherit("Bar",__MTS.Chart,{opt:{Hi:1,Tk:"",su:0,tu:1},ib:1,zIndex:100,hb:function(){var c=q.hb.apply(this,arguments);isNaN(this.opt.Wb)&&0>c.max&&c.min!=c.max&&0!==this.opt.kd&&(c.ea=0);return c},da:function(c,e,b){var h,m=0;h=Array.prototype.slice.call(arguments);var n=this.j,s=this.d,t=c[0],w=t.alpha?t.alpha:this.opt.s_bar_a,E=this.sb(e.mc),q=this.sb(e.mc,1),p=this.sb(e.mc,2),z=Math.abs(t.aa-t.A),C=2>=z?1:0,F=this.opt.tu,
D=t.t,t=this.opt.Mv,u=this.opt.Nv;this.hasEvent("dele_BarColor")?h=this.triggerEvent("dele_BarColor",h.slice(2)):q&&p&&q!=p?(h=n.getCreateLinearGradient(0,D,0,0<b?s.y:s.getY2()),h.addColorStop(0,q),1>t&&h.addColorStop(t,q),0<u&&h.addColorStop(u,p),h.addColorStop(1,p)):h=q&&p&&q==p?q:E;n.save();C&&(m=z/2,z=l.round(1.5*z+0.5),n.setLineWidth(z));var G,q=2>z?1:0;n.setGlobalAlpha(w).setStrokeStyle(h).setFillStyle(h).beginPath(q);for(s=0;s<c.length;s++)t=c[s],w=t.A,p=t.t,z=t.aa,h=__MTS.AniMath.esBegin(t.t,
e.Ri,e.Qi).esoutT5(t.ga),1>Math.abs(h-p)&&F&&(h+=0<=b?-1:1),t.focus&&(G={A:w,t:p,aa:z,ga:h}),C?(w+=m,t.focus?G.aa=w:n.pathLine(w,p,w,h)):t.focus||n.pathRect(w,p,z,h);C?n.stroke():n.fill();G&&(w=G.A,p=G.t,z=G.aa,h=G.ga,n.setGlobalAlpha(this.opt.s_bar_focus_a).beginPath(q),C?n.pathLine(w,p,z,h).stroke():n.pathRect(w,p,z,h).fill());n.restore()},Gk:function(c,e,b){e=this.j;var h=this.opt.s_fontSizeY+2,m=this.opt.color_txt_y;e.save();for(var n=0,s,t,w;n<c.length;n++)w=c[n],s=w.A,t=w.ga+(0<b?-2:h),e.drawText(s,
t,w.val,m);e.restore()},qa:function(c){var e,k,h,m=this.opt.Tk,m=m?new Date(m):"";e=c.M;var n=this.jb.va(),s=this.e.Qg(),t=this.Jd()/n,n=t*(e-n/2),w=c.labels,l=c.Ra[0],q=c.wa,p=c.ra[0],z=[],C=[],F=[],D=[],u=[],G=[];isNaN(s)&&(s=0);e=b.prototype.Yr.apply(this,[s]);for(var H=0,K;H<w.length;H++)k=q[H]+n,h=p[H],K={A:k,t:e,aa:k+t,ga:h,val:l[H]},k=0,m&&(h=new Date(w[H]),+h<=+m&&(k=1,K.alpha=this.opt.s_bar_preDt_a)),H==this.kb&&(K.focus=1),K.val<s?k?D.push(K):F.push(K):K.val>s?k?C.push(K):z.push(K):k?G.push(K):
u.push(K);this.hasEvent("evt_drawBar")?this.triggerEvent("evt_drawBar",[c,z,F,u,C,D,G]):(G.length&&b.prototype.da.apply(this,[G,c,0]),u.length&&b.prototype.da.apply(this,[u,c,0]),D.length&&b.prototype.da.apply(this,[D,c,-1]),F.length&&b.prototype.da.apply(this,[F,c,-1]),C.length&&b.prototype.da.apply(this,[C,c,1]),z.length&&b.prototype.da.apply(this,[z,c,1]),this.opt.su&&(b.prototype.Gk.apply(this,[D,c,-1]),b.prototype.Gk.apply(this,[F,c,-1]),b.prototype.Gk.apply(this,[C,c,1]),b.prototype.Gk.apply(this,
[z,c,1])))},Yr:function(c){var e=this.d;c=this.e.i(c);c<e.y?c=e.y:c>e.getY2()&&(c=e.getY2());return c}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Bar.prototype;__MTS.NPBAR=l.regInherit("NPBar",__MTS.Bar,{main:function(){__MTS.Bar.apply(this,arguments);this.addEvent("_onScaleItemY",this.no,this);this.addEvent("evt_drawBar",this.wx,this);this.addEvent("dele_BarColor",this.ex,this)},opt:{$o:p,Zo:p},Mg:"val",no:function(b){this.opt.Hg&&(b.cr=0<b.val?this.opt.color_vol_up:0>b.val?this.opt.color_vol_dn:this.opt.color_vol_eq)},ex:function(b,c){c=+c;var e=0<b?this.opt.$o:0>b?this.opt.Zo:p,k=0<b?this.opt.color_vol_up:
0>b?this.opt.color_vol_dn:this.opt.color_vol_eq;e&&e[c]&&e[c].cr&&(k=e[c].cr);return k},wx:function(b,c,e,k,h,m,n){var s=this,t={"-":[]},w={"-":[]},E={"-":[]},p={"-":[]},A=s.opt.$o,z=s.opt.Zo;A&&c.length?s.zk(t,c,A,1):t["-"]=c;A&&h.length?s.zk(E,h,A,1):E["-"]=h;z&&e.length?s.zk(w,e,z,-1):w["-"]=e;z&&m.length?s.zk(p,m,z,-1):p["-"]=m;n.length&&q.da.apply(s,[n,b,0]);k.length&&q.da.apply(s,[k,b,0]);m.length&&l.each(p,function(c,e){e.length&&q.da.apply(s,[e,b,-1,c])});e.length&&l.each(w,function(c,e){e.length&&
q.da.apply(s,[e,b,-1,c])});h.length&&l.each(E,function(c,e){e.length&&q.da.apply(s,[e,b,1,c])});c.length&&l.each(t,function(c,e){e.length&&q.da.apply(s,[e,b,1,c])})},zk:function(b,c,e,k){var h=this;l.each(c,function(c,n){var s;c==h.kb&&(n.focus=1);l.each(e,function(c,e){b[c]||(b[c]=[]);if(e&&0<=k*(e.val-n.val))return b[c].push(n),s=1,!1});s||b["-"].push(n)})}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Bar.prototype;__MTS.STACKBAR=l.regInherit("StackBar",__MTS.Bar,{Ln:0,Nq:p,Am:p,Qb:p,qa:function(b){var c,e=this.e.Qg(),k=this.Jd(),h=-k/2,m=b.Ra[0],n=b.wa,s=b.ra[0],t=[],l=[];isNaN(e)&&(e=0);c=q.Yr.apply(this,[e]);b.M&&this.Am||(this.Am=[],this.Nq=[]);for(var E=this.Am,p=this.Nq,A=0,z,C,F,D;A<b.labels.length;A++)z=n[A]+h,C=s[A],F=Math.abs(C-c)||0,D=m[A],z={A:z,t:c,aa:z+k,ga:C,val:D},A==this.kb&&(z.focus=1),b.M||(E[A]=0,p[A]=0),D<e?(z.t+=E[A],z.ga+=E[A],z.t>
c+0.5&&0.5<F&&(z.t-=0.5),E[A]+=F,t.push(z)):(z.t-=p[A],z.ga-=p[A],z.t<c+0.5&&0.5<F&&(z.t+=0.5),p[A]+=F,l.push(z));t.length&&q.da.apply(this,[t,b,-1,1]);l.length&&q.da.apply(this,[l,b,1,1])},xa:function(){q.xa.apply(this,arguments);var b=0,c=0,e=[],k=[];this.jb.Rc(function(c){l.each(c,function(c,h){0<=h?e[c]=e[c]?e[c]+h:h:0>h&&(k[c]=k[c]?k[c]+h:h)})});l.each(e,function(e,b){b>c&&(c=b)});l.each(k,function(c,e){e<b&&(b=e)});this.Qb={min:b,max:c};return this},hb:function(){return this.Qb}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Chart.prototype;__MTS.BSBAR=l.regInherit("BSBar",__MTS.Chart,{opt:{},zIndex:100,qm:p,Ne:p,Bh:p,mt:p,Rq:p,Vm:p,fa:function(b,c){var e={},k=[],h=0;l.each(b,function(c,b){var k=b.split(" ")[0];e[k]?(e[k].lc++,e[k].lc>h&&(h=e[k].lc)):e[k]={Bq:c,lc:1}});l.each(c,function(c,e){k.push(e.split(" ")[0])});2>h&&(h=2);e.zp=h;this.mt=e;this.Rq=k;return q.fa.apply(this,[b])},Md:function(b,c){this.Ne=b||[];this.Bh=c||[];return this},jE:function(b){this.qm=b;return this},
zF:function(){return this.Vm},Lo:function(b,c){var e=this,k=e.d,h,m,n=e.j,s=e.opt.s_bs_font,t=c?e.opt.s_bgBar_focus_a:e.opt.s_bgBar_a;n.setFont(s).setLineWidth(2);l.each(b,function(b,E){var q=E.A,p=E.t,z=E.aa,C=E.ga,F=0<E.sign?e.opt.color_bs_focus_buy:0>E.sign?e.opt.color_bs_focus_sell:E.cr;if(p<k.y||C>k.getY2())return!0;n.beginPath().setGlobalAlpha(t).setFillStyle(E.cr).setStrokeStyle(F||E.cr).pathRect(q,p,z,C).fill();c&&E.idx==e.kb&&n.stroke();if(E.bd<0.8*s)return!0;h=l.fmtNum(E.ob);m=l.getTextWidth(h,
s)+2;m<Math.abs(z-q)&&n.setGlobalAlpha(1).drawText(q+2,C-2,h,e.opt.color_bs_txtin)})},DA:function(b){var c=this,e,k=c.j;k.save();l.each(b,function(h,b){l.each(b,function(h,b){(isFocus=b.focus?1:0)?e=b.items:c.Lo(b.items)})});e&&c.Lo(e,1);k.restore()},qa:function(b){if(this.qm){var c=this.e,e=this.mt,k=b.ra[0];b=b.Ra[0];for(var h=this.Rq,m=this.qm.dd(0),n={},s,t,w,E,q,p,z,C=e.zp,F=0,D=0;D<h.length;D++)w=h[D],!e[w]||e[w].lc<C||(s=c.c(e[w].Bq),E=b[D],q=m[D],t=k[D],p=this.Ne[D],z=this.Bh[D],p={idx:D,
DG:w,Ab:E,ob:q,sign:p,cr:z},n[w]||(n[w]={}),w=n[w],w[E]||(w[E]={items:[],cm:0,x:s,y:t}),w=w[E],w.Ab=E,w.items.push(p),p.idx==this.kb&&(w.focus=1),w.cm+=q,w.cm>F&&(F=w.cm));var u,G,H=c.oe(C-1)-2,K=this.opt.s_bs_barW;l.each(n,function(c,e){var h=[],b=K,k,m;l.each(e,function(c,e){h.push(e)});if(1<h.length){h.sort(function(c,e){return c.Ab-e.Ab});for(var n=1,w;n<h.length;n++)w=Math.abs(h[n].y-h[n-1].y),w<b&&(b=w)}2>b&&(b=2);l.each(e,function(c,e){s=e.x;t=e.y;u=s;k=t-b/2;m=t+b/2;l.each(e.items,function(c,
e){G=e.ob/F*H;e.A=u;e.aa=u+G;e.t=k;e.ga=m;e.bd=b;u+=G})})});this.Vm=n;this.DA(n)}}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Chart.prototype;__MTS.BULLET=l.regInherit("Bullet",__MTS.Chart,{main:function(){__MTS.Chart.apply(this,arguments);this.addEvent("_onDele_FgData",this.Ry)},opt:{sB:0},zIndex:200,Dd:-1,Ub:NaN,Vf:p,re:function(b,c,e){this.Dd=b;this.Ub=c;this.Vf=p;e&&(b=e.dd(0))&&b.length&&(this.Vf=e);return this},qa:function(b){var c,e,k=this.j,h=this.opt.color_line;c=h[(b.mc+1)%h.length];var h=b.wa,m=b.ra[0];b=b.ra[b.ra.length-1];var n=h.length,s=this.Dd;e=this.e.c(s);var t=
this.e.i(this.Ub);if(!isNaN(e)&&!isNaN(t)){0>s&&(s=0);k.save().setFillStyle(c).setGlobalAlpha(this.opt.s_area_a);k.beginPath().moveTo(e,t);for(t=s;t<n;t++)c=h[t],e=m[t],k.lineTo(c,e);for(t=n-1;t>=s;t--)c=h[t],e=b[t],k.lineTo(c,e);k.closePath().fill();k.restore()}},Ry:function(b){var c,e=[],k=this.Ub,h=this.e,m=[],n=[],s=this.b.length-1;this.Vf&&(c=this.Vf.dd(0),l.each(c,function(c,b){isNaN(k)||isNaN(b)||(k=b);e.push(h.i(b))}),l.each(b,function(c,h){h.vG=e}));l.each(b,function(c,e){var h=e.Ra[0],h=
h?h[s]:NaN;e.wl=h;h<k?n.push(e):m.push(e)});m.sort(function(c,e){return e.wl-c.wl});n.sort(function(c,e){return c.wl-e.wl});return b=m.concat(n)},BA:function(){var b=this.e,c=this.Dd,e=this.Ub,k=b.c(c),h=b.i(e),m=this.Vf?this.Vf.dd(0):[],n=[h],s=[e],t={M:0,mc:0,labels:[c],wa:[k],Ra:[s],ra:[n]};s.ma=0;m.length?l.each(m,function(e,h){if(e>c){var k=b.c(e);y=b.i(h);t.labels.push(e);t.wa.push(k);s.push(h);n.push(y)}}):(t.labels.push(c+1),t.wa.push(this.d.getX2()),s.push(e),n.push(h));this.opt.sB?__MTS.Dashed.prototype.qa.apply(this,
[t]):__MTS.Chart.prototype.qa.apply(this,[t])},Jb:function(){q.Jb.apply(this,arguments);this.BA();return this}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.CROSS=l.regInherit("Cross",__MTS.Chart,{ib:1,Wt:function(b,c,e){c=this.Jd();var k=l.round(c/2),h=this.j;2<k&&(k=2);h.save();h.setGlobalAlpha(this.opt.s_line_a).setStrokeStyle(e).setLineWidth(1).beginPath(1);l.each(b,function(c,e){var b=e[0],t=e[1];h.pathLine(b-k,t,b+k,t).pathLine(b,t-k,b,t+k)});h.stroke();h.restore()},qa:function(b){for(var c=[],e=this.sb(b.mc),k=b.wa,h=b.ra[0],m=0,n,s;m<k.length;m++)n=k[m],s=h[m],c.push([n,s]);q.prototype.Wt.apply(this,[c,
b,e])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;__MTS.DASHED=l.regInherit("Dashed",__MTS.Chart,{qa:function(b){var c=[],e=0,k,h=this.j,m=this.opt.s_dashLen||5,n=this.sb(b.mc),s=this.Xh(b.M),t=b.wa;b=b.ra[0];h.save();h.setGlobalAlpha(this.opt.s_line_a).setStrokeStyle(n).setFillStyle(n).setLineJoin(q.round).setLineCap(q.round).setLineWidth(s);for(var n=0,l;n<t.length;n++)s=t[n],l=b[n],isNaN(l)||(e++,k=[s,l],c.push(k));1===e&&this.opt.Ii?h.beginPath().pathCircle(k[0],k[1],4,4).fill():h.strokeDashed(c,m);
h.restore()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;__MTS.DASHFIRSTLINE=l.regInherit("DashFirstLine",__MTS.Chart,{opt:{Tk:""},qa:function(b){var c=0,e,k,h,m=this.j,n=this.Xh(b.M),s=this.sb(b.mc),t=this.opt.s_dashLen||5,w=this.opt.Tk,w=w?new Date(w):"",E=b.labels,p=b.wa,A=b.ra[0],z=b.Ra[0].ma;b=[];var C=[];if(!isNaN(z)){for(;z<E.length;z++)e=p[z],k=A[z],isNaN(k)||(c++,h=[e,k],w?(e=new Date(E[z]),+e<=+w?(b.push(h),+e==+w&&C.push(h)):C.push(h)):C.push(h));m.save().setGlobalAlpha(this.opt.s_line_a).setLineWidth(n).setLineJoin(q.round).setLineCap(q.round).setStrokeStyle(s).setFillStyle(s);1===
c&&this.opt.Ii?m.beginPath().pathCircle(h[0],h[1],4,4).fill():(b.length&&m.strokeDashed(b,t),C.length&&(h=C[0],m.beginPath(1).moveTo(h[0],h[1]),l.each(C,function(c,e){m.lineTo(e[0],e[1])}),m.stroke()));m.restore()}}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.KBAR=l.regInherit("KBar",__MTS.Chart,{ib:1,zIndex:100,da:function(b,c,e){c=this.j;var k=b[0].bd,h=b[0].aF,m=2>k?1:0,n=0<e?this.opt.color_kbar_up:this.opt.color_kbar_dn,s=0<e?this.opt.color_kbar_upin:this.opt.color_kbar_dnin;e=this.opt.s_line_a;var t=m?1:this.opt.s_kbar_a;c.save();if(!m)if(c.setGlobalAlpha(e).setStrokeStyle(n).setFillStyle(n).setLineWidth(1),20<k){c.beginPath();e=0;for(var l,q;e<b.length;e++)l=b[e],q=l.Se,c.pathRect(q-1,l.hd,q+1,l.Yi);c.fill()}else{c.beginPath(1);
for(e=0;e<b.length;e++)l=b[e],q=l.Se,c.pathLine(q,l.hd,q,l.Yi);c.stroke()}c.setGlobalAlpha(t).setFillStyle(m?n:s).beginPath(m?0:1);for(e=0;e<b.length;e++)l=b[e],q=l.Se+h,n=q+k,s=m?l.hd:l.Bl,l=m?l.Yi:l.Al,c.pathRect(q,s,n,l);c.fill();m||c.stroke();c.restore()},qa:function(b){var c=this.Jd(),e=-c/2,k=b.Ra,h=b.ra,m=[],n=[];1>=c&&(c=1,e=0);for(var s=0,t,l;s<b.labels.length;s++)t=k[0][s],l=h[0][s],t={time:b.labels[s],open:t,hG:k[1]?k[1][s]:t,mG:k[2]?k[2][s]:t,close:k[3]?k[3][s]:t,bd:c,aF:e,Se:b.wa[s],
Bl:l,hd:h[1]?h[1][s]:l,Yi:h[2]?h[2][s]:l,Al:h[3]?h[3][s]:l},t.close>t.open?m.push(t):n.push(t);n.length&&q.prototype.da.apply(this,[n,b,-1]);m.length&&q.prototype.da.apply(this,[m,b,1])}})});
__MTS.Util.go(function(u,p,l){__MTS.NPCROSS=l.regInherit("NPCross",__MTS.Chart,{ib:1,Mg:"sign",qa:function(l){for(var b=this.jb.fl(),c=l.wa,e=l.ra[0],k=this.opt.color_vol_up,h=this.opt.color_vol_dn,m=[],n=[],s=[],t=0,w,E;t<c.length;t++)d=b?b[t]:0,w=c[t],E=e[t],w=[w,E],0<d?m.push(w):0>d?n.push(w):s.push(w);b=__MTS.Cross.prototype.Wt;m.length&&b.apply(this,[m,l,k]);n.length&&b.apply(this,[n,l,h]);s.length&&b.apply(this,[s,l,h])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.NPDASHED=l.regInherit("NPDashed",__MTS.Chart,{opt:{Wb:0},pr:function(c){var e,b,h;c.length&&(e=c[0],b=e[0],h=e[1],b&&h&&b[0]==h[0]&&e.splice(0,1),e=c[c.length-1],b=e[e.length-1],h=e[e.length-2],b&&h&&b[0]==h[0]&&e.pop());return c},qa:function(c){var e=b.prototype.EA,k=b.prototype.pr,h=this.opt.Wb||0,m=__MTS.Area.prototype.Fn.apply(this,[c,h,h]),h=k(m[0]),k=k(m[1]);k.length&&e.apply(this,[k,c,-1]);h.length&&e.apply(this,[h,c,1])},EA:function(c,
e,b){var h=this.j,m=this.opt.s_dashLen||5;b=0<b?this.opt.color_vol_up:this.opt.color_vol_dn;e=this.Xh(e.M);h.save();h.setGlobalAlpha(this.opt.s_line_a).setStrokeStyle(b).setLineJoin(q.round).setLineCap(q.round).setLineWidth(e);for(e=0;e<c.length;e++)b=c[e],h.strokeDashed(b,m);h.restore()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.NPLINE=l.regInherit("NPLine",__MTS.Chart,{opt:{Wb:0},qa:function(c){var e=b.prototype.FA,k=__MTS.NPDashed.prototype.pr,h=this.opt.Wb||0,m=__MTS.Area.prototype.Fn.apply(this,[c,h,h]),h=k(m[0]),k=k(m[1]);k.length&&e.apply(this,[k,c,-1]);h.length&&e.apply(this,[h,c,1])},FA:function(c,e,b){var h=this.j;b=0<b?this.opt.color_vol_up:this.opt.color_vol_dn;e=this.Xh(e.M);h.save();h.setGlobalAlpha(this.opt.s_line_a).setStrokeStyle(b).setLineJoin(q.round).setLineCap(q.round).setLineWidth(e);
e=0;for(var m,n,s;e<c.length;e++){b=c[e];for(var t=s=0;t<b.length;t++)m=b[t],n=m[0],m=m[1],isNaN(n)||(s?h.lineTo(n,m):(s=1,h.beginPath().moveTo(n,m)));s&&h.stroke()}h.restore()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;__MTS.ROTATE=l.regInherit("Rotate",__MTS.Chart,{Ya:1,Ia:function(){var b=this.e;this.vo=this.Ha.opt.bh==q.U?l.map(this.b,function(c){return b.i(c)}):l.map(this.b,function(c,k){return b.i(k)});var c=this.wo=[];this.jb.Rc(function(e,k,h){e=l.map(e,function(c){return b.c(c)});c[h]||(c[h]=[]);c[h][k]=e});return this},Fr:function(){var b=this.e,c=this.Ha.opt.bh,e=this.b.length,k=b.wh,h=b.wc,m=b.hd(this.sf);c==q.U&&1===e&&(m=0.3*h.Ld);m>k?m=k:b.hd(1)<m&&
(m=b.hd(1));return m},qa:function(b){var c,e=this.j,k=b.wa,h=b.ra;b=this.sb(b.mc);e.save().setGlobalAlpha(this.opt.s_line_a).setStrokeStyle(b).setLineWidth(this.opt.s_lineW).beginPath(1);for(var m=0,n,s;m<k.length;m++)s=k[m],l.each(h,function(h,b){n=b[m];isNaN(n)||isNaN(s)||(c?e.lineTo(n,s):(c=1,e.moveTo(n,s)))});e.stroke().restore()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.HORZBAR=l.regInherit("HorzBar",__MTS.Rotate,{opt:{Wb:0,Hi:1},ib:1,zIndex:100,da:function(b,c,e,k){var h=this.j,m=this.d,n=c.mc%this.opt.color_line.length,s=k?k[n]:this.sb(n),t=k?p:this.sb(n,1);k=k?p:this.sb(n,2);var n=b[0].A,m=h.getCreateLinearGradient(0,n,0,0>e?m.x:m.getX2()),l=this.opt.Mv,q=this.opt.Nv;t&&k?(m.addColorStop(0,t),1>l&&m.addColorStop(l,t),0<q&&m.addColorStop(q,k),m.addColorStop(1,k)):m=s;__MTS.AniMath.esBegin(n,c.Ri,c.Qi);h.save().setGlobalAlpha(this.opt.s_bar_a).setFillStyle(m).beginPath();
for(c=0;c<b.length;c++)s=b[c],t=s.A,k=__MTS.AniMath.esoutT5(s.aa),1>Math.abs(k-t)&&(k+=0>e?-1:1),h.pathRect(t,s.t,k,s.ga);h.fill()},qa:function(b){var c;c=this.e;var e=this.jb.va(),k=b.M,h=c.rp(),m=this.Jd()/e,n=m*(k-e/2),s=b.Ra[0],t=b.wa,l=b.ra[0],e=this.opt.Au,E=this.kb,k=[],p=[],A=[],z=[];isNaN(h)&&(h=0);c=c.c(h);for(var C=0,F,D;C<b.labels.length;C++)D=t[C]+n,F=l[C],F={A:c,t:D,aa:F,ga:D+m},s[C]<h?C===E?A.push(F):k.push(F):C===E?z.push(F):p.push(F);h=q.prototype.da;k.length&&h.apply(this,[k,b,-1]);
p.length&&h.apply(this,[p,b,1]);A.length&&h.apply(this,[A,b,-1,e]);z.length&&h.apply(this,[z,b,1,e])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.HorzBar.prototype;__MTS.HORZBSBAR=l.regInherit("HorzBSBar",__MTS.HorzBar,{Qb:p,wg:p,Ne:p,Bh:p,qa:function(){var b=this,c,e,k,h,m=[],n=b.opt.s_bs_barW,s=b.e,t=b.j;l.each(b.wg,function(c,e){e.Ab=c;e.y=s.i(c);m.push(e)});if(1<m.length){m.sort(function(c,e){return c.Ab-e.Ab});for(var w=1,q;w<m.length;w++)q=Math.abs(m[w].y-m[w-1].y),q<n&&(n=q)}2>n&&(n=2);l.each(b.wg,function(m,t){k=s.i(m)-n/2;h=k+n;t.focus=0;l.each(t,function(m,l){c=s.c(l.ZE);e=s.c(l.Aq);l.A=c;
l.t=k;l.aa=e;l.ga=h;l.bd=n;l.idx==b.kb&&(t.focus=1)})});var p,A=__MTS.BSBar.prototype.Lo;t.save();l.each(b.wg,function(c,e){e.focus?p=e:A.apply(b,[e])});p&&A.apply(b,[p,1]);t.restore()},Md:function(b,c){this.Ne=b||[];this.Bh=c||[];return this},xa:function(){q.xa.apply(this,arguments);var b=this,c=0,e={},k={},h=b.jb.dd(0);l.each(b.b,function(m,n){var s;s=h[m];var t=e[n]||0;k[n]||(k[n]=[]);e[n]=e[n]?e[n]+s:s;s={idx:m,Ab:n,ob:s,ZE:t,Aq:e[n],sign:b.Ne[m],cr:b.Bh[m]};s.Aq>c&&(c=s.Aq);k[n].push(s)});b.wg=
k;b.Qb={min:0,max:c};return b},hb:function(){return this.Qb},MF:function(){return this.wg}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.HORZNPBAR=l.regInherit("HorzNPBar",__MTS.Rotate,{ib:1,zIndex:100,Ne:p,Md:function(b){this.Ne=b;return this},da:function(b,c,e){c=this.j;var k=0<e?this.opt.color_vol_upin:0>e?this.opt.color_vol_dnin:this.opt.color_vol_eqin,h=0<e?this.opt.color_vol_up:0>e?this.opt.color_vol_dn:this.opt.color_vol_eq;c.save().setGlobalAlpha(this.opt.s_bar_a).setLineWidth(1).setFillStyle(k).setStrokeStyle(h).beginPath(1);for(var k=0,m,n;k<b.length;k++)h=b[k],m=h.A,n=h.aa,1>Math.abs(n-
m)&&(n+=0<e?-1:1),c.pathRect(m,h.t,n,h.ga);c.fill().stroke()},qa:function(b){for(var c=this.d,e=this.jb.va(),k=b.M,h=this.Ne||[],m=c.x,n=this.Jd()/e,e=n*(k-e/2),k=b.wa,s=b.ra[0],t=[],l=[],E=[],p=0,A,z,C;p<b.labels.length;p++)z=k[p]+e,A=s[p],C=h[p]||0,A={A:m,t:z,aa:A,ga:z+n,sign:C},A.t<c.y||A.ga>c.getY2()||(0<C?l.push(A):0>C?t.push(A):E.push(A));E.length&&q.prototype.da.apply(this,[E,b,0]);t.length&&q.prototype.da.apply(this,[t,b,-1]);l.length&&q.prototype.da.apply(this,[l,b,1])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.HorzBar.prototype;__MTS.HORZSTACKBAR=l.regInherit("HorzStackBar",__MTS.HorzBar,{Ln:0,Lq:p,Mq:p,Qb:p,qa:function(b){var c,e=this.e,k=e.rp(),h=this.Jd(),m=-h/2,n=b.Ra[0],s=b.wa,t=b.ra[0],l=[],E=[],p=[];isNaN(k)&&(k=0);c=e.c(k);b.M||(this.Lq=[],this.Mq=[]);for(var A=this.Lq,z=this.Mq,e=this.opt.Au,C=this.kb,F=0,D,u,G,H;F<b.labels.length;F++)u=s[F]+m,D=t[F],G=Math.abs(D-c),H=n[F],D={A:c,t:u,aa:D,ga:u+h},b.M||(A[F]=0,z[F]=0),H<k?(D.A-=A[F],D.aa-=A[F],A[F]+=G,F===
C?p.push(D):l.push(D)):(D.A+=z[F],D.aa+=z[F],z[F]+=G,F===C?p.push(D):E.push(D));k=q.da;l.length&&k.apply(this,[l,b,1]);E.length&&k.apply(this,[E,b,1]);p.length&&k.apply(this,[p,b,1,e])},xa:function(){q.xa.apply(this,arguments);var b=0,c=0,e=[],k=[];this.jb.Rc(function(c){l.each(c,function(c,h){0<=h?e[c]=e[c]?e[c]+h:h:0>h&&(k[c]=k[c]?k[c]+h:h)})});l.each(e,function(e,b){b>c&&(c=b)});l.each(k,function(c,e){e<b&&(b=e)});this.Qb={min:b,max:c};return this},hb:function(){return this.Qb}})});
__MTS.Util.go(function(u,p,l){__MTS.SCATTER=l.regInherit("Scatter",__MTS.Chart,{opt:{Qe:"",wu:"",xu:"auto",ap:"dia tri rect cir star trapz".split(" "),bp:p},es:p,Rd:p,hE:function(l,b){this.es=l;this.Rd=!b||isNaN(b.qh)||isNaN(b.om)?p:b;return this},qa:function(q){var b=this,c,e=[],k=[],h=+b.opt.xu,m=b.j,n=b.Rd,s=b.es,t=b.opt.color_line,w=b.opt.ap,E=b.opt.bp||{},p=q.ra[0];if(isNaN(h)||0>=h)h=b.sy();m.save();n&&(n.x=b.e.c(n.qh),n.y=b.e.i(n.om),b.NA());l.each(q.wa,function(h,n){var m=s[h],l=p[h],q=+m.dlevel,
u=E[q]||{};m.CG=q;m.A=n;m.t=l;m.cr=u.cr||t[q%t.length];m.kh=u.kh||w[q%w.length];0==m.kh.indexOf("trail")&&k.push(m);h===b.kb?c=m:e.push(m)});e.sort(function(c,e){return e.dlevel-c.dlevel});l.each(e,function(c,e){b.Xt(e.kh,e.A,e.t,h,e.cr,e.dmark)});n&&b.OA();k.length&&(k.sort(function(c,e){return c.idx-e.idx}),b.PA(k));c&&(q=c,b.Xt(q.kh,q.A,q.t,h,q.cr,q.dmark));m.restore()},NA:function(){var l=this.Rd,b=this.d;this.j.setStrokeStyle(this.opt.color_gridBaseline).beginPath().moveTo(b.x,l.y).lineTo(b.getX2(),
l.y).moveTo(l.x,b.y).lineTo(l.x,b.getY2()).stroke()},OA:function(){var q,b,c,e=this.j,k=this.d,h=this.opt.s_fontSizeY,m=this.opt.color_txt,n=this.Rd;e.setFont(h);q=n.qh+this.opt.wu;b=n.x+2;c=k.getY2()-2;e.drawText(b,c,q,m);q=n.om+this.opt.Qe;b=l.getTextWidth(q,h);b=k.getX2()-2-b;c=n.y-2;e.drawText(b,c,q,m)},PA:function(q){var b=q[0],c=this.j;c.save().setStrokeStyle(b.cr).setLineWidth(this.opt.s_lineW).beginPath(1).moveTo(b.A,b.t);l.each(q,function(e,b){c.lineTo(b.A,b.t)});c.stroke().restore()},Xt:function(q,
b,c,e,k,h){var m,n=1,s=this.opt.s_font_dmark;m=Math.PI/180;var t=this.j;t.setStrokeStyle(k).setFillStyle(k).setFont(s).beginPath(1);switch(q){case "dia":e*=1.2;t.moveTo(b-e,c).lineTo(b,c-e).lineTo(b+e,c).lineTo(b,c+e).closePath();break;case "bubble":n=0;t.setGlobalAlpha(this.opt.s_symbol_bubble_a).moveTo(b+e,c).arc(b,c,e,0,2*Math.PI,!1).fill().setGlobalAlpha(1).beginPath(1).moveTo(b+e,c).arc(b,c,e,0,2*Math.PI,!1).stroke();break;case "trailline":break;case "trail":e*=0.4;case "cir":t.moveTo(b,c).arc(b,
c,e,0,2*Math.PI,!1);break;case "tri":e*=1.2;k=e*Math.sin(30*m);m=e*Math.cos(30*m);t.moveTo(b,c-e).lineTo(b-m,c+k).lineTo(b+m,c+k).closePath();break;case "star":e*=1.2;k=e*Math.sin(30*m);m=e*Math.cos(30*m);t.moveTo(b,c-e).lineTo(b-m,c+k).lineTo(b+m,c+k).closePath().stroke().fill().beginPath(1).moveTo(b,c+e).lineTo(b-m,c-k).lineTo(b+m,c-k).closePath();break;case "trapz":e*=0.7;m=1.1*e*Math.cos(30*m);t.moveTo(b-e,c-e).lineTo(b+e,c-e).lineTo(b+e+m,c+e).lineTo(b-e-m,c+e).closePath();break;case "dmark":n=
0;(h=l.isSNum(h)?h.toString():"")||(h="*");m=h?l.getTextWidth(h,s):s;h&&t.drawText(b-m/2,c+s/2,h,"#fff",k);break;default:e*=0.9,t.pathRect(b-e,c-e,b+e,c+e)}n&&t.fill().stroke()},sy:function(){var l=Math.round(this.d.w/100*1E4)/1E4;return 5<l?5:1>l?1:l}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;__MTS.STOCKLINE=l.regInherit("StockLine",__MTS.Chart,{qa:function(b){var c=-1,e=this.j,k=this.e,h=this.d,m=b.labels.length,n=b.ra,s=this.opt.s_lineW,t=k.Qg(),w=k.wc,E=this.sb(b.mc);l.isA(this.opt.Dc)&&this.opt.Dc.length>b.M&&1<=this.opt.Dc[b.M]&&(s=this.opt.Dc[b.M]);l.each(b.Ra[0],function(e,h){if(!isNaN(h)||e>=m)return c=e,!1});if(!(0>c)){var p=b.wa[c],A=n[0][c];e.save().setGlobalAlpha(this.opt.s_line_a).setLineWidth(s).setLineJoin(q.round).setLineCap(q.round).setStrokeStyle(E).beginPath(1);
t>=w.min&&t<=w.max?(A=k.i(t),e.moveTo(h.x+1,A).lineTo(p,A)):e.moveTo(p,A);for(var t=4===n.length?1:0,k=n[0],h=t?n[1]:n[0],s=t?n[2]:n[0],A=t?n[3]:n[0],z=NaN,C=NaN,F=NaN,D=NaN,u=c;u<m;u++){w=h[u];E=s[u];if(isNaN(z)||z<E)z=w;if(isNaN(C)||C>w)C=E}F=C;D=z;for(u=c;u<m;u++)n=b.wa[u],t=k[u],w=h[u],E=s[u],p=A[u],u==m-1&&(F=C,D=z),w<F?E>D?e.lineTo(n,t).moveTo(n,w).lineTo(n,E).moveTo(n,p):e.lineTo(n,w):E>D?e.lineTo(n,E):isNaN(p)||e.lineTo(n,p),C>w&&(C=w-1),z<E&&(z=E+1),F=w,D=E;e.stroke();e.restore()}}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Chart.prototype,b=__MTS.SYMBOLLINE=__MTS.BOXLINE=l.regInherit("SymbolLine",__MTS.Chart,{opt:{Ii:0,vB:0},ib:1,qa:function(c){var e=this.opt.vB||0;q.Vt.apply(this,[c,0]);b.prototype.GA.apply(this,[c,e])},GA:function(c,e){var k=c.labels.length,h=c.Ra.length-1,m=c.Ra[h].ma,n=this.sb(c.mc);if(!isNaN(m)){var k=Math.ceil(__MTS.AniMath.esBegin(0,c.Ri,c.Qi).esoutT4(k)),s=b.prototype,t=0.14*this.Jd(),k=[m,k,n,t,c.wa,c.ra[h]];1>t||(2==e?s.JA.apply(this,k):e?s.HA.apply(this,
k):s.IA.apply(this,k))}},IA:function(c,e,b,h,m,n){var s=this.j;s.save().setFillStyle(b).beginPath();for(var t;c<e;c++)b=m[c],t=n[c],isNaN(t)||s.moveTo(b,t).pathCircle(b,t,h,h);s.fill();s.restore()},HA:function(c,e,b,h,m,n){var s=this.j;s.save().setFillStyle(b).beginPath();for(var t;c<e;c++)b=m[c],t=n[c],isNaN(t)||s.moveTo(b-h,t-h).pathRect(b-h,t-h,b+h,t+h);s.fill();s.restore()},JA:function(c,e,b,h,m,n){var s=this.j;h*=1.2;s.save().setFillStyle(b).beginPath();for(var t;c<e;c++)b=m[c],t=n[c],isNaN(t)||
s.moveTo(b,t-h).lineTo(b-h,t).lineTo(b,t+h).lineTo(b+h,t).closePath();s.fill();s.restore()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.VOLUME=l.regInherit("Volume",__MTS.Chart,{opt:{Wb:0},ib:1,Mg:"sign",zIndex:101,da:function(b,c,e){var k=this.j,h=Math.abs(b[0].aa-b[0].A);c=this.opt.s_vbar_a;var m=2>=h?1:0,n=m&&1<h?0.5:0,h=0<e?this.opt.color_vol_up:0>e?this.opt.color_vol_dn:this.opt.color_vol_eq;e=0<e?this.opt.color_vol_upin:0>e?this.opt.color_vol_dnin:this.opt.color_vol_eqin;m&&0==n&&(e=h);k.save();k.setGlobalAlpha(c).setFillStyle(e).beginPath();l.each(b,function(c,e){k.pathRect(e.A-n,e.t,
e.aa+n,e.ga)});k.fill();m||(k.setGlobalAlpha(c).setStrokeStyle(h).beginPath(1),l.each(b,function(c,e){k.pathRect(e.A,e.t,e.aa,e.ga)}),k.stroke());k.restore()},qa:function(b){for(var c=this.Jd(),e=-c/2,k=this.jb.fl(),h=b.wa,m=b.ra[0],n=+this.opt.Wb,n=isNaN(n)?this.d.getY2():this.e.i(n),s=[],t=[],l=[],E=0,p,A;E<b.labels.length;E++)p=k?k[E]:0,A={A:h[E]+e,t:m[E],ga:n},A.aa=A.A+c,A.t==A.ga&&(A.t-=0.5),0<p?s.push(A):0>p?l.push(A):t.push(A);t.length&&q.prototype.da.apply(this,[t,b,0]);l.length&&q.prototype.da.apply(this,
[l,b,-1]);s.length&&q.prototype.da.apply(this,[s,b,1])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant.Dq,b=Math.pow(10,-1*q);l.regInherit("Position",__MTS.OptClass,{main:function(c){__MTS.OptClass.apply(this,[c]);this.Mc={fd:0,Ld:0,min:0,max:0,Lb:NaN};this.wc={fd:0,Ld:0,min:0,max:0,Lb:NaN};this.zg={fd:0,Ld:0,min:1,max:1,Lb:NaN};this.Le={Dp:NaN,Ap:NaN,Ep:NaN,Bp:NaN};this.wh=this.opt.s_bar_maxWidth},opt:{Iv:1,vD:NaN,yD:NaN,wD:NaN,Up:0,Tp:0,zD:NaN,xD:NaN,Gv:0,Vp:NaN,Fl:NaN,El:NaN,jd:0,Tc:0,Xp:NaN,Wp:NaN,Hv:0,Sp:0,Zg:0,Dl:0,Cl:0,xG:1,wG:0,"":""},d:p,
ab:p,ve:p,Mc:p,wc:p,zg:p,Le:p,fs:0,hs:0,fu:0,gs:0,js:0,gu:0,Yj:0,Ei:1E-4,wh:0,setOption:function(c){this.opt=l.applyIf(this.opt,c);return this},la:function(c){this.d=c;return this},Ve:function(c,e,b){this.ab=this.dg(c,e,b,1);return this},Qf:function(c,e,b){this.ve=this.dg(c,e,b,-1);return this},lE:function(c){this.Yj=c?1:0},SD:function(c){this.fs=c;return this},TD:function(c){this.gs=c;return this},XD:function(c){this.hs=c;return this},YD:function(c){this.js=c;return this},gh:function(c,e){var b=
this.d;this.wr(c,e,b.x,b.w,1);var h=this.J(b.x),b=this.J(b.getX2());this.Le.Dp=h<b?h:b;this.Le.Ap=h>b?h:b;return this},Pf:function(c,e){var b=this.d;this.wr(c,e,b.getY2(),b.h,-1);var h=this.D(b.y),b=this.D(b.getY2());this.Le.Ep=h<b?h:b;this.Le.Bp=h>b?h:b;h=this.wc;this.zg={min:this.log(h.min),max:this.log(h.max),Ld:h.Ld,fd:h.fd,Lb:this.Gn(h.Ld,this.log(h.max),this.log(h.min))};return this},eG:function(){return this.ab},gG:function(){return this.ve},Qg:function(){return this.ve?this.ve.ea:NaN},rp:function(){return this.ab?
this.ab.ea:NaN},getGapX:function(){return this.fu},DF:function(){return this.gu},CF:function(){return this.wh},QF:function(){return this.Mc},RF:function(){return this.wc},OF:function(){return this.zg},PF:function(){return this.Le},c:function(c){return this.n(c)},i:function(c){return this.Yj?this.ct(c):this.o(c)},oe:function(c){return this.Mz(c)},hd:function(c){return this.Yj?this.Lz(c):this.Kz(c)},J:function(c){return this.WA(c)},D:function(c){return this.Yj?this.$t(c):this.XA(c)},Rp:function(c){return this.ct(c)},
FG:function(c){return this.$t(c)},log:function(c){return c<=b?-1*q:l.round(Math.log(c)/Math.log(10),q)},exp:function(c){return l.round(Math.exp(c*Math.log(10)),q)},Gn:function(c,e,b){e=Math.abs(e-b);0==e&&(e=2*this.Ei);return c/e},WA:function(c){var e=this.Mc,b=e.min,h=this.opt.Gv?-1:1;b==e.max&&(b-=this.Ei);return b+h*(c-e.fd)/e.Lb},XA:function(c){var e=this.wc,b=e.min,h=this.opt.Hv?1:-1;b==e.max&&(b-=this.Ei);return b+h*(c-e.fd)/e.Lb},n:function(c){if(!this.Mc)return NaN;var e=this.Mc,b=e.min,h=
this.opt.Gv?-1:1;b==e.max&&(b-=this.Ei);return e.fd+h*(c-b)*e.Lb},o:function(c){if(!this.wc)return NaN;var e=this.wc,b=e.min,h=this.opt.Hv?1:-1;b==e.max&&(b-=this.Ei);return e.fd+h*(c-b)*e.Lb},Mz:function(c){return c*this.Mc.Lb},Kz:function(c){return c*this.wc.Lb},$t:function(c){var e=this.zg;return this.exp(e.min-(c-e.fd)/e.Lb)},ct:function(c){var e=this.zg;return e.fd-(this.log(c)-e.min)*e.Lb},Lz:function(c){return this.log(c)*this.zg.Lb},fy:function(c,e,b){var h;h=0<b?this.d.w:this.d.h;var m=0<
b?this.opt.Sp:this.opt.Cl,n=0<b?this.opt.Zg:this.opt.Dl,s=0<b?this.opt.Up:this.opt.jd;b=0<b?this.opt.Tp:this.opt.Tc;if(0<s||0<b)h=h-m-n-s-b,0<h&&(h=this.Gn(h,e,c),c-=l.round(s/h,4),e+=l.round(b/h,4));return{min:c,max:e}},dg:function(c,e,b,h){c={min:Math.min(c,e),max:Math.max(c,e),ea:NaN};e=0<h?this.opt.yD:this.opt.Fl;var m=0<h?this.opt.wD:this.opt.El,n=0<h?this.opt.vD:this.opt.Vp;isNaN(+b)||(n=+b);c.ea=n;if(this.opt.Iv){if(isNaN(c.min)||n<c.min)c.min=n;if(isNaN(c.max)||n>c.max)c.max=n}e&&0<e.toString().indexOf("%")&&
(e=l.flt(e)/100*c.min);m&&0<m.toString().indexOf("%")&&(m=l.flt(m)/100*c.max);e<c.min&&(c.min=e);m>c.max&&(c.max=m);c.jp=c.min;c.$k=c.max;b=this.fy(c.min,c.max,h);c.min=0<=c.min&&0>b.min?0:b.min;c.max=0>=c.max&&0<b.max?0:b.max;return c},wr:function(c,e,b,h,m){var n=0<m?this.Mc:this.wc,s=0<m?this.ab:this.ve,t=0<m?this.opt.zD:this.opt.Xp,w=0<m?this.opt.xD:this.opt.Wp,q=0<m?this.fs:this.gs,p=0<m?this.hs:this.js,A=0<m?this.opt.Sp:this.opt.Cl,z=0<m?this.opt.Zg:this.opt.Dl;n.min=l.isNum(c)?c:s.min;n.max=
l.isNum(e)?e:s.max;n.min<t&&(n.min=t);n.max>w&&(n.max=w);c=0;e=n.max-n.min;s=this.wh;q&&0<e&&(e=p?2*e+2:1.4*e+2,!p&&10>e&&(e=10),c=l.round(h/e));!p&&c>s&&(c=s);0<m?this.fu=c:this.gu=c;n.fd=b+m*(A+c);n.Ld=h-A-z-2*c;n.Lb=this.Gn(n.Ld,n.max,n.min)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.OptClass.prototype,c=q.Dq;l.regInherit("Scale",__MTS.OptClass,{main:function(c){__MTS.OptClass.apply(this,[c]);this.Ma=__MTS.ScaleMethod;this.Ag=this.Ma.Gl([1,2,5]);this.Af=this.Ma.Yp([1,2,5],[1,2,2.5,5]);this.Yf=__MTS.ScaleMethod.Yp([1,2,5],[1,2,3,4,5,6,7,8,9],-4,-1,13)},opt:{Yb:"",bh:q.U,aq:0,$p:0,$i:-1,kd:-1,Jl:p,cq:0,bq:0,Of:p,dh:0,Ov:0,Qv:0,Kl:0,Rv:1,Pv:1,bj:1,aj:1,Sv:0,Tv:0,Vv:0,Uv:1,ld:"","":""},e:p,Ma:p,b:p,Ag:p,Af:p,Yf:p,vb:NaN,xc:NaN,
Ib:p,ub:p,yy:0,zy:0,ks:0,WF:function(){return this.vb},XF:function(){return this.xc},SF:function(){return this.Ib},TF:function(){return this.ub},xF:function(){return this.opt.Yb},yF:function(){return this.opt.bh},setOption:function(){b.setOption.apply(this,arguments);l.isA(this.opt.Jl)&&(this.Yf=__MTS.ScaleMethod.Yp([1,2,5],this.opt.Jl,-4,-1,13));return this},rE:function(c){this.ks=c;return this},ya:function(c){this.e=c;c.lE(this.opt.dh);return this},la:function(c){this.d=c;return this},fa:function(c){this.b=
c;return this},Tl:function(c,b){var h=this.opt.Yb;l.isA(b)&&b.length&&(this.Ag=b);0<=this.opt.$i?this.qA():h==q.Nl||h==q.oq||h==q.Yl?this.pA(h):this.oA(c,this.Ag);this.yy=c;return this},Ul:function(c,b,h){l.isA(b)&&b.length&&(this.Af=b);0<=this.opt.kd?(h&&(this.Yf=h),this.sA(c,this.Yf)):this.rA(c,this.Af);this.zy=c;return this},Pl:function(){if(this.opt.Yb!==q.U)return this;var c,b,h=this.e,m=this.vb,n=this.opt.Sv,s=this.e.ab;s.min==s.max?this.vb=0:this.opt.Yb==q.U&&(this.opt.Rv&&(c=l.round(Math.floor(s.min/
m)*m,6))&&h.oe(Math.abs(c-s.min))<n&&(c-=m),this.opt.Pv&&(b=l.round(Math.ceil(s.max/m)*m,6))&&h.oe(Math.abs(b-s.max))<n&&(b+=m));this.e.gh(c,b);return this},Ql:function(){var c=0,b=0,h,m,n=this.e,s=this.e.ve,t=this.xc,w=this.e.Qg();m=0<=this.opt.kd?1:0;h=this.opt.bj;var q=this.opt.aj,p=this.opt.aq&&!isNaN(s.ea)&&!m,A=this.opt.$p,z=this.Ma.Pu(s.ea,t),C=this.opt.Tv,F=s.min,D=s.max;if(s.min==s.max)return 0==s.min?this.xc=D=1:this.ks?(this.opt.Kl&&(t=this.xc=this.opt.Kl),F=D=l.round(s.min/t)*t,F-=t,D+=
t):(t=this.xc=this.Ma.dC(this.Af,Math.abs(s.min)),0>s.max?(D=0,F=2*-t):(F=0,D=2*t),0===this.opt.kd&&(this.xc=2*t)),this.e.Pf(F,D),this;if(this.opt.dh&&this.opt.Ov)F=l.round(n.exp(Math.floor(n.log(s.min))),6),D=l.round(n.exp(Math.ceil(n.log(s.max))),6);else if(this.opt.Of&&1<this.opt.Of.length)h=this.opt.Of,isNaN(h[0])||isNaN(h[h.length-1])||(F=h[0],D=h[h.length-1],F>D&&(h=F,F=D,D=h));else{if(h||p)if(p){for(h=A?z:w;h>s.min&&0<t&&1E3>c;)h-=t,c++;F=h}else isNaN(s.ea)||s.ea!=s.min?(F=l.round(Math.floor(s.min/
t)*t,6),this.opt.Vv&&0===s.min&&0!==this.opt.kd&&(F=-t),!m&&F&&n.hd(Math.abs(F-s.min))<C&&(F-=t)):F=s.ea;if(q||p)if(p){for(h=A?z:w;h<s.max&&0<t&&1E3>b;)h+=t,b++;D=h}else D=l.round(Math.ceil(s.max/t)*t,6),this.opt.Uv&&0===s.max&&0!==this.opt.kd&&(D=t),!m&&D&&n.hd(Math.abs(D-s.max))<C&&(D+=t);0<=this.opt.kd||p&&c!=b&&(c>b?D+=t*(c-b):F-=t*(b-c))}this.e.Pf(F,D);return this},Rl:function(){var c=this,b;b=c.d?c.d.w:0;var h=c.e.Mc,m=c.e.Le,n=c.vb,s=c.opt.Yb,t={min:h.min,max:h.max};s==q.U?(m.Dp<h.min&&(t.min+=
Math.ceil((m.Dp-h.min)/n)*n),m.Ap>h.max&&(t.max+=Math.floor((m.Ap-h.max)/n)*n),c.jA(t)):0<=c.opt.$i?c.Ct(t):s==q.Nl||s==q.BG||s==q.oq?24>n?(c.hA(t),b&&50>b/c.Ib.length&&(c.vb=24,c.Dt(t))):720>n?168==n?c.mA(t):c.Dt(t):8640>n?(c.Et(t),b&&50>b/c.Ib.length&&(b=n/24/30,b=1===b?3:3===b?6:12,c.vb=720*b,12>b?c.Et(t):c.Ft(t))):c.Ft(t):s==q.Yl?c.kA(t):s==q.sw?c.iA(t):s==q.pq?c.lA(t):c.Ct(t);l.each(c.Ib,function(h,b){b.cr=c.opt.color_txt_x;b.bg="";b.step=n;b.dataType=s;b.txt||(b.txt=b.val);c.Ib[h]=c.triggerEvent("dele_ScaleLabelX",
[b])||b});return c},Sl:function(){var c=this,b=c.e.wc,h=c.e.Le,m=c.opt.dh,n=c.xc,s={min:b.min,max:b.max};m||(h.Ep<b.min&&(s.min+=Math.ceil((h.Ep-b.min)/n)*n),h.Bp>b.max&&(s.max+=Math.floor((h.Bp-b.max)/n)*n));m&&c.opt.Ov?c.gA(s):c.opt.Of?c.cA():0<=c.opt.kd?c.$z(s):c.nA(s);l.each(c.ub,function(h,b){b.cr=c.opt.color_txt_y;b.bg="";b.step=n;b.txt||(b.txt=b.val);c.ub[h]=c.triggerEvent("dele_ScaleLabelY",[b])||b});return c},Mf:function(c,b,h){return this.addEvent("dele_ScaleLabelX",c,b,h)},me:function(c,
b,h){return this.addEvent("dele_ScaleLabelY",c,b,h)},oA:function(c,b){var h;h=this.e.Mc;h.min==h.max?this.vb=0:(h=this.Ma.Rg(b,h.Lb,c,this.opt.Qv),this.vb=-1==h?0:b[h])},pA:function(c){var b,h=this.Ma;b=this.b;var m=b.length,n=b[0],s=b[m-1];if(!s)for(m-=2;0<m;m--)if(b[m]){s=b[m];break}b=Math.abs(new Date(s)-new Date(n));c=c==q.oq?h.WE:c==q.Yl?h.VE:h.UE;for(var m=0,t;m<c.length&&(t=c[m],!0!==t.valid)&&(!(b<=t.valid)||t.pattern&&!l[t.pattern](n));m++);this.vb=t.step},rA:function(c,b){var h;h=this.e.wc;
h.min==h.max?((h=Math.floor(Math.abs(h.min)/10))||(h=1),h=this.Ma.Rg(b,1,h)):2==this.b.length?(h=0.6*(h.max-h.min),h=this.Ma.Rg(b,1,h)):(this.opt.bh==q.sa&&(c=1*h.Lb),h=this.Ma.Rg(b,h.Lb,c,this.opt.Kl));this.xc=-1==h?0:b[h]},sA:function(c,b){var h,m=this.e.wc,n=this.opt.kd,s=m.max,t=m.min,w=Math.abs(s-t),w=w/(n+1);if(this.opt.cq)this.xc=w;else{h=this.Ma.Rg(b,1,w,w);if(1<h&&1<n){var q=b[h-1],p=b[h],A=l.round(Math.floor(m.min/q)*q,6),m=l.round(Math.floor(m.min/p)*p,6);A+q*(n+2)>s&&m+p*n>s&&h--}this.xc=
m=-1==h?w:b[h];0===n&&(0>s?s=l.round(Math.ceil(s/m)*m,6):t=l.round(Math.floor(t/m)*m,6),w=Math.abs(s-t),w/=n+1,-1<h&&w>m&&(h=this.Ma.Rg(b,1,w,w),this.xc=b[h]))}},qA:function(){var c=this.e.Mc,c=Math.abs(c.max-c.min)/(this.opt.$i+1);this.opt.bq||(c=l.ceil(c));this.vb=c},Ct:function(c){var b=this.e,h,m=0,n=this.b,s=this.vb,t=[];1>s&&(s=1);t.push({type:q.min,pos:b.c(c.min),val:n[c.min]});if(c.max>c.min){for(h=l.round(c.min+s);h<c.max&&0<s&&1E3>m;)t.push({type:"",pos:b.c(h),val:n[h]}),h=l.round(h+s,4),
m++;t.push({type:q.max,pos:b.c(c.max),val:n[c.max]})}this.Ib=t},jA:function(c){var b=this.e,h,m,n=0,s=this.e.rp(),t=this.vb,w=[];w.push({type:q.min,pos:b.c(c.min),val:c.min});if(c.max>c.min){for(h=l.round(c.min+t);h<c.max&&0<t&&1E3>n;)m=h===s?"base":"",w.push({type:m,pos:b.c(h),val:h}),h=l.round(h+t,4),n++;w.push({type:q.max,pos:b.c(c.max),val:c.max})}this.Ib=w},Ft:function(c){var b=this.e,h=0,m=this.b,n=this.vb/24/30/12,s=[];s.push({type:q.min,pos:b.c(c.min),val:m[c.min]});if(c.max>c.min){for(var t=
1,l,E;t<c.max&&m[t];t++)l=new Date(m[t]),E=new Date(m[t-1]),l=l.getFullYear(),l!==E.getFullYear()&&(h++,0==h%n&&s.push({type:"",pos:b.c(t),val:m[t]}));m[c.max]&&s.push({type:q.max,pos:b.c(c.max),val:m[c.max]})}this.Ma.EE(s,this.opt.ld);this.Ib=s},Et:function(c){var b=this.e,h=this.b,m=this.vb/24/30,n=[];n.push({type:q.min,pos:b.c(c.min),val:h[c.min]});if(c.max>c.min){for(var s=1,t,l,E;s<c.max&&h[s];s++)t=new Date(h[s]),l=new Date(h[s-1]),E=t.getMonth(),l.getFullYear()!==t.getFullYear()?n.push({type:"",
pos:b.c(s),val:h[s]}):E!==l.getMonth()&&0===E%m&&n.push({type:"",pos:b.c(s),val:h[s]});h[c.max]&&n.push({type:q.max,pos:b.c(c.max),val:h[c.max]})}this.Ma.BE(n,this.opt.ld);this.Ib=n},mA:function(c){var b=this.e,h=this.b,m=[];m.push({type:q.min,pos:b.c(c.min),val:h[c.min]});if(c.max>c.min){for(var n=1,s,t;n<c.max&&h[n];n++)s=new Date(h[n]),t=new Date(h[n-1]),t.getFullYear()!==s.getFullYear()?m.push({type:"",pos:b.c(n),val:h[n]}):s.getDay()<=t.getDay()&&s.getDate()!=t.getDate()&&m.push({type:"",pos:b.c(n),
val:h[n]});h[c.max]&&m.push({type:q.max,pos:b.c(c.max),val:h[c.max]})}this.Ma.ow(m,this.opt.ld);this.Ib=m},Dt:function(c){var b=this.e,h=this.b,m=this.vb/24,n=[];n.push({type:q.min,pos:b.c(c.min),val:h[c.min]});if(c.max>c.min){for(var s=1,t,l,E,p;s<c.max&&h[s];s++)t=new Date(h[s]),l=new Date(h[s-1]),E=t.getDate(),p=l.getDate(),l.getFullYear()!==t.getFullYear()||l.getMonth()!==t.getMonth()?n.push({type:"",pos:b.c(s),val:h[s]}):E!==p&&(1===m||30>E&&Math.floor(E/m)!==Math.floor(p/m))&&n.push({type:"",
pos:b.c(s),val:h[s]});h[c.max]&&n.push({type:q.max,pos:b.c(c.max),val:h[c.max]})}this.Ma.ow(n,this.opt.ld);this.Ib=n},hA:function(c){var b=this.e,h=this.b,m=[];m.push({type:q.min,pos:b.c(c.min),val:h[c.min]});if(c.max>c.min){for(var n=1,s,t;n<c.max&&h[n];n++)s=new Date(h[n]),t=new Date(h[n-1]),t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()&&t.getHours()===s.getHours()||m.push({type:"",pos:b.c(n),val:h[n]});h[c.max]&&m.push({type:q.max,pos:b.c(c.max),val:h[c.max]})}this.Ma.zE(m,
this.opt.ld);this.Ib=m},kA:function(c){var b=this.e,h=0,m=0,n=this.b,s=this.vb,t=[];t.push({type:q.min,pos:b.c(c.min),val:n[c.min]});if(c.max>c.min){for(var l=1,E,p;l<c.max&&n[l];l++)E=n[l].substr(0,4),p=n[l-1].substr(0,4),m++,E!=p?(h++,m=0,(4>=s||0==h%(s/4))&&t.push({type:"",pos:b.c(l),val:n[l]})):2===s&&2==m?(p=n[l+1].substr(0,4),E==p&&t.push({type:"",pos:b.c(l),val:n[l]})):1===s&&t.push({type:"",pos:b.c(l),val:n[l]});n[c.max]&&t.push({type:q.max,pos:b.c(c.max),val:n[c.max]})}this.Ma.CE(t);this.Ib=
t},iA:function(c){var b=this.e,h=this.b,m=[];m.push({type:q.min,pos:b.c(c.min),val:h[c.min]});if(c.max>c.min){for(var n=1,s,t;n<c.max&&h[n];n++)s=h[n].split(":"),t=h[n-1].split(":"),2!=s.length||+s[0]===+t[0]||+s[1]||m.push({type:"",pos:b.c(n),val:h[n]});h[c.max]&&m.push({type:q.max,pos:b.c(c.max),val:h[c.max]})}this.Ma.AE(m);this.Ib=m},lA:function(c){var b=this.e,h=1,m=this.b,h=this.vb,n=m[c.min].split(":"),s=m[c.max].split(":"),s=60*(+s[0]-n[0])+(+s[1]-n[1]),n=[];10<s?h=10:5<s&&(h=5);n.push({type:q.min,
pos:b.c(c.min),val:m[c.min]});if(c.max>c.min){for(var s=1,t,l;s<c.max&&m[s];s++)t=m[s].split(":"),l=m[s-1].split(":"),3!=t.length||+t[0]===+l[0]&&+t[1]===l[1]||0!=+t[1]%h||n.push({type:"",pos:b.c(s),val:m[s]});m[c.max]&&n.push({type:q.max,pos:b.c(c.max),val:m[c.max]})}this.Ma.DE(n);this.Ib=n},gA:function(b){var k=[],h,m,n=0,s=this.e;h=c-1;var t=l.round(b.min,h);h=l.round(b.max,h);b=s.log(t);m=s.log(h);k.push({type:q.max,pos:s.Rp(h),val:h});for(m-=1;m>b&&10>n;)n++,h=s.exp(m),k.push({type:"",pos:s.Rp(h),
val:h}),m-=1;k.push({type:q.min,pos:s.Rp(t),val:t});this.ub=k},nA:function(b){var k=this,h=[],m,n=0,s=0,t=k.e,w=k.xc,E=(m=k.opt.dh)?c-1:4,p=l.round(b.min,E);b=l.round(b.max,E);var E=k.e.Qg(),A=isNaN(E)?0:1,z=k.opt.$p;m&&(0>p&&(p=0),0>b&&(b=0));isNaN(E)&&(E=l.round(Math.ceil(p/w)*w,6));var C=k.Ma.Pu(E,w);m=z?C:E;z=z?C:E;m<=E&&(m+=w);z>=E&&(z-=w);(k.opt.aj||0==b%w)&&h.push({type:q.max,pos:t.i(b),val:b});for(m=l.round(m,4);m<b&&0<w&&1E3>s;)h.push({type:q.top,pos:t.i(m),val:m}),m=l.round(m+w,4),s++;(k.opt.bj||
0==p%w)&&h.push({type:q.min,pos:t.i(p),val:p});if(E>p)for(h.push({type:A?q.ea:q.bottom,pos:t.i(E),val:E}),m=l.round(z,4);m>p&&0<w&&1E3>n;)h.push({type:q.bottom,pos:t.i(m),val:m}),m=l.round(m-w,4),n++;h.sort(function(c,b){return+b.val-c.val});k.opt.bh!==q.U&&l.each(h,function(c,b){b.val=k.b[b.val]});k.ub=h},$z:function(c){var b=[],h,m=0,n,s=this.e,t=this.xc;h=l.round(c.min,4);c=l.round(c.max,4);var w=this.e.Qg();isNaN(w)&&0>h&&0<c&&(w=0);b.push({type:q.max,pos:s.i(c),val:c});isNaN(w)||b.push({type:q.ea,
pos:s.i(w),val:w});b.push({type:q.min,pos:s.i(h),val:h});for(h=l.round(h+t,4);h<c&&0<t&&1E3>m;)n=h<w?q.bottom:q.top,b.push({type:n,pos:s.i(h),val:h}),h=l.round(h+t,4),m++;b.sort(function(c,b){return+b.val-c.val});this.ub=b},cA:function(){var c=[],b=this.e,h=this.opt.Of;this.ub=c;if(h.length){h.sort(function(c,b){return b-c});for(var m=0,n,s;m<h.length;m++)n=h[m],s=0==m?q.max:m==h.length-1?q.min:0<n?q.top:0>n?q.bottom:q.ea,c.push({type:s,pos:b.i(n),val:n})}}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.ScaleMethod={Pu:function(b,c){if(isNaN(b))return NaN;var e=b/c,k=Math.ceil(e)*c,e=Math.floor(e)*c;return Math.abs(e-b)<Math.abs(k-b)?e:k},Gl:function(b,c,e){isNaN(+c)&&(c=-4);isNaN(+e)&&(e=13);for(var k=[],h,m=c,n;m<=e;m++)for(n=Math.pow(10,m),c=0;c<b.length;c++)h=l.round(b[c]*n,0>m?1-m:1),k.push(h);return k},Yp:function(b,c,e,k,h){isNaN(+e)&&(e=-4);isNaN(+k)&&(k=0);isNaN(+h)&&(h=13);b=q.Gl(b,e,k);c=q.Gl(c,k+1,h);return b.concat(c)},Rg:function(b,c,e,k){if(isNaN(k)||
0>k)k=0;for(var h=0,m;h<b.length&&!(m=b[h],m*c>=e&&m>=k);h++);h===b.length&&(h=-1);return h},dC:function(b,c){for(var e=0,k;e<b.length;e++)if(k=b[e],c<k){e&&(k=b[e-1]);break}return k},UE:[{step:1,valid:216E6,pattern:"isFullDate"},{step:24,valid:864E6},{step:24,valid:2592E6,pattern:"isFullDate"},{step:168,valid:2592E6},{step:240,valid:5184E6},{step:720,valid:47304E6},{step:2160,valid:94608E6},{step:4320,valid:15768E7},{step:8640,valid:31536E7},{step:17280,valid:!0}],WE:[{step:1,valid:1296E5,pattern:"isFullDate"},
{step:24,valid:864E6},{step:240,valid:7776E6},{step:720,valid:189216E6},{step:2160,valid:63072E6},{step:4320,valid:94608E6},{step:8640,valid:31536E7},{step:17280,valid:!0}],VE:[{step:1,valid:7884E7},{step:2,valid:15768E7},{step:4,valid:31536E7},{step:8,valid:!0}],Px:function(b){var c="";b=b.replace("YYYY","#").replace("MM","#").replace("DD","#");b=b.split("#");l.each(b,function(b,k){if(k)return c=k,!1});return c},Og:function(b,c){var e=q.Px(b),k=c.split("/"),h=[];if(!e)return b;l.each(b.split(e),
function(c,b){var e=-1;l.each(k,function(c,h){if(b==h)return e=c,!1});-1<e&&h.push(b)});return h.join(e)},EE:function(b,c){if(0!==b.length){c||(c="YYYY/MM");var e,k=new Date(b[0].val);-1<c.indexOf("D")&&(c=q.Og(c,"YYYY/MM"));b[0].txt=l.fmtSDate(c,k);for(e=1;e<b.length;e++)k=new Date(b[e].val),b[e].txt=k.getFullYear(),e==b.length-1&&(b[e].txt=l.fmtSDate(c,k))}},BE:function(b,c){if(0!==b.length){c||(c="YYYY/MM/DD");var e,k=new Date(b[0].val);b[0].txt=l.fmtSDate(c,k);for(e=1;e<b.length;e++){var h=new Date(b[e-
1].val),k=new Date(b[e].val);h.getFullYear()!==k.getFullYear()?(b[e].txt=l.fmtSDate(q.Og(c,"YYYY/MM"),k),b[e].Xu=k.getFullYear()):-1<c.indexOf("M")?(b[e].txt=l.fmtMM(k),-1<c.indexOf("D")&&e===b.length-1&&h.getMonth()===k.getMonth()&&(b[e].txt=l.fmtSDate(q.Og(c,"MM/DD"),k))):b[e].type="off"}}},ow:function(b,c){if(0!==b.length){var e,k=new Date(b[0].val);k.getHours()||k.getMinutes()?(c||(c="YYYY/MM/DD hh:mm"),b[0].txt=l.fmtSFullDate(c,k)):(c||(c="YYYY/MM/DD"),b[0].txt=l.fmtSDate(c,k));for(e=1;e<b.length;e++){var h=
new Date(b[e-1].val),k=new Date(b[e].val);h.getFullYear()!==k.getFullYear()||h.getMonth()!==k.getMonth()?(b[e].txt=l.fmtSDate(q.Og(c,"MM/DD"),k),b[e].Xu=l.fmtMM(k)):b[e].txt=e===b.length-1&&(k.getHours()||k.getMinutes())?l.fmtSFullDate(q.Og(c,"MM/DD hh:mm"),k):l.fmtSDate(q.Og(c,"MM/DD"),k)}}},zE:function(b,c){if(0!==b.length){c||(c="MM/DD hh:mm");var e,k=new Date(b[0].val);b[0].txt=l.fmtSFullDate(c,k);for(e=1;e<b.length;e++){var h=new Date(b[e-1].val),k=new Date(b[e].val);h.getFullYear()!==k.getFullYear()||
h.getMonth()!==k.getMonth()||h.getDate()!==k.getDate()?(b[e].txt=l.fmtSFullDate(c,k),b[e].Xu=l.fmtDD(k)):b[e].txt=l.fmtHour(k)}}},AE:function(b){if(0!==b.length)for(var c=0,e;c<b.length;c++)e=b[c],e.txt=e.val},DE:function(b){if(b.length)for(var c=0,e;c<b.length;c++)e=b[c],e.txt=e.val},CE:function(b){if(0!==b.length){var c,e;for(c=0;c<b.length;c++){var k=b[c],h=k.val,m=h.length,n=h.substr(0,4);n!==e&&"on"==k.type?e=n:n==e&&"on"==k.type&&(k.txt=h.substr(m-2,2))}}},"":""}});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template;l.regInherit("FgTxt",__MTS.BaseClass,{main:function(){__MTS.BaseClass.apply(this);this.xg={};this.Hm={}},xg:p,P:p,d:p,$f:p,Gh:p,Hm:p,init:function(c){this.$f=l.getJqElm(c);this.$f.find(".mts-fgTxt-rng").length||this.$f.html('<div class="mts-fgTxt-rng"></div>');this.Gh=this.$f.find(".mts-fgTxt-rng");return this},qe:function(c){this.P&&this.he();this.P=c;return this},zc:function(){this.Wf();return this},setSize:function(c){this.Gh.css(q.width,
c);return this},mw:function(c,e,k,h){var m="fg"+c,n=this.Ui(c);k=this.Rr(k);e||(e="");h||(h="mts-txt");n.length?(n.html(e),k&&n.attr("style",k)):this.Gh.append(b.Nb(e,h,k,{id:m}));this.xg[c]=m;return this},Hl:function(c){var b=this.xg[c];b&&(this.$f.find("#"+b).remove(),this.xg[c]=p);return this},Wk:function(){var c=this;l.each(c.xg,function(b){c.Hl(b)});c.xg={};return c},Vl:function(c,b,k,h){l.isStr(b)&&(b=[{txt:b}]);b=this.Er(c,b,h);return this.mw(c,b,k,"mts-txtNode")},ju:function(c,b,k,h){l.isStr(k)&&
(k=[{txt:k}]);c=this.Ui(c);b=this.Er(b,k,h);c.length&&c.append(b);return this},sl:function(c,b){return this.addEvent("onFgCheckBox",c,b)},Lp:function(c,b){return this.addEvent("onFgRmBox",c,b)},UC:function(c,b){return this.addEvent("onFgBoxEnd",c,b)},Kp:function(c,b){return this.addEvent("onFgDragDown",c,b)},destroy:function(){this.he();this.Wk();__MTS.BaseClass.prototype.destroy.apply(this,arguments)},Ui:function(c){return this.$f.find("#fg"+c)},NF:function(){return this.Gh},Er:function(c,e,k){var h=
this,m=[];l.isA(k)?k.push("mts-txtNode-ul"):k=k?["mts-txtNode-ul",k]:["mts-txtNode-ul"];l.each(e,function(e,k){var t=h.Rr(k),l=["mts-txtNode-li"],q=[c,e].join("-");k.checkbox?k.txt=b.md(b.JB(k.checkbox.val,k.checkbox.on)+k.txt,"mts-txtNode-boxLI"):k.Lv&&(k.txt=b.md(b.LB(k.Lv.val)+k.txt,"mts-txtNode-boxLI"));k.Hu&&(k.txt+=b.KB(k.Hu.val));k.txt&&m.push(b.md(k.txt,l,t,{keyLI:q}));h.Hm[q]=k});return m.length?b.md(m.join(""),k.join(" ")):""},Rr:function(c){var b=[];if(!c)return"";c.x&&b.push("left:"+c.x+
"px");c.y&&b.push("top:"+c.y+"px");c.cr&&b.push("color:"+c.cr);c.bg&&b.push("background-color:"+c.bg);c.font&&b.push("font-size:"+c.font+"px");c.family&&b.push("font-family:"+c.family);c.bold&&b.push("font-weight:bold");c.italic&&b.push("font-style:italic");c.underline&&b.push("text-decoration:underline");0<c.Ro&&1>c.Ro&&(l.isIE(8)?b.push("filter:alpha(opacity="+100*c.Ro+")"):b.push("opacity:"+c.Ro));return b.join(";")},ec:0,Zh:0,Wf:function(){this.ec||(this.ec=1,this.P.$g("fgTxt",{start:this.Fe,
end:this.Vc},this))},he:function(){this.ec=0;this.P.jj("fgTxt")},Fe:function(c){var b,k=l.getJqTargetUpByCss(c,"mts-txtNode-boxLI",4),h=k?p:l.getJqTargetUpByCss(c,"mts-fgDragDown",3);if(k||h)b=(k||h).parent(),b=b.attr("keyLI"),b=this.Hm[b];k?(h=k.find(".mts-fgCheckBox"),k=k.find(".mts-fgRmBox"),h.length?this.Fz(h,b,c):k.length&&this.Hz(k,b,c)):h&&this.Gz(h,b,c)},Fz:function(c,b,k){var h=c.attr("val"),m=0<+c.attr("on")?0:1;this.Zh=1;c.attr("on",m);m?c.find(">div").addClass("mts-boxOn"):c.find(">div").removeClass();
this.triggerEvent("onFgCheckBox",[h,m,b,k])},Hz:function(c,b,k){c=c.attr("val");this.Zh=1;this.triggerEvent("onFgRmBox",[c,b,k])},Gz:function(c,b,k){c=c.attr("val");this.Zh=1;this.triggerEvent("onFgDragDown",[c,b,k])},Vc:function(){this.Zh&&this.triggerEvent("onFgBoxEnd");this.Zh=0}})});
__MTS.Util.go(function(u,p,l){l.regInherit("LegendMgr",__MTS.BaseClass,{main:function(){__MTS.BaseClass.apply(this);this.clear()},yg:p,Uc:p,clear:function(){var q=this;l.each(q.Uc,function(b){q.yB(b)});q.yg={};q.Uc=[]},yB:function(q){var b=this.Uc[q],c=this.yg[q];b&&(l.clearObj(b),l.clearObj(c),this.Uc[q]=p,this.yg[q]=p);return this},gq:function(l,b,c){var e=this.Uc[l];e?(e.x=b,e.y=c):(this.Uc[l]={x:b,y:c,label:"",Oe:[]},this.yg[l]={});return this},iq:function(l,b){var c=this.Uc[l];c&&(c.label=b);
return this},So:function(l,b){var c=this.Uc[l],e=this.yg[l];c&&b&&(c.Oe.push(b),b.IC&&(e[b.IC]=b));return this},HE:function(l,b){var c=this.Uc[l];c&&c.Oe&&c.Oe.sort(b);return this},UB:function(l){var b=this.Uc;return 0<=l?b[l]:b},bG:function(l,b){var c=this.yg[l];return c?c[b]:p},Pg:function(q,b){l.each(this.Uc,function(c,e){return q.apply(b,[c,e])});return this},destroy:function(){this.clear();__MTS.BaseClass.prototype.destroy.apply(this,arguments)}})});
__MTS.Util.go(function(u,p,l){l.regInherit("PanelMgr",__MTS.BaseClass,{main:function(){__MTS.BaseClass.apply(this);this.Re()},Va:p,Re:function(){this.Qa(function(q,b){b.pos.destroy();b.scale.destroy();l.clearObj(b)});this.Va=[];return this},Fg:function(l){l={Ka:new __MTS.Panel,oc:new __MTS.Panel,pos:new __MTS.Position(l),scale:new __MTS.Scale(l),cd:[]};this.Va.push(l);return this},Kg:function(){this.Qa(function(l,b){b.cd=[]});return this},wb:function(l,b){var c=this.Va[l];c&&c.cd.push(b);return this},
destroy:function(){this.Kg();this.Re();__MTS.BaseClass.prototype.destroy.apply(this,arguments)},Ja:function(l){l||(l=0);return this.Va[l]},cC:function(){return this.Va?this.Va.length:0},aC:function(l,b,c){b||(b=0);c||(c=0);l=this.Va[l];var e=[];if(l&&l.cd&&l.cd.length){if("last"==b||b>=l.cd.length)b=l.cd.length-1,0>b&&(b=0);b=l.cd[b].Kf();if("last"==c||c>=b.va())c=b.va()-1,0>c&&(c=0);e=b.Ec(c)||[]}return e},Qa:function(q,b){l.each(this.Va,function(c,e){return q.apply(b,[c,e,e.cd])});return this},
Iu:function(l,b,c,e){this.jr(l,b,c,e);return this},jr:function(q,b,c,e){var k;b.cd&&l.each(b.cd,function(h,m){return k=c.apply(e,[h,m,b,q])});return k},kp:function(q,b){var c=this;l.each(c.Va,function(e,k){return c.jr(e,k,q,b)});return c},"":""})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.regClass("Sensor",{main:function(){this.N=new __MTS.EventMgr},Z:0,bb:p,d:p,N:p,rb:p,init:function(b){this.Lg();this.bb=l.getJqElm(b);this.N.init(b);return this},$g:function(b,c,e){var k=l.isTouch,h=this.N;c.wheel&&(this.qd(b,"wheel",c.wheel,e),h.reg("",q.HC,this.px,this));c.start&&(this.qd(b,"start",c.start,e),h.reg("",k?q.Ew:q.Vg,this.jn,this));if(c.move||c.hover)c.move&&this.qd(b,"move",c.move,e),c.hover&&this.qd(b,"hover",c.hover,e),h.reg("",
k?q.Dw:q.ol,this.sx,this);c.end&&(this.qd(b,"end",c.end,e),h.reg("",k?q.vq:q.Vi,this.mx,this));c.gEnd&&(this.qd(b,"gEnd",c.gEnd,e),h.reg("global",k?q.vq:q.Vi,this.hn,this));c.leave&&(this.qd(b,"leave",c.leave,e),h.reg("",q.mouseleave,this.qx,this));c.out&&(this.qd(b,"out",c.out,e),h.reg("",q.GC,this.rx,this));c.dbclick&&(this.qd(b,"dbclick",c.dbclick,e),h.reg("",q.BB,this.lx,this));c.keydown&&(this.bb.attr("tabIndex",0),this.qd(b,"keydown",c.keydown,e),h.reg("",q.keydown,this.ox,this));return this},
jj:function(b){l.each(this.rb,function(c,e){e[b]&&(e[b]=p)});return this},Lg:function(){var b=this;b.N.clear();l.each(b.rb,function(c,e){l.each(e,function(c,b){b&&(b.fn=p,b.Tg=p);e[c]=p});b.rb[c]=p});b.rb={};return b},resize:function(b){if(this.d&&this.d.isEq(b))return this;b&&(this.d=b);this.d.w&&this.d.h&&this.bb.css({width:this.d.w,height:this.d.h});return this},destroy:function(){this.isDestroy||(this.Lg(),l.clearObj(this),this.isDestroy=1)},qd:function(b,c,e,k){b||(b="");if(c&&l.isF(e)){var h=
this.rb;h[c]||(h[c]={});h[c][b]={fn:e,Tg:k}}},$c:function(b,c){var e=this.rb;e&&e[b]&&(c||(c=[]),l.each(e[b],function(b,h){h&&h.fn.apply(h.Tg,c)}))},px:function(b){var c=b.originalEvent;0<c.wheelDelta||0>c.CB?this.$c("wheel",[b,1]):(0>c.wheelDelta||0<c.CB)&&this.$c("wheel",[b,-1])},jn:function(b){var c=l.getTouchEvent(b);this.Z=1;l.isIE()&&this.bb.focus();this.$c("start",[b,c])},sx:function(b){var c=l.getTouchEvent(b);this.Z?this.$c("move",[b,c]):this.$c("hover",[b,c])},mx:function(b){var c=l.getTouchEvent(b);
this.Z=0;this.$c("end",[b,c])},hn:function(b){var c=l.getTouchEvent(b);this.Z=0;this.$c("gEnd",[b,c])},rx:function(b){this.$c("out",[b])},qx:function(b){this.$c("leave",[b])},lx:function(b){this.$c("dbclick",[b])},ox:function(b){b.preventDefault();b.stopPropagation();this.$c("keydown",[b])}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.OptClass.prototype;l.regInherit("Slider",__MTS.OptClass,{main:function(c){__MTS.OptClass.apply(this,[c]);this.N=new __MTS.EventMgr;this.Sb={lv:NaN,zp:NaN,Cp:NaN,zC:NaN,Fc:NaN,Sc:NaN};this.si={lj:NaN,mm:NaN}},Ud:p,Zm:p,$m:p,uc:p,Ce:p,af:p,Cd:p,ge:p,N:p,e:p,d:p,Sb:p,si:p,b:p,Uw:0,Z:0,Fj:0,Gj:0,cn:0,dn:NaN,en:NaN,bn:0,Ly:2,Ky:6,init:function(c){c=this.Ud=l.getJqElm(c);this.uc=c.find(".mts-sld-block");this.$m=c.find(".mts-sld-rngR");this.Zm=c.find(".mts-sld-rngL");
this.af=c.find(".mts-sld-arrowR");this.Ce=c.find(".mts-sld-arrowL");this.Cd=c.find(".mts-sld-msgL");this.ge=c.find(".mts-sld-msgR");this.N.init(c);return this},ya:function(c){var b=c.ab;this.e=c;this.Sb.Cp=b.min;this.Sb.zC=b.max;return this},la:function(c){this.d=c;return this},fa:function(c){this.b=c;return this},qE:function(c,b){var k=this.Sb;b&&(k.zp=b);c&&(k.lv=c);return this},uw:function(c,b){this.Sb.Fc=c;this.Sb.Sc=b;return this},Ok:function(){this.si.lj=this.Dn();this.si.mm=this.En();this.Uw=
this.Ce.width();this.bx();this.Yt();this.Xw();return this},move:function(){var c=this.Sb,b=this.Dn(c.Fc),k=this.En(c.Sc);this.dr(b,k);this.triggerEvent("SliderMove",[c.Fc,c.Sc]);return this},Wl:function(){this.Cd.show();this.ge.show();return this},il:function(){this.Cd.hide();this.ge.hide();return this},tl:function(c,b){return this.addEvent("SliderMove",c,b)},aD:function(c,b){return this.addEvent("onSliderStart",c,b)},$C:function(c,b){return this.addEvent("onSliderEnd",c,b)},Gp:function(c,b){return this.addEvent("SliderValid",
c,b)},destroy:function(){this.Yt();this.N.destroy();b.destroy.apply(this,arguments)},QB:function(){var c=this.xn(this.Sb.Fc,this.Sb.Sc);return 0<c?c:-1},xn:function(c,b){return b-c+1},cy:function(c,b){return c-b+1},gF:function(c,b){return c+b+1},Dn:function(c){return this.e.c(c)},En:function(c){return this.e.c(c)},Zr:function(c){return this.e.oe(1<c?c-1:0.1)},gy:function(c){return l.round(this.e.J(c))},hy:function(c){return l.round(this.e.J(c))},lF:function(){},Zw:function(c){return c&&3>=c?1:0},
bx:function(){var c,b=this.d;this.Ud.find(">div").css({top:b.y,height:b.h});c=l["int"](this.Cd.css(q.NB))||12;12>c&&(c=12);this.Ud.find(">span").css(q.top,b.y-c-this.Ky)},dr:function(c,b,k){var h,m,n,s=this.Sb,t=this.si,l=this.d,p=l.getX2();h=this.bn;c=c||t.lj;b=b||t.mm;n=this.Zw(k);k=this.Zr(s.lv);m=n?this.Zr(h):k;if(Math.abs(c-b)<k||c>b)c==t.lj?b=c+k:c=b-k;c<l.x?c=l.x:c>p-m&&(c=p-m);b>p?b=p:b<l.x+m&&(b=l.x+m);k=this.gy(c);m=this.hy(b);n&&0<h&&(n=this.xn(k,m),n!=h&&(k=this.cy(m,h)));if(h=this.triggerEvent("SliderValid",
[k,m]))h.Fc>=s.Cp&&(k=h.Fc,c=this.Dn(k)),h.Sc>s.Cp&&(m=h.Sc,b=this.En(m));s.Fc=k;s.Sc=m;this.uc.css({left:c,width:b-c});this.Zm.css({left:l.x,width:c-l.x});this.$m.css({left:b,width:p-b});this.Ce.css(q.left,c);this.af.css(q.left,b);c<=l.x?this.Ce.addClass("arrowEnd"):this.Ce.hasClass("arrowEnd")&&this.Ce.removeClass("arrowEnd");b>=p?this.af.addClass("arrowEnd"):this.af.hasClass("arrowEnd")&&this.af.removeClass("arrowEnd");this.Cd.html(this.vr(k));this.ge.html(this.vr(m));l=this.Ly;s=this.Cd.width()+
2*l;l=this.ge.width()+2*l;p=b-c<s+l?1:0;this.Cd.css(q.left,p?c-s:c);this.ge.css(q.left,p?b:b-l);p?(this.Cd.addClass("arrowEnd"),this.ge.addClass("arrowEnd")):(this.Cd.hasClass("arrowEnd")&&this.Cd.removeClass("arrowEnd"),this.ge.hasClass("arrowEnd")&&this.ge.removeClass("arrowEnd"));t.lj=c;t.mm=b},vr:function(c){var b=this.b,k=b[c]||"";if(!k)for(c-=1;0<c;c--)if(b[c]){k=b[c];break}b=k.split("/");3==b.length&&(k=b.slice(1).join("/"));return k},Yt:function(){this.N.clear()},Xw:function(){var c=l.isTouch;
this.N.reg("",c?q.Ew:q.Vg,this.jn,this).reg("global",c?q.Dw:q.ol,this.nx,this).reg("global",c?q.vq:q.Vi,this.hn,this)},qy:function(c){var b=0,k=0;if(!c)return k;var h=u(c.target);for(c=c.currentTarget;h[0]!==c&&h.parent()[0]!==c&&10>b;)h=h.parent(),b++;b=h[0];this.uc[0]==b?k=1:this.Zm[0]==b?k=2:this.$m[0]==b?k=3:this.Ce[0]==b?k=4:this.af[0]==b&&(k=5);return k},jn:function(c){var b=this.si,k=l.getTouchEvent(c),h=l.getTouchEvent(c,1);c=this.qy(c);this.Z=1;this.Gj=l.getPageOffset(k,this.Ud[0]).X;this.dn=
b.lj;this.en=b.mm;this.bn=this.xn(this.Sb.Fc,this.Sb.Sc);h&&(c=6,this.cn=l.getPageOffset(h,this.Ud[0]).X);4==c?this.Ce.addClass("arrowOn"):5==c&&this.af.addClass("arrowOn");u("html").addClass("unselectable");this.Wl();this.Fj=c;this.triggerEvent("onSliderStart")},nx:function(c){if(this.Z){var b=l.getTouchEvent(c),k=l.getTouchEvent(c,1),b=l.getPageOffset(b,this.Ud[0]).X,h=this.dn,m=this.en,n=b-this.Gj,s=this.Fj;if(s){c.preventDefault();c.stopPropagation();if(1===s||2==s||3==s)h+=n,m+=n;else if(4==
s)h+=n;else if(5==s)m+=n;else if(k&&6==s)var k=l.getPageOffset(k,this.Ud[0]).X,t=k-this.cn,h=h+(b<k?n:t),m=m+(b<k?t:n);this.dr(h,m,s);l.isIE(8)||__MTS.Config.Chart.s_sliderPreventDefault||this.ir(c)}}},ir:function(){var c=this.Sb;this.triggerEvent("SliderMove",[c.Fc,c.Sc])},hn:function(c){var b=l.getTouchEvent(c),k=this.Sb.Fc,h=this.Sb.Sc,b=l.getPageOffset(b,this.Ud[0]).X-this.Gj,m=this.Fj;this.Z&&(l.isIE(8)||__MTS.Config.Chart.s_sliderPreventDefault?this.ir(c):2!=m&&3!=m||b||(2==m?(k--,h--):3==m&&
(k++,h++),this.uw(k,h).move()));this.Z&&(u("html").removeClass("unselectable"),this.il(),this.triggerEvent("onSliderEnd"),this.Ud.find(".arrowOn").removeClass("arrowOn"));this.cn=this.Gj=this.Z=0;this.en=this.dn=NaN;this.Fj=this.bn=0},"":""})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template,c=__MTS.OptClass.prototype;l.regInherit("SliderView",__MTS.OptClass,{main:function(c){__MTS.OptClass.apply(this,[c]);this.N=new __MTS.EventMgr;this.G=new __MTS.Panel;this.d=new __MTS.Panel;this.ce=new __MTS.APen;this.e=new __MTS.Position;this.Ha=new __MTS.Scale({Yb:"sdate",bj:0,aj:0});this.Nc=new __MTS.Slider;this.pb=new __MTS.Area;this.vt();this.addEvent("-",this.Eb)},opt:{pd:5,te:2,Xe:16,nh:16,oh:30,ph:30,Gw:p},f:p,Td:p,N:p,G:p,
d:p,ce:p,e:p,Ha:p,Nc:p,pb:p,b:p,Jc:p,lf:0,setOption:function(){c.setOption.apply(this,arguments);this.pb&&(this.vt(),this.ht());return this},init:function(c){this.f=l.getJqElm(c);this.N.init(c);this.ce.init(this.f.find(".mts-chartBg"));this.Nc.init(this.f.find(".mts-slider"));this.f.removeClass("XOnly");this.Td=this.f.find(".mts-sldView-cmd");this.ht();return this},setSize:function(c,b){var h=this.opt,m=this.Td.width(),m=l.round((c-m)/2);this.Td.css(q.left,m);this.G.set(0,0,c,b);this.d.set(h.Xe,h.pd,
c-h.Xe-h.nh,b-h.pd-h.te);this.ce.setSize(c,b);this.f.css(q.display,0<b?q.Fd:q.mb);return this},setData:function(c,b){this.b=c;this.Jc=b;return this},re:function(c,b){this.Nc.uw(c,b);return this},vE:function(c,b){this.Nc.qE(c,b);return this},Ia:function(){var c=this.b,b=this.Jc,h=b.hb(),m=this.e,n=this.d,s=this.G;this.lf=0;m.la(n).Ve(0,c.length-1).gh().Qf(h.min,h.max).Pf();this.Ha.ya(m).la(n).fa(c).Tl(this.opt.oh).Pl().Rl().Ul(this.opt.ph).Ql().Sl();this.pb.ya(m,this.Ha).la(n,s).fh(this.ce,this.ce).fa(c).xa(b).Ia();
this.Nc.ya(m).la(n).fa(c).Ok().move().tl(this.Xs,this).aD(this.zz,this).$C(this.xz,this);this.lf=1;return this},draw:function(){this.lf&&(this.ce.clearAll().fillPanel(this.G,this.opt.color_bg).fillPanel(this.d,this.opt.color_fg),this.pb.If().Jb());return this},pl:function(){this.lf&&this.Nc.move();return this},Wl:function(){var c=this.b;c&&c.length>=this.opt.s_slider_limit&&this.Nc.Wl();return this},il:function(){this.Nc.il();return this},hide:function(){this.f.hide();return this},show:function(){this.f.show();
return this},gl:function(){return 50},getSliderSize:function(){return this.Nc.QB()},tl:function(c,b){return this.addEvent("onSliderMove",c,b)},Gp:function(c,b){this.Nc.Gp(c,b);return this},ZC:function(c,b){return this.addEvent("onSliderCmd",c,b)},Eb:function(){this.N.destroy();this.ce.destroy();this.e.destroy();this.Ha.destroy();this.Nc.destroy();this.pb.destroy()},Xs:function(c,b){this.lf&&this.triggerEvent("onSliderMove",[c,b])},zz:function(){var c=this.Td;c&&!c.hasClass("stopCmd")&&c.addClass("stopCmd")},
xz:function(){var c=this.Td;c&&c.hasClass("stopCmd")&&c.removeClass("stopCmd")},vt:function(){var c={};l.ext(c,this.opt,{s_border:[0,0,1,0],Oc:0,Gi:1,gb:0,tB:q.bottom,color_line:this.opt.color_slider,color_gdn1:this.opt.color_slider_gdn1,color_gdn2:this.opt.color_slider_gdn2});this.pb.setOption(c)},ht:function(){var c=[],k=[];l.each(this.opt.Gw||[],function(h,m){l.isO(m)&&(m.txt||m.cssIcon)&&m.val&&(k.push(m.val),c.push(b.GE(m.val,m.txt,m.cssIcon)))});this.Td.attr("val")!==k.join(",")&&(this.Td.empty().attr("val",
k.join(",")),c.length&&this.Td.html(c.join("")));this.N.reg(".mts-sldv-btncmd","start",this.Fx,this)},Fx:function(c){var b=u(c.currentTarget).attr("val");this.triggerEvent("onSliderCmd",[b,c])}})});
__MTS.Util.go(function(u,p,l){u=__MTS.SliderView;var q=u.prototype;l.regInherit("XOnlyView",u,{opt:{pd:0,te:0,lm:0},Kq:{0:25,1:10},yc:0,rh:10,init:function(){q.init.apply(this,arguments);this.f.addClass("XOnly");return this},setSize:function(b,c){var e=this.opt,k=this.Td.width();k&&(b-=k+2);this.G.set(0,0,b,c);this.d.set(e.Xe,e.pd,b-e.Xe-e.nh,c-e.pd-e.te);this.ce.setSize(b,c);this.f&&(k&&75>b?this.f.addClass("mts-sld-hide"):this.f.removeClass("mts-sld-hide"));return this},Ia:function(){var b,c;b=
this.opt.lm;c=this.b;var e=this.e,k=this.d;this.lf=0;e.la(k).Ve(0,c.length-1).gh().Qf(0,1).Pf();this.Nc.ya(e).la(k).fa(c).Ok().move().tl(this.Xs,this);c=+this.f.attr("XStyle");b!=c&&this.f.removeClass("XStyle"+c).addClass("XStyle"+b).attr("XStyle",b);this.yc=l.round((this.d.h-this.rh)/2);this.f.find(".mts-sld-innerBlock").css({top:this.yc,height:this.rh});b=this.Kq[b]||this.Kq[0];this.f.find(".mts-sld-arrowL,.mts-sld-arrowR").css({top:this.yc-l.round((b-this.rh)/2),height:b});this.lf=1;return this},
draw:function(){var b=this.d,c=this.ce;c.save().clearAll().fillPanel(this.G,this.opt.color_bg);c.setFillStyle(this.opt.color_sldbg).beginPath().pathRoundRect(b.x,this.yc,b.w,this.rh,this.rh/2).fill();return this},gl:function(){return 1===this.opt.lm?20:25}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.regInherit("Tip",__MTS.OptClass,{main:function(b){__MTS.OptClass.apply(this,[b]);this.Zc=new __MTS.TimerMove},opt:{rq:1,sq:1,lh:1,em:1,fm:q.right,Sa:0,Nd:0,qq:0,tq:30,uq:30},ud:p,Hh:p,Cj:p,Dj:p,cf:p,De:p,Bj:p,Vd:p,d:p,G:p,e:p,P:p,Qd:p,Zc:p,ek:p,br:"",My:2,Os:3,ec:0,Z:0,ai:0,bi:0,F:0,Zj:0,On:0,bk:0,pf:0,Rn:0,mf:0,Gq:"left",Hq:"bottom",init:function(b,c){var e=this.ud=l.getJqElm(b);e.find(".mts-tip-rng").length||this.ud.html('<div class="mts-tip-rng"><div class="mts-tip-lineX"></div><div class="mts-tip-lineY"></div><div class="mts-tip-msgX"></div><div class="mts-tip-msgY"></div><div class="mts-tip-focus"><div></div></div></div>');
this.Hh=e.find(".mts-tip-rng");this.Cj=e.find(".mts-tip-lineX");this.Dj=e.find(".mts-tip-lineY");this.cf=e.find(".mts-tip-msgX");this.De=e.find(".mts-tip-msgY");this.Bj=e.find(".mts-tip-focus");this.Vd=c?l.getJqElm(c):p;this.br=this.ud.attr("class")||"";return this},la:function(b,c){this.d=b;this.G=c;return this},ya:function(b){this.e=b;return this},qe:function(b){this.P&&this.he();this.P=b;return this},Gu:function(b,c,e){var k;k=this.Vd;if(!k)return this;e||(e=[]);b=b.apply(c,[k[0],this.opt.Sa].concat(e));
this.mf=(k=k.html())?1:0;this.bu(k,b);return this},fj:function(b,c){var e=this.Vd;if(!e)return this;b||(b="");this.mf=b?1:0;this.bu(b,c);e.html()!==b&&e.html(b);return this},lw:function(b,c){b&&(this.Gq=b);c&&(this.Hq=c);return this},nv:function(b,c){this.er(b,c);return this},hq:function(b){this.opt.qq=b?1:0;return this},zc:function(){this.Wf();return this},Sg:function(b,c,e){if(this.Zj&&(e!=q.qc||3<this.Zj))return this;e||(e=q.Aw);this.YA(b,c,e);return this},hide:function(){this.as();this.F=1;return this},
show:function(){this.xA();this.F&&this.ii(this.Qd);this.F=0;return this},addClass:function(b){this.ud.addClass(b);return this},removeClass:function(b){this.ud.removeClass(b);return this},xB:function(){this.ud.attr("class",this.br);return this},$A:function(b){this.bi=b?1:0;return this},hj:function(b){this.On=b?1:0;return this},jh:function(b){this.bk=b?1:0;return this},setSize:function(){this.Bk();return this},resize:function(){var b=this.Qd;this.d&&(this.Bk(),b&&(b=this.eo(b.c,b.i,b.J,b.D,q.Bw),this.ii(b)));
return this},destroy:function(){this.P&&this.he();this.Zc.destroy();__MTS.OptClass.prototype.destroy.apply(this,arguments)},iG:function(){return this.F},jG:function(){return this.opt.Sa},kG:function(){return this.bk},wF:function(){return this.Qd},PE:function(b,c){this.Fe(b,c);return this},OE:function(b,c){this.dc(b,c);return this},NE:function(b,c){this.Vc(b,c);return this},onDele_TipTmplMove:function(b,c,e){return this.addEvent("DeleTipTmplMove",b,c,e)},ne:function(b,c,e){return this.addEvent("DeleTipKeydown",
b,c,e)},Ip:function(b,c){return this.addEvent("DeleTipOverflowY",b,c)},Kd:function(b,c,e){return this.addEvent("DeleTipMove",b,c,e)},Qp:function(b,c){return this.addEvent("onTipMoveReady",b,c)},TC:function(b,c){return this.addEvent("onEvtStart",b,c)},SC:function(b,c){return this.addEvent("onEvtMove",b,c)},RC:function(b,c){return this.addEvent("onEvtEnd",b,c)},vv:function(b,c){return this.addEvent("onEvtHover",b,c)},Jp:function(b,c){return this.addEvent("onEvtOut",b,c)},fD:function(b,c){return this.addEvent("onEvtLongPress",
b,c)},cD:function(b,c){return this.addEvent("TipDbClick",b,c)},wv:function(b,c){return this.addEvent("TipWheel",b,c)},bu:function(b,c){b?this.Rn&&!this.bi||!b||(this.pf=this.F?0:1):(this.pf=0,this.Vd.hide());isNaN(c)||(this.pf=c?1:0)},YA:function(b,c,e){var k,h,m=this.opt.Nd&&!this.ai?1:0,n=this.e;n&&(k=n.c(b),h=n.i(c));m&&this.hide();b=this.eo(k,h,b,c,e);m||this.ii(b)},tk:function(b,c){this.ii(this.ee(b,c))},ee:function(b,c){var e,k,h=l.getPageOffset(b,this.ud),m=h.X,h=h.Y,n=this.d,s=this.e;m>n.getX2()?
m=n.getX2():m<n.x&&(m=n.x);h>n.getY2()?h=n.getY2():h<n.y&&(h=n.y);s&&(e=l.round(s.J(m),8),k=l.round(s.D(h),8));return this.eo(m,h,e,k,c||q.ij)},Ms:function(b,c){this.Zj++;b=this.hasTriggerEvent("DeleTipMove",[b,c],b);this.Zj=0;return b},eo:function(b,c,e,k,h){return this.Ms({c:b,i:c,J:e,D:k,Ta:e,Za:k},h)},ii:function(b){if(b){var c,e,k,h=this.d,m=this.G,n=this.Os;this.Qd=b;isNaN(b.c)?(this.Cj.hide(),this.cf.hide()):(c=b.c,this.opt.rq&&this.Cj.css({left:c,display:q.Fd}),this.opt.lh&&b.Ta?(this.cf.html(b.Ta),
k=this.cf.width(),c>h.getX2()-k&&(c=h.getX2()-k),this.cf.css({left:c,display:q.Fd})):this.cf.hide());isNaN(b.i)?(this.Dj.hide(),this.De.hide()):(e=b.i,this.opt.sq&&this.Dj.css({top:e,display:q.Fd}),this.opt.em&&b.Za?(this.De.html(b.Za),c=this.De.height(),e>h.getY2()-c&&(e=h.getY2()-c),k=this.De.width()+4,c=this.opt.fm==q.left?h.x-k-n:h.getX2()+n,c=c<m.x?m.x:c+k>m.getX2()?m.getX2()-k:c,this.De.css({top:e,left:c,display:q.Fd})):this.De.hide());c=b.c;e=b.i;this.opt.qq?this.ax(c,e):this.Bj.hide();this.er(c,
e);this.triggerEvent("onTipMoveReady")}},ax:function(b,c){isNaN(b)||isNaN(c)?this.Bj.hide():this.Bj.css({top:c,left:b,display:q.Fd})},Rw:function(b,c){var e=this.d,k=e.getX2(),h=this.opt.tq,m=this.Gq,n=b;m==q.qu&&(c/=2);n=m==q.right?n+h:b-h-c>e.x?n-(c+h):n+h;n+c>k?n=k-c:n<e.x&&(n=e.x);return n},Sw:function(b,c){var e=this.d,k=e.getY2(),h=this.opt.uq,m=this.Hq,n=b;m==q.kv&&(c/=2);n=m==q.bottom?n+h:b-h-c>e.y?n-(c+h):n+h;n+c>k&&(n=this.hasEvent("DeleTipOverflowY")?this.triggerEvent("DeleTipOverflowY",
[b,h,c]):k-c);n<e.y&&(n=e.y);return n},er:function(b,c){var e,k,h=this.Vd;h&&(isNaN(b)||isNaN(c)||!this.mf?h.css(q.display)!=q.mb&&h.hide():(h.css(q.display)==q.mb&&h.show(),e=h.outerWidth(),k=h.outerHeight(),b=this.Rw(b,e),c=this.Sw(c,k),e={top:c,left:b,display:this.pf?q.Fd:q.mb},(e=this.hasTriggerEvent("DeleTipTmplMove",[e],e))&&h.css(e)))},xA:function(){var b=this.Vd;this.Hh.css(q.display)===q.mb&&this.Hh.show();b&&this.mf&&b.css(q.display)===q.mb&&b.show()},as:function(){var b=this.Vd;this.Hh.css(q.display)!==
q.mb&&this.Hh.hide();b&&b.css(q.display)!==q.mb&&b.hide()},Bk:function(){var b=this.d;this.Cj.css({top:b.y,height:b.h});this.Dj.css({left:b.x,width:b.w});this.cf.css(q.top,b.getY2()+this.My);this.De.css(q.left,b.getX2()+this.Os)},Wf:function(){this.ec||(this.ec=1,this.P.$g("tip",{wheel:this.Ix,dbclick:this.vx,keydown:this.yx,start:this.Fe,move:this.dc,hover:this.xx,leave:this.Lh,gEnd:this.Vc},this))},he:function(){this.ec=0;this.P.jj("tip")},Ix:function(b,c){this.triggerEvent("TipWheel",[b,c])},vx:function(b){this.bk||
(this.F=this.F?0:1,this.triggerEvent("TipDbClick",[this.F]),this.F?this.hide():this.show().tk(b))},yx:function(b){this.Zc.on(this.zx,this,[b]).ip(30)},zx:function(b){var c=0,e=0,k=this.Qd;switch(b.keyCode){case 37:c=-1;break;case 39:c=1;break;case 40:e=-1;break;case 38:e=1}(c||e)&&k&&!this.F&&(b=l.ext({},k),b=this.triggerEvent("DeleTipKeydown",[b,c,e])||b,b.c!=k.c||b.i!=k.i||b.Ta!=k.Ta||b.Za!=k.Za)&&(b=this.Ms(b,q.zw),this.ii(b))},xx:function(b){var c=this.ai;!this.bi&&!this.opt.Sa||this.F&&!this.opt.Nd||
(this.ai=1,this.mf&&(this.pf=1),this.tk(b,q.yw),this.opt.Sa&&!c&&this.triggerEvent("onEvtHover",[b]))},Lh:function(b){this.opt.Sa&&this.ai&&this.triggerEvent("onEvtOut",[b]);this.opt.Sa&&!this.bi&&!this.F&&this.Rn&&(this.pf=0,this.mf&&this.Vd&&this.Vd.hide());this.ai=0},wy:function(b){var c=this;l.isTouch&&(c.dk=b,c.ek=setTimeout(function(){clearTimeout(c.ek);c.F=0;c.show().tk(c.dk);c.triggerEvent("onEvtLongPress")},c.opt.s_delay_longPressTipOn))},rs:function(){this.dk&&(this.dk=p,clearTimeout(this.ek),
this.ek=p)},Fe:function(b,c){this.On||(this.Z=1,!this.opt.Sa&&this.mf&&(this.pf=1),this.Mh.apply(this,[b,c]),this.triggerEvent("onEvtStart",[b,c]),this.F&&this.wy(b))},dc:function(b,c){var e=this.dk;this.Z&&e&&(e.pageX!=b.pageX||e.pageY!=b.pageY)&&this.rs();this.Z&&!this.F&&(this.Mh.apply(this,[b,c]),this.triggerEvent("onEvtMove",[b,c]))},Mh:function(b,c){this.Z&&!this.F&&this.tk(c,q.KE)},Vc:function(b,c){this.Z&&(this.rs(),this.triggerEvent("onEvtEnd",[b,c]));this.bi=this.Z=0}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Tip.prototype;l.regInherit("TipBlock",__MTS.Tip,{opt:{dm:1},uc:p,tg:p,ug:p,di:0,setOption:function(){b.setOption.apply(this,arguments);this.opt.Sa=1},ww:function(c){this.di=c?1:0;return this},nC:function(){return this.di},init:function(){b.init.apply(this,arguments);this.ud.find(".mts-tip-block").length||this.ud.append([__MTS.Template.pa("mts-tip-block"),"</div>"].join(""));this.uc=this.ud.find(".mts-tip-block");this.Rn=this.opt.Sa=1;return this},
mu:function(c,b){var k,h,m=this.d,n=this.e;n&&(k=-1==c?m.x:-2==c?m.getX2():n.c(c),h=-1==b?m.x:-2==b?m.getX2():n.c(b),c==b&&0>c&&(h=k=NaN));isNaN(k)||isNaN(h)?this.uc.hide():this.co(k,h);return this},qv:function(c,b){return this.addEvent("onBlock",c,b)},destroy:function(){this.uc&&this.uc.hide();b.destroy.apply(this)},co:function(c,b){var k,h,m=this.e.oe(1),n=this.d;k=b-c;h=0>k?b:c;(k=k?Math.abs(k):0)||!k&&h>n.x&&h<n.getX2()?(k<=m?this.uc.addClass("mts-tip-stick"):(this.uc.removeClass("mts-tip-stick"),
h-=0.5,k-=0.5),this.uc.css({left:h,width:k,display:q.Fd})):this.uc.hide()},Bk:function(){var c=this.d;b.Bk.apply(this,arguments);this.uc.css({top:c.y,height:c.h})},Fe:function(c,b){if(!this.On){var k=this.opt.dm;this.Z=1;this.F||!k||this.di||(2==k?this.triggerEvent("onEvtStart",[c,b]):this.ug=this.tg=this.ee(b))}},dc:function(c,e){var k;k=this.opt.dm;b.Mh.apply(this,arguments);!this.F&&this.Z&&k&&!this.di&&(2==k?this.triggerEvent("onEvtMove",[c,e]):(k=this.ug=this.F?this.ee(e):this.Qd,this.co(this.tg.c,
k.c)))},Vc:function(c,b){var k;k=this.opt.dm;this.Z&&2==k?this.triggerEvent("onEvtEnd",[c,b]):this.Z&&this.tg&&this.ug&&(k=[this.tg.J,this.ug.J],k.sort(function(c,b){return c-b}),this.triggerEvent("onBlock",[{start:k[0],end:k[1]},q.ij]),this.co(this.tg.c,this.ug.c));this.Z=0;this.ug=this.tg=p}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Tip.prototype;l.regInherit("TipPainting",__MTS.Tip,{show:function(){this.F=0;return this},Wf:function(){this.ec||(this.ec=1,this.opt.Sa=1,this.P.$g("TipPainting",{hover:this.dc,leave:this.Lh,start:this.Fe,move:this.dc,gEnd:this.Vc},this))},he:function(){this.ec=0;this.P.jj("TipPainting")},dc:function(b,c){this.F||(this.Z=1,q.dc.apply(this,arguments))},Lh:function(){this.Vc.apply(this,arguments)},Vc:function(){this.Z&&this.as();q.Vc.apply(this,arguments)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.OptClass.prototype;l.regInherit("View",__MTS.OptClass,{main:function(c){__MTS.OptClass.apply(this,[c]);this.u=new __MTS.APen;this.j=new __MTS.APen;this.Bg=new __MTS.Svg;this.ja=new __MTS.PanelMgr;this.sj=new __MTS.PanelMgr;this.P=new __MTS.Sensor;this.g=new __MTS.Tip(this.opt);this.ha=new __MTS.FgTxt;this.Ed=new __MTS.Panel;this.ad=new __MTS.Panel;this.Zc=new __MTS.TimerMove;this.Mj={}},opt:{pd:2,te:2,Xe:2,nh:2,YE:2,Iw:1,Hw:0,ph:30,oh:30,
km:"",Mw:p,kj:0,Lw:1,od:1,We:1,Jw:0,im:1,Sf:0},Ya:0,f:p,u:p,j:p,Bg:p,P:p,g:p,ha:p,ja:p,Ga:p,b:p,Ed:p,ad:p,Ad:p,rk:0,Mj:p,Bf:p,Zc:p,xj:p,Hc:p,rd:p,xe:p,sj:p,tj:p,ba:p,Od:"",sh:p,I:NaN,Cf:NaN,hF:0,xd:0,hg:0,ak:0,vs:0,ws:0,ys:NaN,us:NaN,kb:NaN,setOption:function(c){b.setOption.apply(this,arguments);this.g&&(this.it()?this.f&&this.g.init(this.f.find(".mts-tip"),this.f.find(".mts-tip-tmpl")).qe(this.P):this.g.setOption(c));return this},VD:function(c){this.sh=c;return this},init:function(c){this.f=l.getJqElm(c);
this.u.init(this.f.find(".mts-chartBg"));this.j.init(this.f.find(".mts-chartFg"));this.Bg.init(this.f.find(".mts-svg"));this.P.init(this.f.find(".mts-sensor"));this.ha.init(this.f.find(".mts-fgTxt")).qe(this.P).zc().Lp(this.ko,this).sl(this.mk,this).Kp(this.jo,this).UC(this.Yy,this);this.it();this.g.init(this.f.find(".mts-tip"),this.f.find(".mts-tip-tmpl")).qe(this.P);this.P.$g("view",{start:this.Ex,move:this.Dx,gEnd:this.Cx},this);return this},ED:function(c,b,k){this.P.$g(c,b,k);return this},Fw:function(c){this.P.jj(c);
return this},setSize:function(c,b){this.u.setSize(c,b);this.j.setSize(c,b);this.Bg.setSize(c,b);this.Ed.set(0,0,c,b);this.ad.set(0,0,c,b);return this},Re:function(){this.xd=this.rk=0;this.Ad=[];this.ja.Re();this.tj={Yb:q.U};return this},Fg:function(c,b){c=l.applyIf({ca:"",m:0,dir:1,Ya:0,ib:0,vp:0,dataType:b.Yb||"",tp:1,nm:0,mp:0,cl:0},c);c.m>this.rk&&(this.rk=c.m);c.dataType==q.U&&(this.xd=1);this.Ya&&(b.bh=c.dataType,b.Yb=q.U);this.Ad.push(c);this.ja.Fg(b);return this},Kg:function(){this.kn(function(c,
b,k){k.destroy()});this.Ga={};this.xj=p;this.ja.Kg();return this},wb:function(c,b,k){__MTS[b]||(b="CHART");b=new __MTS[b](k);b.gd=c;this.Ga[c]||(this.Ga[c]=[]);this.Ga[c].push(b);this.ja.wb(c,b);return this},Vk:function(){l.each(this.Ga,function(c,b){l.each(b,function(c,b){b.Vk()})});this.Mj={};return this},eh:function(c,b,k,h){(b=(c=this.Ga?this.Ga[c]:p)?c[b]:p)&&b.eh(k,h);return this},dE:function(c,b,k,h,m){var n=this.Ga?this.Ga[c]:p;if(n=n?n[b]:p)n.dj(k,h),this.zt(c,b,n,m)},dj:function(c,b,k,h){var m,
n=0,s,t;l.each(this.Ga,function(b,h){var e=h.length;if(n+e<=c)n=e;else return s=b,t=c-n,m=h[t]||p,!1});m&&(m.dj(b,k),this.zt(s,t,m,h));return this},zt:function(c,b,k,h){var m,n=this.Mj;n.iv=-1==h?q.left:q.right;n[c]||(n[c]={});m=n[c];m.kl=0;m[b]=0;k.Yu()&&(m[b]=1,m.kl=1,l.each(this.Ga[c],function(c){if(!m[c])return m.kl=0,!1}),n.Hf=p,n.Xk=p,l.each(this.Ga,function(c,b){k=b[0];var h=k.opt.gb,e=k.opt.Xo,m=k.Bb.Qc;h&&m==n.iv&&k.Yu()&&(n.Hf={gd:c,Rk:k});n[c]&&n[c].kl||h||!e||(n.Xk={gd:c,Rk:k});if(n.Hf&&
n.Xk)return!1}))},fa:function(c,b){this.b=c;this.kn(function(k,h,m){m.fa(c,b)});return this},xa:function(c,b,k){k||(k=0);(c=(k=this.Ga[k])?k[c]:p)&&c.xa(b)},cE:function(c,b){this.ys=isNaN(c)?NaN:c;this.us=isNaN(b)?NaN:b;return this},Uk:function(){this.Hc&&(this.Hc.destroy(),this.Hc=p);this.rd&&(this.rd.destroy(),this.rd=p);this.ba&&(this.ba.destroy(),this.ba=p);return this},setDataBG:function(c,b,k,h){var m=[],n,s=k||[];n=0;for(var t,w,p,q;n<c.length;n++)t=+c[n],isNaN(t)||(w=b[n]||0,p=s[n]||0,q=m["_"+
t]||{Ac:t,$a:0,sign:0},q.$a+=w,q.sign+=p,m["_"+t]=q,m.push(q));m.sort(function(c,b){return c.Ac-b.Ac});0<h&&(n=l.round(Math.abs(m[0].Ac-m[m.length-1].Ac)/h,4),m=this.xs(m,n,h,0));c=[];b=[];s=[];l.each(m,function(h,k){c.push(k.Ac);b.push(k.$a);s.push(k.sign)});this.Hc&&this.Uk();this.Hc=(new __MTS.Lines).xb(c);this.rd=(new __MTS.Lines).xb(b);this.xe=s;this.Od=l.isA(k)&&k.length?"HorzNPBar":"HorzBar";return this},Zz:function(){var c=this.Mj;c&&c.Hf&&c.Xk?(c.Hf.Rk.Ol(q.mb),c.Xk.Rk.Ol(c.iv)):(l.each(this.Ga,
function(c,b){l.each(b,function(c,b){b.Ol("")})}),c&&c.Hf&&c[c.Hf.gd].kl&&c.Hf.Rk.Ol(q.mb))},Ia:function(c){var b=this;c=l.ext({Qf:1,Ve:1,dw:1,hw:1,jw:1,uv:1},c);b.ja.Qa(function(c,h){h.pos.la(h.Ka);h.scale.rE(b.Ya).ya(h.pos).la(h.Ka)});b.opt.Jw&&b.Zz();c.Qf&&b.Ak().wA();c.Ve&&b.eA().Ot();c.dw&&b.Bo();c.hw&&b.bA();c.jw&&b.Kt();c.uv&&b.triggerEvent("onBeforeDrawReady");return b},Zp:function(c,b){this.Bt(c,b);this.Ot();this.g.F||this.g.resize();return this},draw:function(){var c=[],b=this.u,k=this.j;
b.clearAll().fillPanel(this.Ed,this.opt.color_bg).fillPanel(this.ad,this.opt.color_fg);this.ja.kp(function(h,m,n){m.ya(n.pos,n.scale).la(n.Ka,n.oc).fh(b,k).Ia().If();c.push(m)});this.ba&&this.ba.Ia();c.sort(function(c,b){return b.zIndex-c.zIndex});this.xj=c;this.Jb();return this},Jb:function(){var c=this,b=c.xj;c.j.clearAll();b&&(c.ba&&c.ba.Jb(),c.opt.Sf&&c.opt.s_animateDuration?c.Tw(function(){c.Ah();c.triggerEvent("onDrawReady")}):(l.each(b,function(c,b){b.Jb()}),c.Ah(),c.triggerEvent("onDrawReady")));
return c},Ah:function(){var c=this.j;this.opt.im&&this.Qa(function(b,k,h){k=h.Ka;h=h.oc;b||k.isEq(h)||(b=k.x-h.x,0<b&&c.clearRect(h.x,h.y,b,h.h),b=h.getX2()-k.getX2(),0<b&&c.clearRect(k.getX2(),h.y,b,h.h),b=h.getY2()-k.getY2(),0<b&&c.clearRect(h.x,k.getY2(),h.w,b),b=k.y-h.y,0<b&&c.clearRect(h.x,h.y,h.w,b))})},resize:function(c,b){this.Ia();c&&b&&this.Zp(c,b);this.draw();return this},hh:function(){this.opt.Sf=0;__MTS.AniMath.animateStop(this.Bf);return this},yE:function(c){this.g.hq(c);return this},
setTipTemplate:function(c){l.isF(c)?this.g.Gu.apply(this.g,arguments):this.g.fj.apply(this.g,arguments);return this},kw:function(c){this.g.$A(c);return this},suspendTipDbClick:function(c){this.g.jh(c);return this},suspendTipBlock:function(c){this.g.ww&&this.g.ww(c);return this},Kb:function(c,b,k){var h=!b||b!=q.qc&&0!==b.indexOf(q.ij)&&b!=q.gm?0:1;isNaN(c)&&(c=this.b.length-1);if(h||this.I!==c)0<=c&&(this.I=c),this.Ns(b,k);return this},Fp:function(c,b){var k=this.b.length-1;this.g.mu&&(0>c&&(c=-1),
0>b&&(b=-1),c>k&&(c=-2),b>k&&(b=-2),this.g.mu(c,b));return this},Mb:function(c){c?this.g.show():this.g.hide();this.triggerEvent("TipOnOff",[c]);return this},paddingTop:function(){var c=l.aryArgs(arguments,[1]);this.$s.apply(this,c);return this},xl:function(){var c=l.aryArgs(arguments,[-1]);this.$s.apply(this,c);return this},$s:function(c,b,k,h,m){k||(k=0);h||(h=0);m||(m=0);k=this.Ja(k);if(isNaN(+b)||0>+b)m=h=1,b=0;b=0<c?{Tc:h,Dl:b}:{jd:h,Cl:b};c=0<c?{aj:m}:{bj:m};k&&(k.pos.setOption(b),k.scale.setOption(c),
this.tj&&l.ext(this.tj,b,c))},Ue:function(c){this.kb=c;this.ja&&this.ja.kp(function(b,k){k.Ue(c)});return this},fC:function(){return this.f},VB:function(){return this.kb},eC:function(){return this.I},$F:function(){return this.g.Qd},oC:function(){return this.g.F},lG:function(){return this.g.opt.Sa},isTipSuspendDbClickCheck:function(){return this.g.bk},isTipSuspendBlockCheck:function(){return this.g.nC?this.g.di:0},sp:function(){return{L:this.vs,R:this.ws}},Ja:function(c){return this.ja.Ja(c)},VF:function(){return this.P},
IF:function(){return this.Ed},cG:function(){return this.opt.Lw},dG:function(){return this.opt.pd},Wu:function(){var c=this.opt,b;b=c.od?c.s_fontSizeX+c.s_tickLen+c.s_tickGap+2:2;b<c.te&&(b=c.te);return b},Uu:function(c){var b=[];(c=isNaN(c)?"":0<c?"signUp":0>c?"signDn":"signEq")&&b.push('<span class="mts-signFlag ',c,'"></span>');return b.join("")},PB:function(c,b){b||(b=0);var k=this.Ga[b];return k?k[c]:p},SE:function(){this.g.PE.apply(this.g,arguments);return this},RE:function(){this.g.OE.apply(this.g,
arguments);return this},QE:function(){this.g.NE.apply(this.g,arguments);return this},Qa:function(c,b){var k=this;k.ja.Qa(function(h,m,n){c.apply(b,[h,k.Ad[h],m,n])});return k},Xi:function(c,b){return this.addEvent("onWheel",c,b)},pv:function(c,b){return this.addEvent("onBeforeDrawReady",c,b)},Wi:function(c,b){return this.addEvent("onDrawReady",c,b)},sl:function(c,b){return this.addEvent("onFgCheckBox",c,b)},Lp:function(c,b){return this.addEvent("onFgRmBox",c,b)},Kp:function(c,b){return this.addEvent("onFgDragDown",
c,b)},Op:function(c,b){return this.addEvent("onSensorStart",c,b)},Np:function(c,b){return this.addEvent("onSensorMove",c,b)},Mp:function(c,b){return this.addEvent("onSensorEnd",c,b)},onTipOnOff:function(c,b){return this.addEvent("TipOnOff",c,b)},onTipBlock:function(c,b){this.g.qv&&this.g.qv(c,b);return this},vl:function(c,b){this.g.TC(c,b);return this},dD:function(c,b){this.g.SC(c,b);return this},Pp:function(c,b){this.g.RC(c,b);return this},Xg:function(c,b){this.g.vv(c,b);return this},ul:function(c,
b){this.g.Jp(c,b);return this},Mf:function(c,b){return this.addEvent("Dele_ScaleLabelX",c,b)},me:function(c,b){return this.addEvent("Dele_ScaleLabelY",c,b)},Hp:function(c,b){return this.addEvent("Dele_TipDbClickIdx",c,b)},Kd:function(c,b){return this.addEvent("Dele_TipMove",c,b)},MC:function(c,b){return this.addEvent("_onDele_TipMoveIdx",c,b)},onDele_TipTmplMove:function(c,b){this.g.onDele_TipTmplMove(c,b);return this},ne:function(c,b){return this.addEvent("Dele_TipKeydown",c,b)},Ip:function(c,b){this.g.Ip(c,
b);return this},sv:function(c,b){return this.addEvent("onDele_TipDir",c,b)},tv:function(c,b){return this.addEvent("onDele_idxOfLegend",c,b)},Wg:function(c,b){return this.addEvent("Dele_Legend",c,b)},ql:function(c,b){return this.addEvent("Dele_LegendContent",c,b)},rl:function(c,b){return this.addEvent("Dele_LegendNodeItem",c,b)},rv:function(c,b){return this.addEvent("Dele_LegendNode",c,b)},onDele_LegendStyle:function(c,b,k){return this.addEvent("Dele_LegendStyle",c,b,k)},wq:function(){this.Bd();return this},
destroy:function(){this.hh();this.Zc.destroy();this.Uk();this.sj.destroy();this.kn(function(c,b,k){k.destroy()});this.ja.destroy();this.P.destroy();this.g.destroy();this.ha.destroy();this.u.destroy();this.j.destroy();this.Bg.destroy();b.destroy.apply(this,arguments)},xs:function(c,b,k,h){var m=0,n=[];h++;if(100<h||c.length<=k)return c;for(var s=0,t,l,p,q,A;s<c.length;s++)(t=c[s])&&t.$a&&(l=0==s?c[s+1]:c[s-1],p=s==c.length-1?c[s-1]:c[s+1],q=Math.abs(t.Ac-l.Ac),A=Math.abs(t.Ac-p.Ac),(t.$a>=p.$a||A>
b)&&(t.$a>=l.$a||q>b)&&(l.$a&&q<=b&&(t.$a+=l.$a,l.$a=0,t.sign+=l.sign,l.sign=0,m++),p.$a&&A<=b&&this.vy(c,s)&&(t.$a+=p.$a,p.$a=0,t.sign+=p.sign,p.sign=0,m++,s++),n.push(t)));2<m&&(n=this.xs(n,b,k,h));return n},vy:function(c,b){if(b>=c.length-2)return 1;var k=c[b+1],h=c[b+2],m=Math.abs(k.Ac-c[b].Ac),n=Math.abs(k.Ac-h.Ac);return k.$a<h.$a&&n<m?0:1},kn:function(c){l.each(this.Ga,function(b,k){l.each(k,function(h,k){c(b,h,k)})})},Ak:function(){var c=this,b,k=c.Ed,h=c.rk,m=c.opt.Lw,n=c.opt.pd,s=c.Wu();
b=k.h-n-s;c.ad.y=n;c.ad.h=b;var t,w,p=0,q={};c.ja.Qa(function(m,s){var C=c.Ad[m],F=C.m;q[F]||(-1==F?q[F]=new __MTS.Panel(k):(t=p,w=l.round(C.tp*b),F==h?w=k.h-p:F||(w+=n),q[F]=new __MTS.Panel(k.x,t,k.w,w),p+=w));s.oc.set(q[F])});c.ja.Qa(function(b,e){var k=c.Ad[b],p=k.m,q=e.oc,E=p?m:n,E=E+l.round(k.nm*q.h);p&&(E++,m||c.ja.Iu(b,e,function(c,b){b.opt.s_border[0]=0}));t=q.y+E;w=q.h-E;p==h&&(w-=s);k.mp?w=k.mp:k.cl&&(t+=w-k.cl,w=k.cl);e.Ka.set(q.x,t,q.w,w)});return c},eA:function(){var c=this,b=c.opt.s_tickGap+
c.opt.s_tickLen+2,k=c.opt.Xe,h=c.opt.nh;c.opt.We&&(c.ja.kp(function(b,e,s){b=e.Bb;s=s.scale.ub;var t=c.opt.s_fontSizeY,w=b.Qe,p=0;if(!b.gb||!b.Ig||e.Bb.Jg)return!0;w&&(p=l.getTextWidth(w,t+1));l.each(s,function(c,b){var h=l.getTextWidth(b.txt,t);h>p&&(p=h)});e.Bb.Qc===q.left?k<p&&(k=p):h<p&&(h=p)}),k+=b,h+=b);c.Bt(k,h);return c},Bt:function(c,b){this.vs=c;this.ws=b;this.ad.x=this.Ed.x+c;this.ad.w=this.Ed.w-c-b;this.ja.Qa(function(k,h){h.Ka.x=h.oc.x+c;h.Ka.w=h.oc.w-c-b});return this},os:function(){var c;
c=this.b;var b=0,k=c.length-1;this.xd&&(b=c[0],k=c[k],b>k&&(c=b,b=k,k=c));return{min:b,max:k,ea:NaN}},ps:function(c,b){var k=NaN,h=NaN,m=NaN,n=this.ys,s=this.us;this.ja.Iu(b,c,function(c,b){var e=b.hb();if(e){if(isNaN(k)||k>e.min)k=e.min;if(isNaN(h)||h<e.max)h=e.max;isNaN(+b.opt.Wb)?isNaN(m)&&!isNaN(e.ea)&&(m=e.ea):m=b.opt.Wb}});!isNaN(n)&&n<k&&(k=n);!isNaN(s)&&s>h&&(h=s);return{min:k,max:h,ea:m}},wA:function(){var c=this;c.ja.Qa(function(b,k){var h=c.Ad[b],m,n=0,s=0;c.Ya?(m=c.os(),n=h.ib,s=h.vp):
m=c.ps(k,b);k.pos.Qf(m.min,m.max,m.ea).TD(n).YD(s).Pf();k.scale.fa(c.b).me(c.Kc,c,[b]).Ul(c.opt.ph).Ql().Sl()});return c},Ot:function(){var c=this,b=c.b||[];c.ja.Qa(function(k,h){var m=c.Ad[k],n,s=0,t=0;c.Ya?n=c.ps(h,k):(n=c.os(),s=m.ib,(t=m.vp)||2!=b.length||(t=1));h.pos.Ve(n.min,n.max,n.ea).SD(s).XD(t).gh();h.scale.Tl(c.opt.oh).Mf(c.Wc,c,[k]).Pl().Rl()});return c},Gr:function(){return this.rd.hb()},Bo:function(){if(!this.Hc)return this;var c=this,b,k=c.ja.Ja(0),h=c.Gr(),m=c.Hc.Ec(),n=k.pos.ve;c.sj.Re().Fg(c.tj);
b=c.sj.Ja(0);b.Ka.set(k.Ka);b.oc.set(k.oc);b.pos.la(b.Ka).Ve(h.min,h.max,0).gh().Qf(n.min,n.max,n.ea).Pf();b.scale.ya(b.pos).fa(m).Tl(c.opt.oh).Pl().Rl().Ul(c.opt.ph).Ql().Sl();c.ba&&c.ba._name!=c.Od&&(c.ba.destroy(),c.ba=p);c.ba||(c.ba=(new __MTS[c.Od](c.opt)).setOption({s_line_a:c.opt.s_bgBar_a,color_line:c.opt.color_slider,color_gdn1:c.opt.color_slider_gdn1,color_gdn2:c.opt.color_slider_gdn2}));c.sh&&c.ba.setOption(c.sh);c.ba.fh(c.u,c.u).ya(b.pos,b.scale).la(b.Ka,b.oc).fa(m);c.triggerEventOrDefaultFn("_onSetChartBG",
p,function(){"HorzNPBar"==c.Od&&c.ba.Md(c.xe);c.ba.xa(c.rd)});return c},Rh:function(c,b,k){c/=b;b=l.getDP(k/b);0<b&&(c=c.toFixed(b));return c},xr:function(c,b,k){var h=Math.abs(c);1E12<=h&&(b=this.Rh(c,1E12,k)+"T");1E9<=h?b=this.Rh(c,1E9,k)+"B":1E6<=h?b=this.Rh(c,1E6,k)+"M":1E4<=h?b=this.Rh(c,1E3,k)+"K":1>k&&(b=this.Rh(c,1,k));return b},Kc:function(c,b){c.txt=this.xr(+c.val,c.txt,c.step);return c=this.triggerEvent("Dele_ScaleLabelY",[c,this.Ad[b]])||c},Wc:function(c,b){c.dataType==q.U&&(c.txt=this.xr(+c.val,
c.txt,c.step));return c=this.triggerEvent("Dele_ScaleLabelX",[c,this.Ad[b]])||c},bA:function(){var c=0.1*this.ad.w;50<c&&(c=50);this.ha.setSize(l.floor(this.ad.w-c));return this},it:function(){var c=0,b=this.opt.km;b&&__MTS[b]||(b="Tip");b!==this.g._name&&(c=1,this.g.destroy(),this.g=new __MTS[b](this.opt));return c},Kt:function(){var c=this.ja.Ja(this.Cf||0);isNaN(this.Cf)&&(this.Cf=0);c&&this.g.ya(c.pos).la(this.ad,this.Ed).setSize().zc().ne(this.ic,this).Kd(this.ta,this).Qp(this.He,this).cD(this.Dz,
this).fD(this.Ez,this).wv(this.ro,this);return this},eg:function(c){return this.ja.aC(c,(this.opt.Mw||[])[c]||0)},Ns:function(c,b){var k=this.b,h=this.I,m=this.g.F,n=this.g.Qd,k=this.xd?k[h]:h,s=this.eg(this.Cf)[h];b&&n&&(s=n.D);m&&c!=q.qc?this.Ls(h):this.g.Sg(k,s,c)},Zy:function(){this.triggerEvent("onFgCheckBox",l.aryArgs(arguments));this.g.hj(0)},mk:function(){this.hg=1;this.g.hj(1).jh(1);this.Zc.on(this.Zy,this,l.aryArgs(arguments)).ip(50)},ko:function(){this.hg=1;this.g.hj(1).jh(1);this.triggerEvent("onFgRmBox",
l.aryArgs(arguments))},jo:function(){this.hg=1;this.g.hj(1).jh(1);this.triggerEvent("onFgDragDown",l.aryArgs(arguments))},Yy:function(){var c=this;c.hg=0;setTimeout(function(){clearTimeout(this);c.g.hj(0);c.g.jh(0)},30)},ro:function(c,b){__MTS.Config.Chart.s_wheelZoomInOut&&!l.isIE(8)&&this.triggerEvent("onWheel",[c,b])},Ez:function(){this.triggerEvent("TipOnOff",[1])},Dz:function(c){var b,k=this.b;this.triggerEvent("TipOnOff",[!c]);b=this.triggerEvent("Dele_TipDbClickIdx",[this.I,c,this]);if(c){if(isNaN(b)||
b>k.length-1)b=k.length-1;else if(!b||0>b)b=0;this.Ls(b)}},Lr:function(c,b){var k=-9,h=this.Hc.Ec();this.ba&&(k=__MTS.Util.findNumIndex(c,h),0<=k?0<b&&c>=h[k]?k++:0>b&&c<=h[k]&&k--:-1==k?k=0:-2==k&&(k=h.length-1));return k},ic:function(c,b,k){var h;h=this.xd;var m=c.gd||0,n=this.ja.Ja(m).pos,s=this.b,m=this.eg(m),t={x:b,y:k},l=c.idx;if(t=this.triggerEvent("onDele_TipDir",[t]))b=t.x,k=t.y;k&&this.ba?(m=this.Hc.Ec(),h=this.Lr(c.D,k),c.up=h,0<=h&&h<m.length&&(c.D=c.Za=m[h],c.i=n.i(c.D))):(0<=l&&(l+=
b),0<=l&&l<s.length&&(c.idx=l,c.J=h?s[l]:l,c.c=n.c(c.J),c.Ta=s[l],c.D=c.Za=m[l],c.i=n.i(c.D)));c=this.triggerEvent("Dele_TipKeydown",[c,b,k,this])||c;this.I=c.idx;return c},ta:function(c,b){var k=this.Cf,h=this.xd;this.ja.Qa(function(b,h){if(c.i<=h.Ka.getY2())return k=b,!1});var m=this.ja.Ja(k),n=m.pos,s=this.b,m=m.Ka,t=this.eg(k),w=t.dp||0,p=h?__MTS.Util.findNumIndex(c.J,s):Math.round(c.J),p=this.hasTriggerEvent("_onDele_TipMoveIdx",[p,c,b],p);p>=s.length||h&&-2==p?p=s.length-1:0>p&&(p=0);c.idx=
p;c.gd=k;c.xv=c.c;c.iD=n.J(c.c);c.J=h?s[p]:p;c.c=n.c(c.J);c.Ta=s[p];c.yv=c.i;c.jD=n.D(c.i);this.opt.kj?c.D=p>=t.length?t[t.length-1]:t[p]:(c.i<m.y?c.i=m.y:c.i>m.getY2()&&(c.i=m.getY2()),c.D=l.round(n.D(c.i),w));c.i=n.i(c.D);c.Za=c.D;c.pos=n;c.points=t;this.ba&&(h=c.up,n=this.Hc.Ec(),s=this.rd.Ec(),isNaN(h)&&(h=this.Lr(c.D)),c.up=h,0<=h&&h<=n.length-1&&(c.iB=n[h],c.jB=s[h],c.bgSign=this.xe?this.xe[h]:0));c=this.triggerEvent("Dele_TipMove",[c,b,this])||c;this.I=c.idx;this.Cf=c.gd;return c},He:function(){this.Bd()},
Ex:function(c,b){this.g.F&&!this.hg&&(this.ak=1,this.triggerEvent("onSensorStart",[c,b]))},Dx:function(c,b){this.ak&&this.g.F&&!this.hg&&this.triggerEvent("onSensorMove",[c,b])},Cx:function(c,b){this.ak&&this.triggerEvent("onSensorEnd",[c,b]);this.ak=0},Ls:function(c){var b=this.Cf,k=this.ja.Ja(b).pos,h=this.b,h=this.xd?h[c]:c;c=this.eg(b)[c];k={J:h,D:c,c:k.c(h),i:k.i(c),Ta:h,Za:c};this.ta(k,q.LE);this.He()},Bd:function(){var c=this,b;b=c.I;var k=c.g.F;b=c.hasTriggerEvent("onDele_idxOfLegend",[b,
k],b);if(b=c.iy(b)){var h=c.triggerEvent("Dele_Legend",[b,c]);if(h&&h!=b)b.destroy(),b=h;else if(!1===h){c.ha.Wk();return}k&&c.opt.Hw?b.Pg(function(b){c.ha.Vl(b,"")}):b.Pg(function(b,h){var e={x:h.x,y:h.y},k=c.triggerEvent("Dele_LegendStyle",[e,b]);k&&k!=e&&(e=k);c.ha.Vl(b,h.label,e);l.each(h.Oe,function(h,e){c.ha.ju(b,b+","+h,e,e.Zk)})});b.destroy()}},iy:function(c){var b=this,k=new __MTS.LegendMgr;if(isNaN(+c))return p;b.ja.Qa(function(h,m,n){var s=m.Ka,t=b.Ad[h],w=t.m,p=n[0].b,s={x:s.x+b.opt.YE,
y:s.y+b.opt.Iw,label:p[c]},q={idx:c,Ow:p.length,m:w,Nf:t,gd:h,uG:m,Hd:n};(s=b.hasTriggerEvent("Dele_LegendContent",[s,q,b],s))&&k.gq(w,s.x,s.y).iq(w,s.label);l.each(n,function(h,m){var n=b.ay(c,m,function(c){if(c=b.hasTriggerEvent("Dele_LegendNodeItem",[c,h,q,b],c))return c});n.Zk="";n=b.hasTriggerEvent("Dele_LegendNode",[n,h,q,b],n);n.length&&k.So(w,n)})});return k},ay:function(c,b,k){var h=this,m=[],n=b.Kf();n.Oi(function(s,t){var w=b.Su(t),q=n.fl(t)||[];l.each(s,function(n,s){var z=b.ZB(t,n),C=
b.$B(t,n),z={cr:w,val:s[c],fmtValue:"",sign:q[c],signTag:"",legend:z,unit:C,crByDef:"",crByLine:w,checkbox:p,M:t,Zi:n};h.Nu(z,b);l.isF(k)&&(z=k(z));z&&m.push(z)})});return m},Nu:function(c,b){c.fmtValue=l.fmtNum(c.val);isNaN(c.val)&&(c.val=NaN,c.fmtValue=this.opt.s_legend_formatNaN);c.signTag=this.Uu(c.sign);b.Mg&&(c.crByDef=b.RB(c.sign,c.val),c.crByDef&&(c.cr=c.crByDef));c.txt=__MTS.DataParser.np(c,c.fmtValue);return c},Tw:function(c){var b=this;b.Bf=__MTS.AniMath.animateFrame(b.Bf,function(k,h){var m=
b.xj;!m||m[0].isDestroy?(b.hh(),c()):(b.j.clearAll(),l.each(m,function(c,b){b.Jb(h,k)}))},function(){b.hh();c()},b.opt.s_animateDuration,b.opt.s_animateFPS)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.View.prototype;l.regInherit("ViewBS",__MTS.View,{main:function(){__MTS.View.apply(this,arguments);this.addEvent("_onSetChartBG",this.rz)},Pq:p,Qq:p,xe:p,Bm:p,Oq:-1,setDataBG:function(c){var b=[],k=[],h=[],m=[],n=[],s={},t=0;l.each(c,function(c,t){t.date&&b.push(t.date);k.push(t.Ab);h.push(t.ob);m.push(t.sign);n.push(t.cr);s[t.Ab]=s[t.Ab]?s[t.Ab]+t.ob:t.ob});l.each(s,function(c,b){b>t&&(t=b)});this.Od=b.length?"BSBar":"HorzBSBar";this.Pq=b;
this.Hc=(new __MTS.Lines).xb(k);this.rd=(new __MTS.Lines).xb(h);this.Qq={min:0,max:t,ea:0};this.xe=m;this.Bm=n;return this},eE:function(c){this.Oq!=c&&(this.Oq=c,this.ba.Ue(c),this.draw());return this},Bo:function(){"BSBar"==this.Od?this.Yz():b.Bo.apply(this,arguments);this.g.lw(q.right,q.bottom)},Yz:function(){var c=this.ja.Ja(0),b=this.b;this.ba&&this.ba._name!=this.Od&&(this.ba.destroy(),this.ba=p);this.ba||(this.ba=new __MTS[this.Od](this.opt));this.sh&&this.ba.setOption(this.sh);this.ba.fh(this.u,
this.j).ya(c.pos,c.scale).la(c.Ka,c.oc).fa(b,this.Pq).Md(this.xe,this.Bm).xa(this.Hc).jE(this.rd)},rz:function(){this.ba.Md(this.xe,this.Bm).xa(this.rd)},Gr:function(){return this.Qq},WB:function(c,b){var k=p,h=p;"BSBar"==this.Od?(h=this.ba.Vm,l.each(h,function(h,n){l.each(n,function(h,n){l.each(n.items,function(h,n){if(b<n.t||b>n.ga)return!1;if(c>=n.A&&c<=n.aa)return k=n,!1});if(k)return!1});if(k)return!1})):(h=this.ba.wg,l.each(h,function(h,n){l.each(n,function(h,n){if(b<n.t||b>n.ga)return!1;if(c>=
n.A&&c<=n.aa)return k=n,!1});if(k)return!1}));return k}})});
__MTS.Util.go(function(u,p,l){l.regInherit("ViewRotate",__MTS.View,{opt:{fm:__MTS.Constant.left},Ya:1,Kt:function(){var l,b=this.ja.Ja(0);l=b.cd[0];b.fv=this.eg(0);b.gv=0;l&&(l=l.Kf(),b.gv=l.va());this.g.ya(b.pos).la(this.ad,this.Ed).setSize().zc().ne(this.ic,this,[b]).Kd(this.ta,this,[b]).Qp(this.He,this);return this},Ns:function(){var l=this.b,b=this.I,l=this.xd?l[b]:b,b=this.eg(0)[b];this.g.F||this.g.Sg(b,l)},ta:function(p,b,c){var e=this.xd,k=this.b,h=c.pos,m=c.fv,n=c.gv,s=m.dp,t=e?__MTS.Util.findNumIndex(p.D,
k):Math.round(p.D);t>=k.length||e&&-2==t?t=k.length-1:0>t&&(t=0);s||(s=0);p.idx=t;p.D=e?k[t]:t;p.i=c.pos.i(p.D);p.Za=k[t];1===n&&(p.J=m[t],p.c=h.c(p.J));p.Ta=l.fmtNum(p.J,s);p=this.triggerEvent("Dele_TipMove",[p,b])||p;this.I=p.idx;return p},He:function(){},ic:function(l,b,c,e){var k=this.xd,h=e.pos,m=this.b,n=e.fv,s=l.idx;0<=s&&(s+=c);0<=s&&s<m.length&&(l.idx=s,l.D=k?m[s]:s,l.i=e.pos.i(l.D),l.Za=m[s],l.J=l.Ta=n[s],l.c=h.c(l.J));l=this.triggerEvent("Dele_TipKeydown",[l,b,c])||l;this.I=l.idx;return l}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.ext(__MTS.View.prototype,{xC:function(b){if(!this.Ga||!this.Ga[0])return this;var c,e,k,h,m,n,s,t=b.unit||"";if(c=(c=this.Ga[0][0])?c.Kf():p){if(b.min||b.max)e=c.hb(),h=e.min,m=e.max,n=e.za,s=e.Fa,b.lC&&(k=c.Ec(),isNaN(k.min)||(h=k.min,n=k.za),isNaN(k.max)||(m=k.max,s=k.Fa)),b.min&&this.fk(n,h,this.opt.s_low+h+t,-1,this.opt.color_mark_low),b.max&&this.fk(s,m,this.opt.s_high+m+t,1,this.opt.color_mark_high);if(b.first||b.last)b.first&&(k=c.le(),(!e||
0<e.za&&0<e.Fa)&&this.fk(0,k[0],k[0]+t,1)),b.last&&(k=c.Ec(),xIdx=k.length-1,(!e||e.za<xIdx&&e.Fa<xIdx)&&this.fk(xIdx,k[xIdx],k[xIdx]+t,1))}return this},yC:function(b,c,e,k){this.Js=b;this.Hs=c;this.Is=e;this.Ks=k;this.Fy();this.Gy();return this},Gc:function(){this.Hy.apply(this,arguments);return this},BC:function(b,c,e){this.Ds=b;this.ao=c;this.Cs=l.isA(e)||!isNaN(e)?e:-1;this.hk=this.ik=0;this.By();return this},mv:function(){this.Bs(this.rg,1);this.Bs(this.qg,-1);return this},CC:function(){this.Es(this.rg,
1);this.Es(this.qg,-1);return this},EC:function(){var b=2*this.Zn,c=this.ik,e=this.hk;c&&(c+=b);e&&(e+=b);return{top:c,Uo:e}},DC:function(b){return{IE:this.Gs(b,this.rg),EB:this.Gs(b,this.qg)}},qG:function(){return this.rg},pG:function(){return this.qg},Hy:function(b,c,e,k){var h,m,n=this.Ja(b);b=this.opt.color_markY||k;k=this.opt.color_markY_bg||k;if(n){m=n.scale.ub;var s=this.j,t=n.Ka,w=n.oc,p=n.pos,n=this.opt.s_fontSizeY;h=m[m.length-1];e<=m[0].val&&e>=h.val&&(m=l.fmtNum(e),h=l.getTextWidth(m,
n),0<c?(c=t.getX2()+1+2,c+h+2>w.getX2()&&(c=w.getX2()-h-1-2)):(c=t.x-h-1-2-1,c<w.x&&(c=w.x)),e=p.i(e)+n/2,e+n<t.y?e=t.y-n:e>t.getY2()&&(e=t.getY2()),s.save().setFont(n).drawText(c,e,m,b,k,[0,2,0,1]).restore())}},Js:p,Hs:0,Is:0,Ks:0,bo:p,Fy:function(){var b=[],c=this.Ga[0],e=c[0],k=this.Hs,h=this.Is,m=this.Ks-h;e&&(l.each(this.Js,function(n,s){var t,w;(e=c[s.rB])&&l.each(s.Bq,function(c,n){n>=m&&(t=h-k-(n-m),w=e.Su(c),0<=t&&b.push({qh:t,cr:w}))})}),this.bo=b)},Gy:function(){var b=this.Ja(0);if(b&&
this.bo){var c=b.pos,e=this.j,k,h=b.Ka.getY2();e.save().setGlobalAlpha(1).setLineWidth(this.opt.s_lineW).setLineJoin(q.round);l.each(this.bo,function(b,n){k=c.c(n.qh);e.setStrokeStyle(n.cr).beginPath(1).moveTo(k-3,h).lineTo(k,h-10).lineTo(k+3,h).stroke()});e.restore()}},Cs:-1,Ds:p,ao:0,Zn:12,ik:0,hk:0,rg:p,qg:p,$n:p,Gs:function(b,c){var e=[];c&&c[b]&&(e=c[b].Ni.slice());return e},By:function(){var b={},c={},e={},k=this.opt.color_mark_period,h=this.b,m=h.length,n=new Date(h[0]),s=h[m-1];if(!s)for(m-=
2;0<m;m--)if(h[m]){s=h[m];break}s=new Date(s);l.each(this.Ds,function(h,m){if(!m||1>m.length)return!0;var l,p=0,q=m[0],z=m[1],C=m[2]||k[h%k.length];l=new Date(q);l>=n&&l<=s&&(p++,(l=b[q])?(l.lc++,l.Yk.push(C),l.Ni.push(h)):b[q]={idx:0,lc:1,Yk:[C],Ni:[h],pe:[]});l=new Date(z);l>=n&&l<=s&&(p++,(l=c[z])?(l.lc++,l.Yk.push(C),l.Ni.push(h)):c[z]={idx:0,lc:1,Yk:[C],Ni:[h],pe:[]});2==p&&(e[h]={})});l.each(this.b,function(h,e){b[e]&&(b[e].idx=h);c[e]&&(c[e].idx=h)});this.rg=b;this.qg=c;this.$n=e},gk:function(b){var c=
0,e=this.Cs;l.isA(b)||(b=[b]);l.isA(e)?l.each(e,function(e,h){if(0<=l.aryIndexOf(h,b))return c=1,!1}):0<=e&&0<=l.aryIndexOf(e,b)&&(c=1);return c},Bs:function(b,c){var e=this,k=e.Ja(0),h=e.Ga[0],h=h?h[0]:p;if(k&&h){var m,n,s,t,w=e.opt.s_markPeriod_family,q=e.$n,B=e.ao,A=k.Ka,z=k.pos,k=h.Kf().ed(0),C=4>k.length?k[0]:0<c?k[2]:k[1],F=h.Ou(z),u=F;4>u&&(u=4);1==B&&8>u&&(u=8);20<u&&(u=20);t=12>u?12:u;m=2;l.each(b,function(b,h){var k=z.c(h.idx),p=z.i(C[h.idx]),L=u;0<c&&p+(L+m)*h.lc>A.getY2()&&(L=l.round((A.getY2()-
p)/h.lc-m));0>c&&p-(L+m)*h.lc<A.y&&(L=l.round((p-A.y)/h.lc-m));h.pe=[];for(var M=0,I,N,Q,R,T,S,O,P;M<h.lc;M++)I=k,N=0<c?p+(L+m)*M+m+L/2:p-(L+m)*M-m-L/2,O=h.Yk[M],P=h.Ni[M],0<c&&N>A.getY2()-L&&(N=A.getY2()-L),0>c&&N<A.y+L&&(N=A.y+L),2==B?(m=3,n=3<h.lc&&2<=M?"...":P+1,"..."==n&&e.gk(P)&&(n+=P+1),s=l.getTextWidth(n,t,w),N=0<c?p+t+(t+2*m)*M:p-t-(t+m)*M,Q=I,R=0<c?N-m:N-t-m,T=I+s+2*m,S=0<c?N+t+m:N+m,3>M?(h.pe.push({Fu:[P],ue:Q,Ye:R,aa:T,ga:S,bd:F,nd:s,zv:m,txt:n,kC:M?0:1,Zu:e.gk(P)}),R<A.y&&A.y-R>e.ik?
e.ik=l.round(A.y-R):S>A.getY2()&&A.getY2()-S>e.hk&&(e.hk=l.round(A.getY2()-S))):(Q=h.pe[h.pe.length-1],Q.Fu.push(P),e.gk(P)&&(Q.txt=n,Q.aa=T,Q.Zu=1))):1==B?h.pe.push({x:I,y:N,Jv:L}):h.pe.push({x:I,y:N,HD:u,JD:L,cr:O}),q[P]&&2!=B&&(0<c?(q[P].A=I,q[P].t=N,q[P].cr=O):(q[P].ue=I,q[P].Ye=N))});e.Zn=t}},Es:function(b,c){var e=this,k=[],h=e.ao,m=e.Ga[0],m=m?m[0]:p;e.Ja(0)&&m&&(l.each(b,function(b,m){l.each(m.pe,function(b,n){2==h?e.gk(n.Fu)?k.push(n):e.Fs(n,c):1==h?e.Cy(n,c):e.Dy(n,c)})}),l.each(k,function(b,
h){e.Fs(h,c,1)}),e.Ey())},Fs:function(b,c,e){var k=this.opt.s_markPeriod_family,h=this.Zn,m=0<c?this.opt.color_mark_period_up:this.opt.color_mark_period_dn,n=0<c?this.opt.color_mark_period_upin:this.opt.color_mark_period_dnin,s=this.opt.color_mark_period_txt,l=this.j,w=b.ue,p=b.Ye,q=b.aa,A=b.ga,z=1<b.bd?w+0.5:w,C=0<c?p-h/2:A+h/2;c=0<c?p:A;e&&(s=n,n=this.opt.color_mark_period_bg_curr);l.save();l.setFillStyle(n).setStrokeStyle(m).beginPath().pathRect(w,p,q,A).fill().beginPath(1).pathRect(w,p,q,A).stroke();
b.kC&&l.beginPath(1<b.bd?0:1).setLineWidth(1<b.bd?2:1).pathLine(z,C,z,c).stroke();A-=h/2;l.setFontFamily(k).setFont(h).setTextBaseline("middle").drawText(w+b.zv,A-b.zv,b.txt,s);l.restore()},Dy:function(b){var c=b.HD,e=b.JD,k=this.j,c=c/2,e=e/2;k.save().setFillStyle(b.cr).beginPath().pathOval(b.x,b.y,c,e).fill().restore()},Cy:function(b,c){var e=0<c?this.opt.color_kbar_dn:this.opt.color_kbar_up,k=0<c?this.opt.color_kbar_dnin:this.opt.color_kbar_upin;this.j.save().setStrokeStyle(e).setFillStyle(k).beginPath(1).pathArrow(b.x,
b.y,b.Jv,0.6*b.Jv,0<c?0:2).fill().stroke().restore()},Ey:function(){var b=this.j;b.save().setLineWidth(1);l.each(this.$n,function(c,e){b.setStrokeStyle(e.cr).beginPath(1).moveTo(e.A,e.t).lineTo(e.ue,e.Ye).stroke()});b.restore()},fk:function(b,c,e,k,h){var m=1,n=this.Ja(0),s=n.Ka,t=n.pos,n=this.j;h=h?h:this.opt.color_mark;var w=this.opt.s_markFont,p=l.round(0.7*w),q=l.round(p/1.6);b=t.c(b);k=t.i(c)-k*w/2;isNaN(b)||isNaN(k)||(c=l.getTextWidth(e,w),b+(2*q+1+c)>s.getX2()&&(m=-1),k-1.5*w<s.y?k=s.y+1.5*
w:k+0.5*w>s.getY2()&&(k=s.getY2()-0.5*w),this.Ay(b,k,q,p,h,m),n.save().setFont(w).drawText(b+m*(p+1)+(0>m?-c:0),k+w/2-0.1*p,e,h).restore())},Ay:function(b,c,e,k,h,m){var n=this.j,s=0>m?1:3,t=l.round(0.45*e);n.save().setFillStyle(h).beginPath().pathArrow(b,c,e,k,s).pathRect(b+m*e,c-t,b+m*k,c+t).fill().restore()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.regInherit("ViewOne",__MTS.OptClass,{main:function(b){__MTS.OptClass.apply(this,[b]);this.N=new __MTS.EventMgr;this.j=new __MTS.APen;this.u=new __MTS.APen;this.d=new __MTS.Panel;this.G=new __MTS.Panel;this.P=new __MTS.Sensor;this.e=new __MTS.Position;this.Ha=new __MTS.Scale;this.addEvent("-",this.Eb)},opt:{km:"",pd:2,te:2,Xe:2,nh:2,im:1,ph:30,oh:30,We:1,od:1,Sf:0},f:p,N:p,d:p,G:p,j:p,u:p,P:p,g:p,e:p,Ha:p,b:p,Na:p,Af:p,Yf:p,Ag:p,Bf:p,I:NaN,uy:0,
Jn:0,kb:NaN,init:function(b){var c=this.opt.km||"Tip";this.f=b=l.getJqElm(b);this.triggerEvent("_onInitBefore",[b]);b.hasClass("mts-view")||b.find(".mts-view").length||b.html(__MTS.Template.view());this.N.init(b);this.u.init(b.find(".mts-chartBg"));this.j.init(b.find(".mts-chartFg"));this.P.init(b.find(".mts-sensor"));this.e.la(this.d);this.Ha.ya(this.e).la(this.d);this.g||(this.g=new __MTS[c]);this.g.init(b.find(".mts-tip"),b.find(".mts-tip-tmpl")).jh(!this.uy).ya(this.e).la(this.d,this.G).qe(this.P).zc().ne(this.ic,
this).Kd(this.ta,this).Qp(this.He,this).wv(this.ro,this);this.triggerEvent("_onInit",arguments);return this},setSize:function(b,c){this.u.setSize(b,c);this.j.setSize(b,c);this.G.set(0,0,b,c);this.d.set(this.G);this.triggerEvent("_onSize",arguments);return this},setData:function(b,c){this.b=b;this.Na=c;this.Jn=0;return this},Ia:function(){this.e.setOption(this.opt);this.Ha.setOption(this.opt).fa(this.b);this.triggerEvent("_onReScaleBefore",arguments);this.ft();this.et();this.g.setOption(this.opt).setSize();
this.triggerEvent("_onDrawBefore",arguments);this.Jn=1;return this},draw:function(){this.u.clearAll();this.triggerEvent("_onDrawBG",arguments);this.Jb();return this},Jb:function(){var b=this,c=b.j;b.Jn&&(c.clearAll(),b.opt.Sf&&b.opt.s_animateDuration?b.Bf=__MTS.AniMath.animateFrame(b.Bf,function(c,k){b.j.clearAll();b.triggerEvent("_onDrawFG",[c,k])},function(){b.hh();b.Ah();b.triggerEvent("onDrawReady")},b.opt.s_animateDuration,b.opt.s_animateFPS):(b.triggerEvent("_onDrawFG",[0,0]),b.Ah(),b.triggerEvent("onDrawReady")));
return b},Ah:function(){var b,c=this.j,e=this.d,k=this.G;this.opt.im&&!e.isEq(k)&&(b=e.x-k.x,0<b&&c.clearRect(k.x,k.y,b,k.h),b=k.getX2()-e.getX2(),0<b&&c.clearRect(e.getX2(),k.y,b,k.h),b=k.getY2()-e.getY2(),0<b&&c.clearRect(k.x,e.getY2(),k.w,b),b=e.y-k.y,0<b&&c.clearRect(k.x,k.y,k.w,b))},hh:function(){this.opt.Sf=0;__MTS.AniMath.animateStop(this.Bf);return this},setTipTemplate:function(b){l.isF(b)?this.g.Gu.apply(this.g,arguments):this.g.fj(b);return this},Mb:function(b){b?this.g.show():this.g.hide();
return this},Kb:function(b,c){var e;e=!c||c!=q.qc&&0!==c.indexOf(q.ij)&&c!=q.gm?0:1;isNaN(b)&&this.b&&(b=this.b.length-1);if(e||this.I!==b)0<=b&&(this.I=b),e={idx:b,x:this.b?this.b[b]:NaN,y:this.Na?this.Na[b]:NaN},e=this.hasTriggerEvent("_onDele_moveTip",[e],e),isNaN(e.x)||this.g.Sg(x,y,c);return this},Ue:function(b){this.kb=b;this.triggerEvent("_onFocusIdx",[b]);return this},fC:function(){return this.f},VB:function(){return this.kb},eC:function(){return this.I},oC:function(){return this.g.F},Wi:function(b,
c){return this.addEvent("onDrawReady",b,c)},onTipMove:function(b,c){return this.addEvent("onTipMove",b,c)},eD:function(b,c){return this.addEvent("onTipKeyDown",b,c)},Xg:function(b,c){this.g.vv(b,c);return this},ul:function(b,c){this.g.Jp(b,c);return this},Xi:function(b,c){return this.addEvent("onWheel",b,c)},Mf:function(b,c){return this.addEvent("onDele_ScaleLabelX",b,c)},me:function(b,c){return this.addEvent("onDele_ScaleLabelY",b,c)},Eb:function(){this.hh();this.N.destroy();this.j.destroy();this.u.destroy();
this.P.destroy();this.g.destroy();this.e.destroy();this.Ha.destroy();this.triggerEvent("_onDestroy",arguments)},Cn:function(){return this.opt.s_tickLen+this.opt.s_tickGap+2},Wh:function(){return this.Na.hb()},Or:function(){return{min:0,max:this.b.length-1,ea:NaN}},ft:function(){var b=this.opt,c=this.Wh(),e=b.pd,k=b.od?b.s_fontSizeX+this.Cn():2;k<b.te&&(k=b.te);this.d.y=e;this.d.h=this.G.h-e-k;this.e.Qf(c.min,c.max,c.ea).Pf();this.Ha.Ul(this.opt.ph,this.Af,this.Yf).me(this.Kc,this).Ql().Sl()},et:function(){var b,
c,e=0,k=this.opt,h=this.Or(),m=k.Xe,n=k.nh,s=k.s_fontSizeY,t=k.Qe,k=this.Ha.ub,k=this.hasTriggerEvent("_onDele_reScaleX_scaleY",[k],k);t&&(e=l.getTextWidth(t,s+1));l.each(k,function(h,k){b=k.txt;c=l.getTextWidth(b,s);c>e&&(e=c)});e&&(e+=this.Cn());k=this.triggerEvent("_onDele_dirLabelY");this.opt.We&&("L"==k?m+=e:n+=e);this.d.x=this.G.x+m;this.d.w=this.G.w-m-n;this.e.Ve(h.min,h.max,h.ea).gh();this.Ha.Tl(this.opt.oh,this.Ag).Mf(this.Wc,this).Pl().Rl()},zf:function(b){var c=this.I;b.c=this.e.c(c);b.Ta=
this.b[c];b.J=c},ta:function(b,c){this.I=l.round(b.J);this.zf(b);this.triggerEvent("_onTipMove",arguments);this.triggerEvent("onTipMove",arguments);return b},He:function(){this.triggerEvent("_onTipMoveReady",arguments)},ic:function(b,c,e){var k=this.I;0<c||0>e?k++:(0>c||0<e)&&k--;this.I=k=0>k?0:k>this.b.length-1?this.b.length-1:k;this.zf(b,1);this.triggerEvent("_onTipKeyDown",arguments);this.triggerEvent("onTipKeyDown",arguments);return b},ro:function(b,c){__MTS.Config.Chart.s_wheelZoomInOut&&!l.isIE(8)&&
this.triggerEvent("onWheel",[b,c])},Kc:function(b){return b=this.triggerEvent("onDele_ScaleLabelY",[b])||b},Wc:function(b){return b=this.triggerEvent("onDele_ScaleLabelX",[b])||b}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.ViewOne.prototype;l.regInherit("ViewBullet",__MTS.ViewOne,{main:function(b){__MTS.ViewOne.apply(this,[b]);this.ha=new __MTS.FgTxt;this.addEvent("_onInit",this.Fb);this.addEvent("_onSize",this.ni);this.addEvent("_onReScaleBefore",this.mo);this.addEvent("_onDele_reScaleX_scaleY",this.ho);this.addEvent("_onDele_moveTip",this.Wy);this.addEvent("_onDrawBefore",this.Zd);this.addEvent("_onDrawBG",this.tf);this.addEvent("_onDrawFG",this.uf);this.addEvent("_onTipMoveReady",
this.He);this.addEvent("_onTipKeyDown",this.qo);this.addEvent("_onDestroy",this.Eb)},opt:{Yb:"sdate",kj:0,yq:NaN},ha:p,Ba:p,xh:p,Gm:p,b:p,Pd:p,Em:p,Fm:p,Ze:p,sk:p,bt:p,ns:p,Tn:p,In:2,Dd:-1,Ub:NaN,Oj:"",vn:NaN,$D:function(b){var c=[],e=[];l.each(b,function(b,h){c.push(h.type);e.push(h.opt)});this.Gm=c;this.xh=e;return this},setData:function(b,c){var e,k,h=-1,m=NaN,n=[],s=[],t=[],w=b.length;this.b=b;l.isA(c)&&(l.isA(c[0])?(n=c[0],l.isA(c[1])&&(s=c[1])):n=c);t=l.map(n,function(){return NaN});this.sk=
n;this.bt=t;this.Pd=[];k=new __MTS.Lines;e=n.concat(s);k.xb(e.slice(0,w));this.Pd[0]=this.Ze=k;this.Pd[1]=this.Em=new __MTS.Lines;k=new __MTS.Lines;e=t.concat(s);s.length&&(k.xb(e.slice(0,w)),m=s[0]);this.Pd[2]=this.Fm=k;isNaN(m)||(h=n.length);this.Dd=h;this.Ub=m;return this},addData:function(){var b=this,c,e,k=l.aryArgs(arguments),h=b.b.length,m=b.bt,n=b.Dd,s=b.Ub;l.each(k,function(k,n){l.isA(n)&&(c=new __MTS.Lines,l.each(n,function(b,e){l.isA(e[0])||(e=[e]);l.each(e,function(e,k){isNaN(s)&&(s=k[0]);
k.length<h&&(k=m.concat(k));c.xb(k.slice(0,h),b)})}),e=b.In+k,b.Pd[e]=c)});0>n&&!isNaN(s)&&(b.Dd=b.sk.length,b.Ub=s);return b},re:function(b,c){this.Dd=b;this.Ub=c;return this},iE:function(){var b=l.aryArgs(arguments);this.ns=b[0]||[];this.Tn=[];for(var c=1,e;c<b.length;c++)(e=b[c])&&this.Tn.push(e);return this},hq:function(b,c){this.Oj=l.isDate(b)?b:"";this.vn=isNaN(+c)?NaN:+c;return this},Wg:function(b,c){return this.addEvent("onDele_Legend",b,c)},Fb:function(){this.ha.init(this.f.find(".mts-fgTxt")).qe(this.P).zc();
return this},ni:function(b){this.ha.setSize(b)},Wh:function(){var b=NaN,c=NaN,e;l.each(this.Pd,function(k,h){e=h.hb();if(isNaN(b)||b>e.min)b=e.min;if(isNaN(c)||c<e.max)c=e.max});return{min:b,max:c,ea:NaN}},ty:function(b,c,e){var k=this.Ba[b],h=this.Gm[b],m=this.xh[b],n=this.opt.yq;m||(m=this.xh[this.xh.length-1]);!k&&h&&__MTS[h]&&(this.Ba[b]=k=new __MTS[h],k.ya(this.e,this.Ha).la(this.d,this.G).fh(this.u,this.j));k&&(m=l.ext({},this.opt,m),m.Ig||(m.Ig=0),0<e&&(m.Cc=e),isNaN(n)&&(n=this.Ub),m.Wb=m.Gf=
m.Ff=n,k.setOption(m).fa(this.b),c&&(k.xa(c),"Bullet"==k._name&&(k.re(this.Dd,this.Ub,this.Fm),e++),b>=this.In&&(e+=c.va())));return e},mo:function(){var b=this,c,e=0,k=b.Em.dd(0),h=b.Ub;!k&&b.sk.length&&(k=b.sk.slice(),isNaN(h)||k.push(h),b.Em.xb(k));b.Ba||(b.Ba=[]);l.each(b.Ba,function(h,e){c=b.Gm[h];e&&e._name!=c&&(e.destroy(),b.Ba[h]=p)});l.each(b.Pd,function(c,h){e=b.ty(c,h,e)})},ho:function(b){this.opt.gb||l.each(b,function(b,e){e.txt=""});return b},Zd:function(){var b;b=this.b;var c=this.I;
b&&b.length&&(isNaN(c)&&(c=b.length-1),b=(b=this.Ze.dd(0))&&c<b.length?b[c]:this.Ub,this.g.Sg(c,b));this.triggerEvent("onDrawBefore")},tf:function(){this.u.clearAll().fillPanel(this.G,this.opt.color_bg).fillPanel(this.d,this.opt.color_fg);l.each(this.Ba,function(b,c){c&&c.Ia().If()})},uf:function(b,c){var e=l.map(this.Ba,function(b){if(b)return b});e.sort(function(b,c){return c.zIndex-b.zIndex});l.each(e,function(e,h){h.Jb(c,b)});this.Oj&&!isNaN(this.vn)&&this.ix()},ix:function(){var b,c,e,k=this.opt.color_blt_focus,
h=this.opt.color_blt_focus_in,m=this.opt.s_blt_font_focus,n=this.j,s=this.d,t=this.Oj;b=l.findDateIndex(this.Oj,this.b);0<=b&&(b=this.e.c(b),c=this.e.i(this.vn),e=c-16<s.y?2:0,n.save(),n.setStrokeStyle(k).setFillStyle(h),n.setLineWidth(2).beginPath().pathArrow(b,c,20,16,e).fill().stroke(),n.setLineWidth(2).strokeDashed(b,c,b,s.getY2(),4,2),n.beginPath(1).pathLine(b-20/3,c,b+20/3,c).stroke(),c=l.getTextWidth(t),n.drawText(b-c/2-10,s.getY2()+m+2,t,h,k,[0,10,1,6]),n.restore())},Eb:function(){l.each(this.Ba,
function(b,c){c&&c.destroy()});l.each(this.xh,function(b,c){l.clearObj(c)});this.ha.destroy()},zf:function(b,c){q.zf.apply(this,arguments);var e=this.I,k=b.D,h=this.Ze.dd(0),m=this.Ze.hb().dp;(c||this.opt.kj)&&h?(k=e<h.length?h[e]:this.Ub,b.i=this.e.i(k)):m++;b.D=k=l.round(k,m);b.Za=l.fmtNum(k)},Wy:function(b){b.y=(this.Ze?this.Ze.dd(0):[])[b.idx];return b},He:function(){this.Bd()},qo:function(){this.Bd()},Pr:function(b,c,e){e||(e="");l.isA(b)&&2>b.length&&(b=b[0]);return{txt:e+(e?":":"")+(l.isA(b)?
b.join("~"):b),cr:c,val:b,legend:e}},Bd:function(){var b=this,c,e,k,h,m,n=b.I,s=b.In,t=b.opt.color_line,w=b.opt.Cc||0,p=t.length,q=b.Dd,A=b.g.F,z={x:b.b[n],y:[],style:{x:5,y:5},css:"mts-block"};e=t[0];c=b.Ze.dd(0);k=n<c.length?c[n]:b.Ub;m=b.ns||[];h=n>=q&&m[1]?m[1]:m[0]?m[0]:"";z.y.push(b.Pr(k,e,h));for(q=s;q<b.Pd.length;q++)c=b.Pd[q],m=b.Tn[q-s]||[],b.Ba[q]&&c!=b.Fm&&c.Oi(function(c,s){w++;e=t[w%p];k=l.map(c,function(b){return b[n]});h=m[s]||"";isNaN(k[0])||z.y.push(b.Pr(k,e,h))});(z=b.hasTriggerEvent("onDele_Legend",
[z],z))?A&&b.opt.Hw?b.ha.Vl(0,""):(b.ha.Vl(0,z.x,z.style),l.each(z.y,function(c,h){b.ha.ju(0,0,[h],z.css)})):b.ha.Wk()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template,c=__MTS.AniMath;l.regInherit("ViewPie",__MTS.ViewOne,{main:function(b){__MTS.ViewOne.apply(this,[b]);this.addEvent("_onInit",this.Fb);this.addEvent("_onInitBefore",this.az);this.addEvent("_onSize",this.ni);this.addEvent("_onDele_reScaleX_scaleY",this.ho);this.addEvent("_onDrawBefore",this.Zd);this.addEvent("_onDrawBG",this.tf);this.addEvent("_onDrawFG",this.uf)},opt:{zq:0,Tf:1,im:0,rq:0,sq:0,lh:0,em:0,tq:0,uq:0,Cv:0.7,oD:0.97,pD:0.73,
nD:2},f:p,be:p,qk:p,Uf:p,nj:p,Fh:p,Rb:0,zr:0,Ar:0,setData:function(b,c,h){var m=0,n=100,s=[],t=0;this.b=b;this.Na=c;l.each(this.Na,function(b,c){isNaN(c)||(m+=c)});h?this.qk=this.Na.slice():(l.each(this.Na,function(b,c){c=l.round(c/m*100,2);s.push(c);0<c&&(t=b,n-=c)}),s[t]+=n,this.qk=s);return this},ZD:function(b){l.isSNum(b)&&(b=[b]);l.isA(b)&&(this.Fh=b);return this},onDele_PieText:function(b,c){return this.addEvent("onDele_PieText",b,c)},onDele_PieTextCenter:function(b,c){return this.addEvent("onDele_PieTextCenter",
b,c)},az:function(c){c.find(".mts-chartBg").length||c.html(b.view())},ni:function(b,c){var h=b/2,m=c/2,n=b>c?c:b,s=l.round(n/2),n=l.round(n/2);this.be={x:h,y:m,ah:s,Il:n}},Wh:function(){return{min:NaN,max:NaN,ea:NaN}},Cn:function(){return 0},ho:function(){return[]},Zd:function(){var b=this,k,h,m,n,s,t,w,p,q=b.opt.s_pie_rotate,A=0,z=Math.PI/180,C=b.be,u=C.x,D=C.y;b.nj=[];b.Uf=[];l.each(b.qk,function(l,G){s=0<G?360*G/100:0;t=q;w=q+s;k=u+C.ah*Math.cos(t*z);h=D+C.Il*Math.sin(t*z);m=u+C.ah*Math.cos(w*
z);n=D+C.Il*Math.sin(w*z);p=c.getInnerArg(u,D,k,h,m,n);180<s&&(p=360-p);b.Uf.push(p);b.nj.push(A);A+=p;q=w})},tf:function(b){b||(b=0);this.Rb=b;this.u.clearAll().fillPanel(this.G,this.opt.color_bg).fillPanel(this.d,this.opt.color_fg)},uf:function(b,c){var h=this.be,m;this.Ar=b;this.zr=c;5==this.opt.Tf?this.LA(h.ah):3==this.opt.Tf||4==this.opt.Tf?this.MA(h.ah):this.KA(h.ah,h.Il);if(!c||0<c&&b==c-1)h={},m=this.oy(),h.x=m.x,h.y=m.y,h.ie=m.ie,h.cB=q.qu,h.dB=45<h.ie&&135>h.ie?q.bottom:225<h.ie&&315>h.ie?
q.top:q.kv,m=this.py(),h.txt=m.txt,this.g.F&&(h.txt=""),this.g.fj(h.txt,1).lw(h.cB,h.dB).nv(h.x,h.y)},ta:function(b){var k=this,h=0,m=k.opt.s_pie_rotate,n=k.be,s=n.x,n=n.y,t=b.i,w=c.getInnerArg(s,n,s+1,n,b.c,t);t<n&&(w=360-w);w-=m;0>w&&(w=360+w);l.each(k.nj,function(b,c){c+=k.Uf[b];if(w<c)return h=b,!1});h!==k.Rb&&k.draw(h)},ic:function(){return!1},ZA:function(b,c,h,m,n){var s=c-b,l=b-m;m=b+m;0<s*(h-b)?0<s?90>=n&&(l=b):m=b:0<s?(180>n&&(l=h),m=c):(180>n&&(l=c),m=h);return[l,m]},oy:function(){var b=
this.be,c=Math.PI/180,h=this.Rb,h=this.opt.s_pie_rotate+this.nj[h]+this.Uf[h]/2;return{x:b.x+1.1*b.ah*Math.cos(h*c),y:b.y+1.1*b.Il*Math.sin(h*c),ie:h}},py:function(){var c=[],k=this.Rb,k={x:this.b[k],y:this.Na[k],val:this.qk[k]};isNaN(k.val)||(k.val=l.round(k.val,2));c.push(b.Nb(k.x),b.Nb(isNaN(k.y)?k.y:l.fmtNum(k.y)),b.Nb(["[",k.val,"%]"].join("")));k.txt=c.join("");return k=this.hasTriggerEvent("onDele_PieText",[k],k)},zn:function(b,k,h,m,n,s){var l=[],w=this.opt.color_pie.length,p=this.be.x,q=
this.be.y,A=Math.PI/180,z=this.Rb,C,u,D,J,G,H,K,L,M,I,N,Q,R,T,S;c.esBegin(0,this.Ar,this.zr);C=this.opt.s_pie_rotate;for(var O=0;O<this.Uf.length;O++)D=this.Uf[O],isNaN(D)?l.push({idx:O}):(D=c.esoutBounce(D),u=C+D,0!=D&&(cr=this.opt.color_pie[O%w],gdn1=this.opt.color_pie_gdn1[O%w],gdn2=this.opt.color_pie_gdn2[O%w],J=n*Math.cos((C+D/2)*A),G=s*Math.sin((C+D/2)*A),H=O==z?p+J:p,K=O==z?q+G:q,L=H+b*Math.cos(C*A),M=K+k*Math.sin(C*A),I=H+b*Math.cos(u*A),N=K+k*Math.sin(u*A),isNaN(h)||isNaN(m)||(Q=H+h*Math.cos(C*
A),R=K+m*Math.sin(C*A),T=H+h*Math.cos(u*A),S=K+m*Math.sin(u*A)),l.push({idx:O,Zl:C,al:u,ie:D,mF:J,nF:G,A:H,t:K,ue:L,Ye:M,aa:I,ga:N,GG:Q,IG:R,$E:T,bF:S,cr:cr,pp:gdn1,qp:gdn2}),C=u));return l},LA:function(b){var c,h=this.be,m=this.j;c=this.opt.zq;var n=this.opt.s_pie_proportion_width,s=0.6*n,t=this.opt.color_pie_proportion_background,w=this.opt.color_pie_center,p=0.1*b;1>p&&(p=1);10>n&&(n=10);b=b-p-c-n;this.Rb=-1;m.save().setFillStyle(w).setStrokeStyle(t).setLineWidth(s).beginPath().pathOval(h.x,h.y,
b,b).fill().stroke().restore();c=this.zn(b,b,NaN,NaN,p,p);var q=Math.PI/180,A=m.getCreateLinearGradient(0,this.d.y,0,this.d.getY2());m.save();l.each(c,function(c,h){A.addColorStop(0,h.pp);A.addColorStop(1,h.qp);m.setStrokeStyle(A).setLineWidth(n).setLineCap("round");m.beginPath().moveTo(h.ue,h.Ye).arc(h.A,h.t,b,h.Zl*q,h.al*q,0).stroke()});m.restore();c=b*this.opt.Cv;l.isA(this.Fh)&&this.Tt(this.Fh,h.x,h.y,c)},MA:function(b){var c,h=Math.PI/180,m=this.be,n=this.j;c=this.opt.zq;var s=this.opt.color_pie_border,
t=this.opt.color_pie_center,w=0.1*b;1>w&&(w=1);b=b-w-c;c=b*this.opt.Cv;4===this.opt.Tf&&(s&&"transparent"!=s.toLowerCase()&&n.save().setFillStyle(s).beginPath().moveTo(m.x+b,m.y).arc(m.x,m.y,b,0,360*h,0).lineTo(m.x+c,m.y).arc(m.x,m.y,c,0,360*h,1).closePath().fill().restore(),c=b*this.opt.pD,b*=this.opt.oD,this.Rb=-1);t&&"transparent"!=t.toLowerCase()&&n.save().setFillStyle(t).beginPath().pathOval(m.x,m.y,c,c).fill().restore();this.UA(b,c,w);l.isA(this.Fh)&&this.Tt(this.Fh,m.x,m.y,c)},Tt:function(b,
c,h,m){var n,s,t=0,w=this.j,p=this.opt.color_pie_center_txt;n=l.round(0.7*m/b.length);n=40<n?40:12>n?12:n;b=l.map(b,function(b){return{txt:b,cr:p,font:n,offsetX:0,offsetY:0}});b=this.hasTriggerEvent("onDele_PieTextCenter",[b],b);l.each(b,function(b,c){c.w=l.getTextWidth(c.txt,c.font);c.h=1.2*c.font;t+=c.h});s=h-t/2;l.each(b,function(b,h){h.x=c-h.w/2;h.offsetX&&(h.x+=h.offsetX);h.offsetY&&(s+=h.offsetY);h.y=s+h.h/2+h.font/2-h.font/5;s+=h.h});w.save();l.each(b,function(b,c){w.setFont(c.font).drawText(c.x,
c.y,c.txt,c.cr)});w.restore()},UA:function(b,c,h){var m=this,n,s,t=m.j,w=Math.PI/180;h=m.zn(b,b,c,c,h,h);t.save();l.each(h,function(h,l){if(isNaN(l.ie))return!0;l.idx==m.Rb?t.setGlobalAlpha(m.opt.s_pie_focus_a):t.setGlobalAlpha(m.opt.s_pie_a);4===m.opt.Tf&&(l.cr=m.opt.color_pie_border,l.lineWidth=m.opt.nD);n=m.ZA(l.A,l.ue,l.aa,b,l.ie);s=t.getCreateLinearGradient(n[0],0,n[1],0);s.addColorStop(0,l.pp);s.addColorStop(1,l.qp);t.setFillStyle(s).setStrokeStyle(l.cr).setLineWidth(l.lineWidth||1);t.beginPath().moveTo(l.ue,
l.Ye).arc(l.A,l.t,b,l.Zl*w,l.al*w,0).lineTo(l.aa,l.ga).lineTo(l.$E,l.bF).arc(l.A,l.t,c,l.al*w,l.Zl*w,1).closePath().fill().stroke()});t.restore()},KA:function(b,c){var h,m,n=this.opt.zq,s=0.1*b,l=0.1*c;1>s&&(s=1);1>l&&(l=1);h=b-s-n;m=c-l-n;this.Mo(2,h,m,s,l);this.Mo(0,h,m,s,l);this.Mo(1,0.95*b-s-n,0.95*c-l-n,s,l)},Mo:function(b,c,h,m,n){var s=this,t,w=s.j,p=s.d;m=s.zn(c,h,NaN,NaN,m,n);w.save();l.each(m,function(n,m){m.idx==s.Rb?w.setGlobalAlpha(1):w.setGlobalAlpha(s.opt.AG);2==b?w.setLineWidth(1.3).setStrokeStyle(m.cr):
(t=w.getCreateLinearGradient(p.x,0,p.getX2(),0),t.addColorStop(b?1:0,m.pp),t.addColorStop(b?0:1,m.qp),w.setFillStyle(t));w.beginPath().moveTo(m.A,m.t).lineTo(m.ue,m.Ye);s.Jz(m.Zl,m.al,m.A,m.t,c,h);w.lineTo(m.aa,m.ga).closePath();2==b?w.stroke():w.fill()});w.restore()},Jz:function(b,c,h,m,n,s){for(var l,w=this.j,p=Math.PI/180,q=Math.floor((c-b)/1),A=0,z;A<q;A++){l=b+1*(A+1);if(l>=c)break;z=h+n*Math.cos(l*p);l=m+s*Math.sin(l*p);w.lineTo(z,l)}}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Template;l.regInherit("ViewRadar",__MTS.ViewOne,{main:function(b){__MTS.ViewOne.apply(this,[b]);this.ub=[0,20,40,60,80,100];this.addEvent("_onInit",this.Fb);this.addEvent("_onDrawBefore",this.Zd);this.addEvent("_onDrawBG",this.tf);this.addEvent("_onDrawFG",this.uf)},opt:{jm:0,rq:0,sq:0,lh:0,em:0,tq:0,uq:0},f:p,Ik:0,Jk:0,Ie:0,Uq:0,ub:p,St:p,setData:function(b,c){var e=this;e.b=b.slice(0,5);l.each(e.b,function(b,c){l.isA(c)||(e.b[b]=[c])});e.Na=[];l.isA(c[0])||
(c=[c]);l.each(c,function(b,c){e.Na.push(c.slice(0,5))});return e},Wh:function(){return{min:NaN,max:NaN,ea:NaN}},ft:function(){},et:function(){},wm:function(b){return(270+72*b)%360},n:function(b,c){c=isNaN(c)?this.Ie:c;return this.Ik+c*Math.cos(Math.PI/180*this.wm(b))},o:function(b,c){c=isNaN(c)?this.Ie:c;return this.Jk+c*Math.sin(Math.PI/180*this.wm(b))},Fb:function(){this.g.Jp(this.zd,this)},Zd:function(){var b,c,e=[];c=this.d;var k=this.opt.s_fontSizeY,h=0,m=k,n=this.opt.s_rd_padding+this.opt.s_rd_textPadding;
b=Math.PI/180;var s=Math.ceil(100*Math.cos(18*b))/100,t=Math.ceil(100*Math.cos(36*b))/100;this.opt.jm?h=m=this.Uq=this.opt.s_rd_bubbleR:l.each(this.b,function(b,c){var n=0,s=0,t=k;l.each(c,function(b,c){s=l.getTextWidth(c,k);s>n&&(n=s);b&&s&&(t+=k)});n>h&&(h=n);t>m&&(m=t);e.push(n)});b=Math.floor((c.w-2*(n+h))/(2*s));c=Math.floor((c.h-2*(n+m))/(1+t));this.Ik=b*s+n+h;this.Jk=c+n+m;this.Ie=b>c?c:b;this.St=e},tf:function(){var b=this,c=b.opt,e=b.u,k=b.ub.length-1,h=b.Ik,m=b.Jk,n=b.Ie;e.save().clearAll().fillPanel(b.d,
b.opt.color_bg);e.setLineWidth(c.s_rd_borderWidth).setStrokeStyle(c.color_rd_border).setFillStyle(c.color_fg).beginPath().pathPolygon(5,h,m,n).fill().stroke();e.setLineWidth(b.opt.s_rd_aGridWidth).setStrokeStyle(b.opt.color_rd_aGrid).beginPath(1);for(var s=0;5>s;s++)e.moveTo(h,m).lineTo(b.n(s),b.o(s));e.stroke();e.setLineWidth(c.s_rd_hGridWidth).setStrokeStyle(c.color_rd_hGrid).beginPath(1);for(s=1;s<k;s++)e.pathPolygon(5,h,m,n/k*s);e.stroke();if(c.s_rd_style){var t=b.opt.s_fontSizeY,w=c.color_rd_yLabel,
p=c.color_rd_yLabelBackground,q=c.color_rd_yLabelBorder,A=w.length,z=p.length,u=q.length;l.each(b.ub,function(c,m){var s=m.toString(),G=l.getTextWidth(s),H=b.o(0,n/k*c);e.setLineWidth(1).setStrokeStyle(q[c%u]).setFillStyle(p[c%z]).beginPath();e.pathRect(h-G/2-2,H-t/2,h+G/2+4,H+t/2+2).stroke().fill();e.drawText(h-G/2,H+t/2,s,w[c%A])})}e.restore();b.opt.jm&&b.Hj()},uf:function(){var b=this,c,e,k,h=b.ub[b.ub.length-1],m=b.opt,n=b.j;n.save();l.each(b.Na,function(s,t){n.setGlobalAlpha(m.s_rd_dataBorderGlobalAlpha).setLineWidth(m.s_rd_dataBorderWidth[s%
m.s_rd_dataBorderWidth.length]).setStrokeStyle(m.color_rd_dataBorder[s%m.color_rd_dataBorder.length]).beginPath();l.each(t,function(m,s){isNaN(s)&&(s=0);k=b.Ie*s/h;c=b.n(m,k);e=b.o(m,k);m?n.lineTo(c,e):n.moveTo(c,e)});n.closePath().stroke().setGlobalAlpha(m.s_rd_dataGlobalAlpha).setFillStyle(m.color_rd_dataBackground[s%m.color_rd_dataBackground.length]).fill()});n.restore();b.opt.jm||b.jx()},jx:function(){var b=this,c,e,k,h,m=b.j,n=b.opt.color_rd_text;fontsizeY=b.opt.s_fontSizeY;txtPadding=b.opt.s_rd_textPadding;
r=b.Ie;m.save();l.each(b.b,function(s,t){k=b.n(s,r);h=b.o(s,r);e=b.wm(s);c=b.St[s];h=180>e?h+(fontsizeY/2+txtPadding):h-((t.length-1)*fontsizeY+txtPadding);90==e||270==e?k-=c/2:90<e&&270>e&&(k-=c);l.each(t,function(b,c){m.drawText(k,h,c,n[s%n.length]);h+=fontsizeY})});m.restore()},Hj:function(){var b=this,c,e,k,h=b.u,m=b.opt.color_line,n=b.Ie,s=b.Uq;h.save();l.each(b.b,function(l){c=m[l%m.length];e=b.n(l,n);k=b.o(l,n);h.setFillStyle(c).setStrokeStyle(c).beginPath().pathCircle(e,k,s).setGlobalAlpha(b.opt.s_area_a).fill().setGlobalAlpha(b.opt.s_line_a).stroke()});
h.restore()},zd:function(){this.I=-1;this.g.fj("")},ta:function(b){var c,e,k,h;e=this.Na[0];k=this.Ik;c=this.Jk;h=b.i;k=__MTS.AniMath.getInnerArg(k,c,k+1,c,b.c,h);c>h&&(k=360-k);c=l.floor((126+k)%360/72)%5;h=this.b[c];k=e[c]||0;e=this.Ie*k/100;b.idx=b.J=b.D=c;b.c=this.n(c,e);b.i=this.o(c,e);b.Ta=h.join("<br/>");b.Za=k;b.txt=q.Nb(b.Ta)+q.Nb(b.Za);this.I!=c&&(this.I=c,this.g.fj(b.txt,1).nv(b.c,b.i))}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.regInherit("ViewScatter",__MTS.ViewOne,{main:function(b){__MTS.ViewOne.apply(this,[b]);this.Ag=[0.1,0.5,1,5,10,20,50,100];this.Af=__MTS.ScaleMethod.Gl([1,2,5],-2,13);this.ew(NaN,NaN);this.addEvent("_onInit",this.Fb);this.addEvent("_onSize",this.ni);this.addEvent("_onReScaleBefore",this.mo);this.addEvent("_onDrawBefore",this.Zd);this.addEvent("_onDele_dirLabelY",this.Vy);this.addEvent("_onDrawBG",this.tf);this.addEvent("_onDrawFG",this.uf);this.addEvent("_onFocusIdx",
this.$y);this.addEvent("_onDestroy",this.Eb)},opt:{Kw:0,Yb:q.U,Sv:20,Tv:20},pb:p,Rd:p,Be:p,ym:p,fi:p,I:-1,ew:function(b,c){this.Rd={qh:b,om:c};return this},setData:function(b){var c=[];l.each(b,function(b,e){e.idx=b;e.x=+e.x;isNaN(e.x)||c.push(e)});this.ym=c;b=c.slice();b.sort(function(b,c){return b.x-c.x});var e=[],k=[];l.each(b,function(b,c){e.push(c.x);k.push(c.y)});this.b=e;this.Na=new __MTS.Lines;this.Na.xb(k);this.Be=b;this.fi=__MTS.AniMath.linreg(e,k);this.I=-1;return this},Kb:function(b){var c=
this.ym;c&&0<=b&&b<c.length&&(b=c[b])&&this.g.Sg(b.x,b.y);return this},XB:function(){return this.Be?this.Be[this.I]:p},FF:function(){return this.fi},Fb:function(){this.pb||(this.pb=new __MTS.Scatter(this.opt));this.pb.ya(this.e,this.Ha).la(this.d,this.G).fh(this.u,this.j);return this},ni:function(b,c,e,k){e||(e=0);k||(k=0);this.G.set(e,0,b-e-k,c);this.d.set(this.G);return this},Nr:function(b,c){c<b.min&&(b.min=c);c>b.max&&(b.max=c);return b},Wh:function(){return this.Nr(this.Na.hb(),this.Rd.om)},
Or:function(){var b=this.b;return this.Nr({min:b[0],max:b[b.length-1],ea:NaN},this.Rd.qh)},mo:function(){this.pb.setOption(this.opt).fa(this.b).xa(this.Na).hE(this.Be,this.Rd)},Zd:function(){var b;b=0>this.I?this.ym[0]:this.Be[this.I];this.g.Sg(b.x,b.y);this.triggerEvent("onDrawBefore")},Vy:function(){return this.pb.Bb.Qc===q.left?"L":"R"},tf:function(){this.u.clearAll().fillPanel(this.G,this.opt.color_bg).fillPanel(this.d,this.opt.color_fg);this.pb.Ia().If()},uf:function(b,c){this.pb.Jb(c,b);this.opt.Kw&&
this.fi&&this.kx()},kx:function(){var b=this.j,c=this.e,e=this.fi,k=e[0],h=e[1];b.save().setStrokeStyle(this.opt.color_linreg).setLineWidth(this.opt.s_lineW).beginPath(1);l.each(this.b,function(e,n){var s=c.i(k+n*h);n=c.c(n);e?b.lineTo(n,s):b.moveTo(n,s)});b.stroke().restore()},$y:function(b){this.pb.Ue(b)},Eb:function(){this.pb&&this.pb.destroy()},ta:function(b,c){var e,k,h=b.c,m=b.i,n=this.e,s=this.Be,t=Math.round(this.d.w/100);e=l.findNumIndex(b.J,this.b);e=-1==e?0:-2==e?this.b.length-1:e;if(!s)return b;
k=s[e];for(var w=n.c(k.x),p=n.i(k.y),q=k=w,A=idxR=e;k>=h-t&&0<A;)A--,k=s[A],k=n.c(k.x);for(;q<=h+t&&idxR<s.length-1;)idxR++,k=s[idxR],q=n.c(k.x);idxR=idxR+1>=s.length?idxR:idxR+1;w=this.Kr(h,m,w,p);for(A=0>A-1?A:A-1;A<=idxR;A++)k=s[A],k=this.Kr(h,m,n.c(k.x),n.i(k.y)),k<w&&(e=A,w=k);this.I=e;this.zf(b);k=s[e];b.idx=k.idx;this.triggerEvent("onTipMove",arguments);return b},Kr:function(b,c,e,k){return Math.pow(b-e,2)+Math.pow(c-k,2)},zf:function(b){var c=this.Be[this.I],e=this.e;b.c=e.c(c.x);b.i=e.i(c.y);
b.J=b.Ta=c.x;b.D=b.Za=c.y},ic:function(b,c,e){var k=this.I,h=this.Be;0<c||0>e?k++:(0>c||0<e)&&k--;this.I=k=0>k?0:k>h.length-1?h.length-1:k;this.zf(b);this.triggerEvent("onTipKeyDown",arguments);return b}})});
__MTS.Util.go(function(u,p,l){l.regInherit("_Shell",__MTS.OptClass,{main:function(){__MTS.OptClass.apply(this);this.ac=(new __MTS.ConfigMgr).setDef("");this.Gb=new __MTS.ParamMgr},opt:{Sf:0,gj:1},f:p,ac:p,Gb:p,q:p,Yq:function(){l.ext(this.opt,this.ac.TB());this.opt.gj&&(this.opt.Sf=this.opt.s_is_animate)},init:function(p){this.f=l.getJqElm(p);this.f.addClass("Matisse");this.Yq();this.triggerEvent("_onInit",[this.f]);return this},setParams:function(l){var b=arguments,c=l;2==b.length&&(c={},c[b[0]]=
b[1]);this.q=c=this.Gb.set(c).get();if(c.Rf||""===c.Rf)this.ac.xE(c.Rf,this.f),this.Yq();c.gp&&(this.opt.color_line=this.opt.color_gdn1=this.opt.color_gdn2=c.gp);c.Eu&&(this.opt.color_line=c.Eu);c.Cu&&(this.opt.color_gdn1=c.Cu);c.Du&&(this.opt.color_gdn2=c.Du);this.triggerEvent("_onParams");return this},clearParams:function(){this.q=this.Gb.clear().get();return this},setData:function(){return this},poster:function(){return this},draw:function(){return this},resize:function(){return this},getParams:function(){return this.Gb.$e},
getElm:function(){return this.f?this.f[0]:p},getLegendColor:function(l){(cr=this.opt.color_line||p)&&0<=l&&(cr=cr[l%cr.length]);return cr},destroy:function(){this.Gb.destroy();this.ac.destroy();__MTS.OptClass.prototype.destroy.apply(this,arguments)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.regInherit("_ShellSLD",__MTS.OptClass,{ua:p,Aa:0,yi:q.XOnlyView,k:NaN,p:NaN,ia:NaN,b:p,qs:p,draw:function(){this.Pm();this.Tb();0<this.Aa&&this.Ih();this.triggerEvent("_onBeforePartial");this.df(this.k,this.p);return this},resize:function(){var b=1,c=this.f.find(".mts-view"),b=this.hasTriggerEvent("_onValidResize",[b],b);if(!b)return this;this.triggerEvent("onBeforeResize");c.hide();this.Tb();c.show();this.jc();this.kt();this.triggerEvent("onResize");
return this},moveTipAt:function(b,c){var e=c?q.qc:q.Aw,k=this.b||[],h=k.length-1,m=this.k,n=this.p,s=+b;l.isDate(b)&&(s=l.findDateIndex(b,k),s=-2==s?h:-1==s?0:s);isNaN(s)||s>n?s=n:s<m&&(s=m);if(c||s!=this.ia)this.ia=s,idx=s-m,this.triggerEvent("_onMoveTipAt",[idx,e]);return this},setSliderAt:function(b,c){var e=this.b,k=e.length-1,h=l.isDate(b)?l.findDateIndex(b,e):0<=b?b:NaN,e=l.isDate(c)?l.findDateIndex(c,e):0<c?c:NaN;this.Ck(b,c,h,e,k);return this},Ck:function(b,c,e,k,h,m){var n,s,l=this.p-this.k,
w=this.Wd(q.min);m||(m=h);if(isNaN(e)||-1==e)e=0;if(isNaN(k)||-2==k)k=h;e>k&&(s=e,e=k,k=s);"x"==b&&"x"!=c?e=k-l:"x"==c&&"x"!=b&&(k=e+l);0<=e?(n=1,k?k-e+1<w&&(k=e+w-1):k=e+l):0<k&&(n=1,e=k-l);n&&(0>e&&(e=0),k>h&&(k=m),this.k=e,this.p=k)},setSliderCmd:function(b){this.ok(b);return this},Gt:function(){var b=this.q;0<=b.lq&&(this.Aa=b.lq,b.mq=3==b.lq?1:0);0<=b.mq&&(this.opt.lm=b.mq);b.kq&&(this.opt.s_slider_size=b.kq);b.qw&&(this.opt.s_slider_max=b.qw);b.Xl&&(this.opt.s_slider_min=b.Xl);this.opt.Gw=b.pw?
b.pw:p},cs:function(){this.ia=this.p=this.k=NaN},wd:function(){return this.b?this.b.length:0},Wd:function(b){return this.Vx(b==q.min?this.opt.s_slider_min:b==q.max?this.opt.s_slider_max:this.opt.s_slider_size,this.wd(),this.opt.s_slider_percent_limit)},Vx:function(b,c,e){1>b?b=l.round(c*b):l.isStr(b)&&b.indexOf("%")?(b=l.round(c*l["int"](b)/100),b<e&&(b=e)):(b=l.round(+b),b>c&&(b=c));return b},hf:function(){var b=this.k,c=this.p,e=this.ia-b;0>=e?(e=0,this.ia=b):e>=c-b&&(e=c-b,this.ia=c);return e},
Tb:function(){},df:function(b,c){var e=this.wd()-1;b=this.k=0<=b?b:0;c=this.p=c>=b?c:e;this.triggerEvent("_onPartialData",[b,c]);this.jc()},jc:function(){},Pm:function(){var b,c=this.f.find(".mts-sliderView");2<=this.Aa&&this.yi!=q.XOnlyView?(this.yi=q.XOnlyView,b=1):1===this.Aa&&this.yi!=q.SliderView&&(this.yi=q.SliderView,b=1);this.ua&&b&&(this.ua.destroy(),this.ua=p);this.ua?this.ua.setOption(this.opt):(this.ua=new __MTS[this.yi](this.opt),this.ua.init(c));this.Aa?c.show():c.hide()},Ih:function(){var b=
this.b,c=b.length,e=this.Wd(),k=this.Wd(q.min),h=this.Wd(q.max);c<this.opt.s_slider_limit||(1===this.Aa&&this.triggerEvent("_onSliderDataY"),e<k?e=k:e>h&&(e=h),isNaN(this.k)&&isNaN(this.p)?(this.k=c-e,this.p=c-1):isNaN(this.p)?this.p=c-1:isNaN(this.k)&&(this.k=0>c-e?0:c-e),this.ua.vE(k,h).setData(b,this.qs).ZC(this.ok,this).tl(this.df,this),this.kt())},kt:function(){this.Aa&&this.ua.re(this.k,this.p).Ia().draw()},pk:function(b,c){var e=this.wd();!this.Aa||e<this.opt.s_slider_limit||(b&&(b.preventDefault(),
b.stopPropagation()),this.Eg(c))},Eg:function(b,c){var e;e=this.Wd(q.min);var k=this.Wd(q.max),h=this.wd(),m=h-1;c=1<=c?c:l.round(h*(1>c&&0<c?c:0.05));c=1>c?1:c;var n=this.k,s=this.p;if(0<b)n-=c,s+=c,cnt=s-n+1,cnt>k&&(k>=h?(n=0,s=m):(n=this.k,s=this.p));else if(0>b){s<m&&(s-=c);if(0<=n||s==m)n+=c;cnt=s-n+1;cnt<e&&(s>=m?n=m-(e-1):(n=this.k,s=this.p))}s>m&&(s=m);0>n?n=0:n>s&&(n=s);if(e=this.triggerEvent("_onZoomInOutValid",[n,s]))0<=e.Fc&&(n=e.Fc),0<e.Sc&&(s=e.Sc);n==this.k&&s==this.p||this.ua.re(n,
s).pl()},ok:function(b){var c,e=this.k,k=this.p,h=this.wd()-1,m=this.Wd(q.min);if(0<+b){if(e=h-b+1,k=h,0>e&&(e=0),e!=this.k||k!=this.p)k-e<m&&(e=k-m),c=1}else"<"==b?(e--,k--,0<=e&&(c=1)):">"==b?(e++,k++,k<=h&&(c=1)):"+"==b?this.Eg(1):"-"==b?this.Eg(-1):b&&0==b.indexOf("++")?(b=+b.substr(2),0<b&&this.Eg(1,b)):b&&0==b.indexOf("--")&&(b=+b.substr(2),0<b&&this.Eg(-1,b));c&&this.ua.re(e,k).pl()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS._Shell.prototype;l.regInherit("_ShellOne",__MTS._Shell,{main:function(){__MTS._Shell.apply(this);this.addEvent("_onParams",this.vz,this,p,"_ShellOne",9)},a:p,cc:p,$h:0,Xd:0,Q:1,init:function(b){q.init.apply(this,arguments);this.triggerEvent("_onInitTemplate",[this.f]);this.f.find(".mts-mask").length&&(this.cc=this.f.find(".mts-mask"));b=this.f.find(".mts-view");b.length||(b=this.f);this.a.init(b).setOption(this.opt).Mf(this.Wc,this).me(this.Kc,this).onTipMove(this.pi,
this).Xg(this.ae,this).ul(this.zd,this).Wi(this.$d,this);this.triggerEvent("_onInitViewEvent")},setData:function(){this.$h=this.Xd=0;this.a&&this.a.setData.apply(this.a,arguments);this.$h=1;return this},Tb:function(){var b=this.f.width(),c=this.f.height();this.a&&this.a.setSize(b,c)},poster:function(b){this.cc&&this.cc.addClass("mts-poster").html(__MTS.Template.Nb(b));return this},draw:function(){var b=this;b.triggerEvent("onBeforeDraw");b.triggerEventOrDefaultFn("_onDrawBefore",arguments,function(){b.Tb()});
b.a&&b.triggerEventOrDefaultFn("_onDraw",arguments,function(){b.a.setOption(b.opt).Mb(b.Q).Ia().draw();b.triggerEvent("_onDrawAfter")});b.cc&&b.cc.hasClass("mts-poster")&&b.cc.removeClass("mts-poster");return b},resize:function(){var b=this;b.triggerEventOrDefaultFn("_onResizeBefore",arguments,function(){var c=b.f.find(".mts-view");c.hide();b.Tb();c.show()});b.triggerEventOrDefaultFn("_onResize",arguments,function(){b.a&&b.$h&&(b.a.Ia().draw(),b.triggerEvent("onResize"))});return b},setTipOnOff:function(b){this.Q=
b?1:0;this.a&&this.a.Mb(this.Q);return this},destroy:function(){this.a&&this.a.destroy();q.destroy.apply(this,arguments)},getTipOnOff:function(){var b=this.Q;this.a&&(b=this.a.g.F?0:1);return b},onBeforeDraw:function(b,c,e){return this.addEvent("onBeforeDraw",b,c,p,e)},onDraw:function(b,c,e){return this.addEvent("onDraw",b,c,p,e)},onResize:function(b,c,e){return this.addEvent("onResize",b,c,p,e)},onTipMove:function(b,c,e){return this.addEvent("onTipMove",b,c,p,e)},onDele_ScaleX:function(b,c,e){return this.addEvent("onDele_ScaleLabelX",
b,c,p,e)},onDele_ScaleY:function(b,c,e){return this.addEvent("onDele_ScaleLabelY",b,c,p,e)},vz:function(){var b=this.q;this.opt.ld=b.Wv||"";isNaN(b.Ll)||(this.opt.$i=b.Ll);isNaN(b.Ml)||(this.opt.kd=b.Ml);this.opt.bq=b.Xv?1:0;this.opt.cq=b.Yv?1:0;this.opt.Jl=b.bw||p;this.opt.Rv=b.Zv?0:1;this.opt.Pv=b.Zv?0:1;this.opt.Sa=b.Sa?1:0;this.opt.Nd=2==b.Sa?1:0},$d:function(){this.Xd=1;this.triggerEvent("onDraw",arguments)},pi:function(b,c){b.Ta=__MTS.DataParser.dl(b.Ta,this.opt.ld);this.triggerEvent("onTipMove",
arguments);return b},ae:function(){var b=this.a.g.F;this.opt.Nd&&b&&this.setTipOnOff(1)},zd:function(){this.opt.Nd&&this.setTipOnOff(0)},Wc:function(b){var c={val:b.val,txt:b.txt,cr:b.cr,bg:b.bg};this.hasEvent("onDele_ScaleLabelX")&&(b=(c=this.triggerEvent("onDele_ScaleLabelX",[c]))?l.ext(b,c):p);return b},Kc:function(b){var c={val:b.val,txt:b.txt,cr:b.cr,bg:b.bg};this.hasEvent("onDele_ScaleLabelY")&&(b=(c=this.triggerEvent("onDele_ScaleLabelY",[c]))?l.ext(b,c):p);return b}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template,c=__MTS._ShellOne.prototype;l.regExtClass("_ShellOneSLD",__MTS._ShellOne,__MTS._ShellSLD,{main:function(){__MTS._ShellOne.apply(this);this.addEvent("_onInitTemplate",this.li);this.addEvent("_onInitViewEvent",this.lo);this.addEvent("_onBeforePartial",this.Ny);this.addEvent("_onValidResize",this.so);this.addEvent("_onParams",this.yz,this,p,"_ShellOneSLD",9)},setData:function(b){var c=this;c.cs();c.triggerEventOrDefaultFn("_onSetData",
arguments,function(){c.b=b;c.a&&c.a.setData.apply(c.a,arguments)});return c},onDele_ChartLegend:function(b,c,h){return this.addEvent("onDele_ChartLegend",b,c,p,h)},yz:function(){this.Gt()},so:function(){return this.a?1:0},li:function(c){c.html([b.view(),b.nq()].join(""))},lo:function(){this.a.Xi(this.pk,this).Wg(this.yd,this)},Ny:function(){this.a&&this.a.setOption(this.opt)},yd:function(b){return b=this.hasTriggerEvent("onDele_ChartLegend",[b,this],b)},pi:function(b,k){var h=b.J;this.ia=isNaN(h)?
this.p:this.k+h;return c.pi.apply(this,arguments)},Tb:function(){var b=this.wd(),c=this.f.width(),h=this.f.height(),m=this.Aa?this.ua.gl():0;b<this.opt.s_slider_limit&&(m=0);this.a&&this.a.setSize(c,h-m);m?this.ua.setSize(c,m).show():this.ua.hide()},jc:function(){var b=this.hf();this.a&&this.a.Mb(this.Q).Kb(b,q.qc).Ia().draw()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Template;l.regInherit("Bubble",__MTS.OptClass,{main:function(b){__MTS.OptClass.apply(this,[b]);this.u=new __MTS.APen;this.j=new __MTS.APen},fr:p,u:p,j:p,e:p,d:p,G:p,b:p,ee:p,ji:p,eu:p,xo:p,yo:p,Xq:p,Dm:p,tt:p,Ao:p,Ae:p,Dh:0,xy:25,As:10,ms:1,Zs:10,init:function(b){b=l.getJqElm(b);b.find(".mts-bubble").length||b.append(q.nB());this.fr=b.find(".mts-bubble");this.u.init(b.find(".mts-bubbleBG"));this.j.init(b.find(".mts-bubbleFG"));return this},ya:function(b){this.e=
b;return this},la:function(b,c){this.d=b;this.G=c;return this},bE:function(b){this.ms=b?1:0;return this},fa:function(b){this.b=b;return this},aE:function(b){0<=b&&(this.Dh=b);return this},setData:function(b){this.SB();var c={},e={},k={},h={},m={};l.each(b,function(b,s){var l=s.T,w=+s.sign,p=+s.ob,q=+s.Ab;if(isNaN(q))return!0;s.idx=b;0<w?(c[l]||(c[l]={}),c[l][q]||(c[l][q]=[]),c[l][q].push(s)):0>w&&(e[l]||(e[l]={}),e[l][q]||(e[l][q]=[]),e[l][q].push(s));if(!k[l]||k[l]<p)k[l]=p;if(!h[l]||h[l]<q)h[l]=
q;if(!m[l]||m[l]>q)m[l]=q});this.Qt(c);this.Qt(e);this.ee=c;this.ji=e;this.eu=k;this.xo=h;this.yo=m;return this},setSize:function(){var b=this.G,c=this.d;this.fr.css({width:b.getX2(),height:b.getY2()});this.u.setSize(c.w,c.h,c.x,c.y);this.j.setSize(c.w,c.h,c.x,c.y);return this},kE:function(){var b=this,c=b.opt.color_bubbleUp,e=b.opt.color_bubbleDn,k={},h={},m=[],n=[];if(!b.Dh)return b;l.each(b.b,function(c,e){b.At(b.ee[e],k);b.At(b.ji[e],h)});l.each(k,function(b,c){m.push(c)});l.each(h,function(b,
c){n.push(c)});m.sort(function(b,c){return c.mh-b.mh});n.sort(function(b,c){return c.mh-b.mh});l.each(m,function(h,e){e.cr=h<c.length&&h<b.Dh?c[h]:""});l.each(n,function(c,h){h.cr=c<e.length&&c<b.Dh?e[c]:""});b.Xq=k;b.Dm=m;b.tt=h;b.Ao=n;return b},ep:function(){this.j.clearAll();return this},wB:function(){this.u.clearAll();return this},If:function(){var b=this,c=NaN;b.e.getGapX();if(!b.ee||!b.ji)return b;l.each(b.b,function(e,k){var h=b.eu[k];!isNaN(h)&&(isNaN(c)||h>c)&&(c=h)});b.Ae=[];b.wB();l.each(b.b,
function(e,k){b.ji[k]&&b.Hj(b.ji[k],e,c,-1);b.ee[k]&&b.Hj(b.ee[k],e,c,1)});b.Ae.sort(function(b,c){return b.Pe-c.Pe});return b},Jb:function(b,c){this.ep();b&&this.Ic(b,c);return this},resize:function(){this.setSize().ep().If();return this},SB:function(){var b=this.opt.qF;return b?b.slice(0,this.Dh):[]},aG:function(){return this.jF},vF:function(){return this.Dm},UF:function(){return this.Ao},bC:function(){var b=this,c=NaN,e=NaN,k;b.yo&&b.xo&&l.each(b.b,function(h,m){k=b.yo[m];!isNaN(k)&&(isNaN(c)||
c>k)&&(c=k);k=b.xo[m];!isNaN(k)&&(isNaN(e)||e<k)&&(e=k)});return{min:c,max:e}},OB:function(b,c){var e=p,k=this.Ae,h=[],m=this.As,n=this.Vq(b),s=this.Wq(c);if(isNaN(n)||isNaN(s)||!k||!k.length)return e;for(var l=0,w,q,B;l<k.length;l++){w=k[l];if(w.Pe>n+m)break;else if(w.Pe<n-m)continue;q=n-w.Pe;B=s-w.Nk;q*q+B*B<w.Lk*w.Mk&&h.push(w)}h.length&&(h.sort(function(b,c){return b.Lk-c.Lk}),e=h[0],e.c=this.Vw(e.Pe),e.i=this.Ww(e.Nk));return e},destroy:function(){this.u.destroy();this.j.destroy();__MTS.OptClass.prototype.destroy.apply(this,
arguments)},Qt:function(b){l.each(b,function(b,e){l.each(e,function(b,c){c.sort(function(b,c){return c.ob-b.ob})})})},At:function(b,c){l.each(b,function(b,k){l.each(k,function(b,e){c[e.title]||(c[e.title]={title:e.title,mh:0,cr:""});0<e.ob&&(c[e.title].mh+=e.ob)})})},Hj:function(b,c,e,k){var h=this,m,n=h.As,s,t=h.e,w=h.u,p=h.Ir(k),q=t.Mc.Ld,A=t.getGapX(),t=h.xy;1===h.b.length?A=q/2:A<q/10&&(A=q/10);m=A/2;m>t&&(m=t);l.each(b,function(b,c){var k,s,t,w=0,p=A/(c.length+2);p<n&&(p=n);l.each(c,function(b,
c){k=+c.ob/e;t=k*m;t<n&&(t=n);s=t<p?t:p;w+=2*s;c.Lk=s;c.Mk=t});c.ME=w+h.Zs});w.save().setStrokeStyle(p).setLineWidth(1);l.each(b,function(b,e){var n,m,t,p=e.ME<A?2:1.5,q=h.Zs*k,E=h.Vq(c),B=h.Wq(+b);l.each(e,function(b,c){n=c.Lk;m=c.Mk;t=E+q+n*k;s=h.Jr(k,c);w.setGlobalAlpha(0.8).setFillStyle(s).beginPath().pathOval(t,B,m,m).fill().stroke();q+=p*n*k;c.Pe=t;c.Nk=B;h.Ae.push(c)});h.ms&&w.setGlobalAlpha(1).strokeDashed(E,B,t,B,2)});w.restore()},Ic:function(b){var c=this.Ir(b.sign),e=this.Jr(b.sign,b),
k=this.j;k.save();k.setStrokeStyle(c).setFillStyle(e).beginPath().pathOval(b.Pe,b.Nk,b.Mk,b.Mk).fill().stroke();k.setFillStyle(this.opt.color_fg).beginPath().pathOval(b.Pe,b.Nk,2,2).fill();k.restore()},Vw:function(b){return b+this.d.x},Ww:function(b){return b+this.d.y},Vq:function(b){return this.e?this.e.c(b)-this.d.x:NaN},Wq:function(b){return this.e?this.e.i(b)-this.d.y:NaN},Ir:function(b){return 0<b?this.opt.color_vol_up:this.opt.color_vol_dn},Jr:function(b,c){var e=c&&c.title?c.title:"",k=0<b?
this.Xq:this.tt,h=0<b?this.opt.color_vol_upin:this.opt.color_vol_dnin;e&&k&&k[e]&&k[e].cr&&(h=k[e].cr);return h}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Config;l.regInherit("ConfigMgr",__MTS.BaseClass,{Ch:p,Nm:p,Wm:"",zi:"",setDef:function(b){var c=q.Chart;this.Ch||(this.Ch=l.ext({},c[""]));b&&q.Chart[b]&&(l.ext(this.Ch,c[b]),this.Wm=b);return this},xE:function(b,c){b||(b="");if(b!=this.zi){c&&this.zi&&c.removeClass(this.zi);var e={},k=q.Chart,h=b.split(" "),m=l.ext({},this.Ch);b&&h.length&&(this.Wm&&(e[this.Wm]=1),l.each(h,function(b,c){c&&k[c]&&(l.ext(m,k[c]),e[c]=1)}),l.each(k,function(b,c){if(b&&0<b.indexOf("+")){var h=
1;l.each(b.split("+"),function(b,c){if(!e[c])return h=0,!1});h&&l.ext(m,c)}}),c&&b&&c.addClass(b));this.zi=b;this.Nm=m}},TB:function(){return this.Nm?this.Nm:this.Ch},ZF:function(){return this.zi}})});
__MTS.Util.go(function(u,p,l){__MTS.ConfigTechInit=function(){function p(b,c){var h=b.length,m;b[0]>b[h-1]&&b.reverse();m=b[0];h=b[h-1];return l.ext({Of:b,jd:0,Tc:0,Fl:m,El:h,Xp:m,Wp:h},c)}function b(b,c){l.each(c,function(c,k){b[c]?l.ext(!0,b[c],k):b[c]=k;if(k.opacity){b[c].option||(b[c].option={});var n=b[c].option;n.s_line_a=n.s_vbar_a=k.opacity}})}var c={AVG:{Ug:!0,ov:!0},EMA:{Ug:!0,ov:!0},V:{type:"Volume",Nf:{nm:0.7},option:{Tc:0}},BOB:{Ug:[0]},MAE:{Ug:[0]},SAR:{type:"Cross"},AVGV:{type:"Volume"},
KD:{type:"NPArea",option:p([0,20,50,80,100],{Sk:["","Chart"],Ji:0,Gf:80,Ff:20})},KDFAST:{type:"NPArea",option:p([0,20,50,80,100],{Sk:["","Chart"],Ji:0,Gf:80,Ff:20})},RSI:{type:"NPArea",option:p([0,20,50,80,100],{Sk:["","Chart"],Ji:0,Gf:80,Ff:20})},MACD:{ll:!0,option:{aq:1,Wb:0,Vp:0,jd:0,Tc:0}},WIL:{option:p([-100,-80,-50,-20,0],{Ji:0})},PSY:{option:p([0,25,50,75,100])},ADO:{option:p([0,50,100])},HLO:{option:p([-100,-50,0,50,100])}};b(c,__MTS.Config.MtTech);b(c,__MTS.Config.Tech);return c}});
__MTS.Util.go(function(u,p,l){l.ext(Matisse,{Chart:function(b){return q.reg(b,"Shell")},ChartRotate:function(b){return q.reg(b,"ShellRotate")},Stock:function(b){return q.reg(b,"ShellStock")},Scatter:function(b){return q.reg(b,"ShellScatter")},Bullet:function(b){return q.reg(b,"ShellBullet")},K:function(b){return q.reg(b,"ShellK")},Pie:function(b){return q.reg(b,"ShellPie")},Radar:function(b){return q.reg(b,"ShellRadar")},Bubble:function(b){return q.reg(b,"ShellBubble")},BS:function(b){return q.reg(b,
"ShellBS")},getInst:function(b){return b?q.get(b):q.live()},onInstCreate:function(b,c,e){q.KC(b,c,e)},dateCounter:__MTS.DataParser.dateCounter});var q=__MTS.InterfaceMgr=new function(){var b=this,c=1,e={},k={};u(window).bind("resize",function(){if(__MTS.Config.Chart.s_autoResize){var c=b.live();l.each(c,function(b,c){c.resize()})}});b.KC=function(b,c,e){e||(e="");l.isF(b)&&(k[e]={fn:b,Tg:c})};b.reg=function(h,m){var n=p,s=l.getJqElm(h);if(!s.length)return n;b.clear();n=b.get(h);n||(n=new __MTS[m],
n.init(h),e[c]=n,s.attr("mts",c),c++,l.each(k,function(b,c){c.fn.apply(c.Tg)}));return n};b.get=function(b){var c=p;b=l.getJqElm(b);return b.length?(b=b.attr("mts"))&&e[b]&&(c=e[b],c.isDestroy)?e[b]=p:c:p};b.live=function(){var b=[];l.each(e,function(c,e){e&&!e.isDestroy&&b.push(e)});return b};b.clear=function(){l.each(e,function(b,c){c&&c.isDestroy&&(e[b]=p)});b.live().length||(e={})}}});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.regInherit("KBoundary",__MTS.BaseClass,{main:function(){__MTS.BaseClass.apply(this,arguments);this.N=new __MTS.EventMgr},N:p,bb:p,e:p,d:p,G:p,Jc:p,Yd:50,Xn:0,Yn:0,xi:0,bs:0,wf:5,yc:NaN,ye:NaN,ot:NaN,kg:0,ig:0,jg:0,init:function(b){this.bb=l.getJqElm(b);this.bb.find(".mts-kb").length||this.bb.append(__MTS.Template.pC());this.N.init(b);return this},la:function(b,c){this.d=b;this.G=c;return this},ya:function(b){this.e=b;return this},sE:function(b,
c,e){this.xi=b;this.Yn=c;this.Xn=e;return this},uE:function(b,c){var e,k,h=this.e,m=this.d,n=this.bb.find(".kb-right");this.bs=c;e=h.ab;k=this.ot=h.c(b);0<k&&k<=h.c(e.$k)?(e={display:q.Fd,left:k,bottom:Math.abs(this.G.getY2()-m.getY2())},n.css(e),n.find(".kb-dashline").css(q.height,m.h-2*this.wf)):n.hide();return this},iw:function(b){var c,e;e=this.e;var k=this.d,h=this.bb.find(".kb-top"),m=this.bb.find(".kb-btm"),n={display:q.Fd,right:b};c=e.ve;b=this.yc=Math.min(e.i(c.jp),e.i(c.$k));e=this.ye=Math.max(e.i(c.jp),
e.i(c.$k));this.bb.height()<this.Yd?(h.hide(),m.hide()):(0<=b&&(this.yc=n[q.top]=b,h.css(n),h.find(".kb-dashline").css(q.width,k.w-this.wf)),0<e&&(this.ye=n[q.top]=e,m.css(n),m.find(".kb-dashline").css(q.width,k.w-this.wf)));return this},zc:function(){this.Lg();this.N.reg(".kb-top",q.Vg,this.Gx,this).reg(".kb-btm",q.Vg,this.tx,this).reg(".kb-right",q.Vg,this.Ax,this).reg("global",q.ol,this.dc,this).reg("global",q.Vi,this.mn,this);return this},Lg:function(){this.N.clear();return this},GF:function(){return this.Yd},
gD:function(b,c){return this.addEvent("evt_topMove",b,c)},JC:function(b,c){return this.addEvent("evt_btmMove",b,c)},YC:function(b,c){return this.addEvent("evt_rightMove",b,c)},QC:function(b,c){return this.addEvent("onEndMove",b,c)},destroy:function(){this.N.destroy();__MTS.BaseClass.prototype.destroy.apply(this,arguments)},kr:function(b){b.preventDefault();b.stopPropagation()},Kh:function(b){u(b.currentTarget).addClass("kb-onSelected");this.kr(b)},Gx:function(b){this.kg=1;this.Kh(b)},tx:function(b){this.ig=
1;this.Kh(b)},Ax:function(b){this.jg=1;this.Kh(b)},dc:function(b){if(this.kg||this.ig||this.jg)this.kr(b),this.kg?this.Hx(b):this.ig?this.ux(b):this.jg&&this.Bx(b)},Hx:function(b){var c=this.d;b=l.getPageOffset(b,this.bb).Y;b<c.y+this.wf&&(b=c.y+this.wf);b>this.ye-this.Yd&&(b=this.ye-this.Yd);this.yc=b;this.bb.find(".kb-top").css(q.top,b);l.isIE(8)||this.triggerEvent("evt_topMove",[Math.abs(this.yc-c.y),Math.abs(this.ye-c.getY2())])},ux:function(b){var c=this.d;b=l.getPageOffset(b,this.bb).Y;b>c.getY2()-
this.wf&&(b=c.getY2()-this.wf);b<this.yc+this.Yd&&(b=this.yc+this.Yd);this.ye=b;this.bb.find(".kb-btm").css(q.top,b);l.isIE(8)||this.triggerEvent("evt_btmMove",[Math.abs(this.yc-c.y),Math.abs(this.ye-c.getY2())])},Bx:function(b){var c,e=this.e,k=e.ab,h=e.oe(1);b=l.getPageOffset(b,this.bb).X;c=e.c(k.jp);k=e.c(k.$k);e=e.c(this.bs);b>k?b=k:b<c+h&&(b=c+h);c=l.round((e-b)/h);c<this.Yn?c=this.Yn:c>this.Xn&&(c=this.Xn);b=e-c*h;c!=this.xi&&(this.xi=c,this.ot=b,this.bb.find(".kb-right").css(q.left,b),l.isIE(8)||
this.triggerEvent("evt_rightMove",[this.xi]))},mn:function(){var b=this.d;if(this.kg||this.ig||this.jg)this.bb.find(".mts-kb").removeClass("kb-onSelected"),l.isIE(8)&&(this.kg?this.triggerEvent("evt_topMove",[Math.abs(this.yc-b.y)]):this.ig?this.triggerEvent("evt_btmMove",[Math.abs(this.ye-b.getY2())]):this.jg&&this.triggerEvent("evt_rightMove",[this.xi])),this.triggerEvent("onEndMove");this.jg=this.ig=this.kg=0}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template;l.regInherit("KDraggable",__MTS.BaseClass,{main:function(){__MTS.BaseClass.apply(this,arguments);this.N=new __MTS.EventMgr;this.Zc=new __MTS.TimerMove},f:p,N:p,Jq:p,Iq:p,xm:p,Zc:p,jf:-1,Yd:50,zs:0,Uj:0,fg:0,init:function(c){var e=[];this.f=l.getJqElm(c);if(!this.f.find(".mts-kSplitter").length){var k=0,h=this.f.find(".mts-k").length-1;for(e.push(b.hm("mts-kDrag"));k<h;k++)e.push(b.qC(k));e.push("</div>");this.f.append(e.join(""))}this.N.init(c);
return this},setSize:function(){var b=this,e=[],k=[],h=[],m=0,n=1E3;b.f.find(".mts-k").each(function(b,c){var l=u(c),p=l.height(),l=l.find(".mts-view").height();e.push(m);h.push(l);k.push(m+p-l);l&&n>l&&(n=l);m+=p});b.Jq=e;b.Iq=k;b.xm=h;b.zs=n;l.each(e,function(e,k){var n=h[e],m=e-1;0<=m&&n?b.hl(m).css(q.top,k).addClass("on-kSplitter"):0<=m&&b.hl(m).removeClass("on-kSplitter")});return b},zc:function(){var b=this;b.Lg();b.f.find(".mts-kSplitter").each(function(e){b.N.reg([".mts-kSplitter:eq(",e,")"].join(""),
q.Vg,b.Kh,b)});b.N.reg("global",q.ol,b.dc,b).reg("global",q.Vi,b.mn,b);return b},Lg:function(){this.N.clear();return this},hl:function(b){return this.f.find([".mts-kSplitter:eq(",b,")"].join(""))},hD:function(b,e){return this.addEvent("evt_viewResize",b,e)},destroy:function(){this.N.destroy();this.Zc.destroy();__MTS.BaseClass.prototype.destroy.apply(this,arguments)},Kh:function(b){b=u(b.currentTarget);this.jf=+b.attr("name");b.addClass("move-kSplitter");this.f.addClass("unselectable")},dc:function(b){0<=
this.jf&&this.Zc.on(this.Mh,this,[b]).ip(30)},Mh:function(b){if(0<=this.jf){var e=Math.min(this.Yd,this.zs),k=this.jf,h=this.Jq,m=this.Iq,n=m.length-1,s=this.hl(k);b=l.getPageOffset(b,this.f[0]).Y;var t=b-m[k],h=this.xm[k+1]+(h[k+1]-b);t<e?(h+=t-e,t=e,b=t+m[k]):h<e&&(t+=h-e,h=e,b=this.xm[k+1]+m[k+1]-h);b<m[0]?b=m[0]:b>m[n]&&(b=m[n]);this.Uj=t;this.fg=h;s.css(q.top,b);l.isIE(8)||this.triggerEvent("evt_viewResize",[k,t,h])}},mn:function(){var b=this.jf;0<=this.jf&&(l.isIE(8)&&0<this.Uj&&0<this.fg&&
this.triggerEvent("evt_viewResize",[b,this.Uj,this.fg]),this.hl(b).removeClass("move-kSplitter"),this.setSize(),this.f.removeClass("unselectable"));this.jf=-1;this.Uj=this.fg=0}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Template;l.regInherit("Painting",__MTS.OptClass,{main:function(b){__MTS.OptClass.apply(this,[b]);this.g=new __MTS.TipPainting({qq:1});this.ha=new __MTS.FgTxt;this.u=new __MTS.APen;this.j=new __MTS.APen},hx:p,g:p,ha:p,u:p,j:p,e:p,d:p,G:p,P:p,b:p,gf:p,Jc:p,v:p,Cb:p,Yc:p,fb:"",Xf:"",yj:"",yr:13,or:"Arial",Bi:0,ec:0,Z:0,vc:0,Pb:0,na:-1,Db:-1,k:0,Ca:0,Ea:0,uo:NaN,init:function(b){b=l.getJqElm(b);b.find(".mts-painting").length||(b.append(q.kD()),b.find(".mts-sensor").append('<div class="mts-paintTip"></div><div class="mts-paintTxt"></div>'));
this.hx=b.find(".mts-painting");this.u.init(b.find(".mts-paintBG"));this.j.init(b.find(".mts-paintFG"));this.g.init(b.find(".mts-paintTip")).Kd(this.ta,this).hide();this.ha.init(b.find(".mts-paintTxt"));return this},oE:function(b){this.uo=+b},ya:function(b){this.e=b;this.g.ya(b);return this},la:function(b,c){this.d=b;this.G=c;this.g.la(b,c).setSize();this.ha.setSize(b.getX2());return this},gE:function(b){this.k=b;return this},fa:function(b){this.b=b;return this},fE:function(b){for(var c=b.length-
1;0<=c&&!b[c];c--);this.gf=b.slice(0,c+1);return this},xa:function(b){this.Jc=b;return this},qe:function(b){this.P&&this.he();this.P=b;this.g.qe(b);return this},setData:function(b){var c=this,e=[];l.isA(b)&&b.length&&(c.Yc={},l.each(b,function(b,h){h.txtID&&h.txt?(+h.txtID>=c.Bi&&(c.Bi=+h.txtID+1),c.Yc[h.txtID]=h,e.push(h)):h.points&&h.points.length&&e.push(h)}),c.v=e);return c},setSize:function(){var b=this.d,c=b.getX2(),b=b.getY2();this.u.setSize(c,b);this.j.setSize(c,b);this.jc();return this},
refresh:function(b){(b||0<=this.na)&&this.jc();return this},clearData:function(){this.Zq();return this},jq:function(b,c,e){"pEraserAll"==b&&(this.Zq(),b=this.fb);var k=b+"_init";this.Xf=(this.fb=b)?c?c:"pArrowUp"==b?this.opt.color_arrowUp:"pArrowDown"==b?this.opt.color_arrowDown:this.opt.color_paint:"";this.yj="pOval"==b||"pRect"==b?e?e:this.opt.color_paintBg:"";this.Pb&&(this.Pb=0,this.na=-1,this.triggerEvent("offEdit",[this]),this.Ph());b?this.g.show():this.g.hide();this.g.xB().addClass(b);b&&"pEdit"!=
b&&this.g.addClass("pActive");if(this[k])this[k]();this.triggerEvent("modeStatus",[this,this.fb,this.Xf,this.yj]);return this},gw:function(b,c){var e;if(b)if(this.Pb&&0<=this.na){if(e=this.v[this.na])c?e.crBg=b:e.cr=b,this.triggerEvent("onData",[this]);this.bc().Ic()}else c?this.yj=b:this.Xf=b;return this},nE:function(){this.Pb&&0<=this.na&&this.v&&this.v[this.na]&&(this.v.splice(this.na,1),this.na=-1,this.Ph())},yu:function(){var b=this;l.each(b.Yc,function(c,e){e&&!e.txt&&(b.ha.Hl(c),b.Yc[c]=p)});
return b},setText:function(b,c,e){e||(e={});this.Yc&&this.Yc[b]&&(b=this.Yc[b],b.txt=l.isStr(c)?c:"",this.Jt(b,e),this.pText_draw.apply(this,[b]));return this},zc:function(){this.Wf();this.g.zc();return this},destroy:function(){this.g.destroy();this.u.destroy();this.j.destroy();this.P&&this.he();__MTS.OptClass.prototype.destroy.apply(this,arguments)},TE:function(){var b=this,c,e,k=0,h,m=[],n=b.k;l.each(b.v,function(s,t){var w=1;t.points&&(w=1,l.each(t.points,function(m,s){isNaN(s.x)?(s.label?s.x=
l.findDateIndex(s.label,b.gf):"pHori"==t.mode&&(s.x=b.k,s.label=b.gf[s.x]),"pFibTime"==t.mode&&t.points[0].label==t.points[1].label&&(t.points[0].x--,t.points[0].label=b.gf[t.points[0].x]||"")):(!e&&s.label&&(e=1,c=l.findDateIndex(s.label,b.gf),0<=c&&(k=c-s.x)),k&&(s.x+=k));isNaN(s.y)&&0<=s.x&&b.Jc&&(c=s.x-n,h=b.Jc.dd(),0>c?c=0:c>=h.length&&(c=h.length-1),s.y=h[c]);if(0>s.x||isNaN(s.x)||isNaN(s.y))return w=0,!1}));w&&(t.cr||(t.cr="pArrowUp"==t.mode?b.opt.color_arrowUp:"pArrowDown"==t.mode?b.opt.color_arrowDown:
b.opt.color_paint),t.crBg||"pOval"!=t.mode&&"pRect"!=t.mode||(t.crBg=b.opt.color_paintBg),m.push(t))});b.v=m;return b},HF:function(){return this.fb},Ti:function(){var b=[],c=this.gf;l.each(this.v||[],function(e,k){k.points&&l.each(k.points,function(b,e){!e.label&&0<=e.x&&c[e.x]&&(e.label=c[e.x])});k.mode&&"pEdit"!=k.mode&&b.push(k)});return b},BF:function(){return this.na},XC:function(b,c){return this.addEvent("modeStatus",b,c)},onStart:function(b,c,e){return this.addEvent("onStart",b,c,p,e)},NC:function(b,
c,e){return this.addEvent("onEdit",b,c,p,e)},OC:function(b,c,e){return this.addEvent("offEdit",b,c,p,e)},bD:function(b,c,e){return this.addEvent("onText",b,c,p,e)},LC:function(b,c,e){return this.addEvent("onData",b,c,p,e)},VC:function(b,c,e){return this.addEvent("onFlushModeChange",b,c,p,e)},Qw:function(b,c){var e=this.e,k=this.Jc.ed(0);if(k&&4==k.length){var h=e.i(c),m=k[0][b],n=e.i(m),s=k[1][b],l=e.i(s),w=k[2][b],p=e.i(w),k=k[3][b],e=e.i(k);7>l-h&&0<=l-h?c=s:7>h-p&&0<=h-p?c=w:5>Math.abs(e-h)?c=
k:5>Math.abs(n-h)&&(c=m)}return c},Vh:function(b){if(!b)return-1;var c=this,e=-1,k=b.mode+"_isPointOn";b.points&&1<b.points.length&&c[k]&&l.each(b.points,function(h){if(c[k](b,h))return e=h,!1});return e},ny:function(){this.Bi++;return this.Bi},Vr:function(b){return{x:this.n(b.points[0].x),y:this.o(b.points[0].y),txt:b.txt,cr:b.cr,bg:b.bg||"",bold:b.bold||0,italic:b.italic||0,underline:b.underline||0,font:b.font||this.yr,family:b.family||this.or}},Jt:function(b,c){b.font=0<c.font?+c.font:this.yr;
b.family=c.family?c.family:this.or;b.bold=c.bold?1:0;b.italic=c.italic?1:0;b.underline=c.underline?1:0;c.cr&&(b.cr=c.cr);c.bg&&(b.bg=c.bg);return b},Oo:function(){var b=0,c;this.Jc&&(c=this.Jc.hb(),isNaN(c.max)||isNaN(c.min)||(b=1));return b},ta:function(b){var c,e=this.uo;c=this.e;var k=this.b,h=this.Jc.hb().dp,m=l.round(b.J);m>=k.length?m=k.length-1:0>m&&(m=0);b.J=m;b.c=c.c(m);b.Ta=k[m];b.D=this.Qw(m,b.D);b.i=c.i(b.D);b.Za=l.fmtNum(b.D,h);this.Ca=m+this.k;c=b.D;!isNaN(e)&&e&&(c=l.round(e*(1+c/100),
6));this.Ea=c;return b},Zq:function(){this.Yc=this.v=this.Cb=p;this.ha.Wk();this.Pb=0;this.na=-1;this.triggerEvent("offEdit",[this]);this.Db=-1;this.Bi=0;return this.Jm().bc()},Lm:function(b){b=b?b.txtID:"";var c=this.ha.Gh;c.find(".mts-txtOn").removeClass("mts-txtOn");b&&(c=this.ha.Ui(b))&&c.addClass("mts-txtOn")},bc:function(){this.j.clearAll();return this},Jm:function(){this.u.clearAll();return this},hr:function(){var b=this,c=b.d,e=b.G;b.v&&b.v.length&&b.Oo()&&(l.each(b.v,function(c,h){if(b.Pb&&
c==b.na)return!0;var e=h.mode+"_draw";if(h&&b[e])b[e](h,b.u)}),b.u.clearRect(0,0,e.getX2(),c.y).clearRect(0,0,c.x,e.getY2()));return b},gn:function(b,c){if(!b||!b.mode||0>c)return this;var e=b.mode+"_pointOn";if(this[e])this[e](b,c,this.j);return this},ag:function(b){if(!b||!b.mode)return this;var c=b.mode+"_mouseOn";if(this[c])this[c](b,this.j);return this},Ic:function(b){var c=this.Pb&&this.v&&this.v[this.na]?this.v[this.na]:this.Cb,e=this.d,k=this.G;if(c&&this.Oo()){var h=c.mode+"_draw";if(this[h])this[h](c,
this.j);b||this.ag(c);this.j.clearRect(0,0,k.getX2(),e.y).clearRect(0,0,e.x,k.getY2())}return this},dt:function(){var b=this.Cb;b&&(this.v||(this.v=[]),this.Yc||(this.Yc={}),this.v.push(b),b.txtID&&(this.Yc[b.txtID]=b),this.Cb=p);return this},Ph:function(){this.dt();this.Lm();this.Jm().hr();this.bc().Ic();this.triggerEvent("onData",[this]);return this},Qh:function(){var b=this.Cb?this.Cb.cr:this.Xf;this.dt();this.jq("pEdit",b);this.na=this.v.length-1;this.triggerEvent("onFlushModeChange",[this,"pEdit"]);
return this.Ph()},jc:function(){var b=this.na;this.Db=this.na=-1;this.Lm();(this.Cb||0<=b)&&this.bc();this.Cb&&this.Ic();this.v&&this.Jm().hr();this.triggerEvent("offEdit",[this]);return this},Wf:function(){this.ec||(this.ec=1,this.P.$g("Painting",{start:this.Fe,hover:this.dc,move:this.dc,leave:this.Lh,gEnd:this.Vc},this))},he:function(){this.ec=0;this.P.jj("Painting")},Fe:function(b){if(this.fb){var c=0,e=this.fb+"_start";this.Z=1;this.Cb||this.Pb||"pEdit"==this.fb||(this.Cb={mode:this.fb,cr:this.Xf,
crBg:this.yj});if(this[e])this[e](this.Cb,b);"pEdit"==this.fb&&0<=this.na&&this.v.length&&(c=1);this.triggerEvent("onStart",[this,b,c])}},dc:function(b){if(this.fb&&(this.Z||this.vc)){var c=this.fb+"_move";"pEdit"!==this.fb&&(b.preventDefault(),b.stopPropagation());if(this[c]&&(this.Cb||this.vc))this[c](this.Cb,b)}},Vc:function(b){var c;c=this.fb;var e=c+"_end";if(this.Z&&c&&this.Oo()){if(this[e]&&(this.Cb||this.vc))this[e](this.Cb,b);"pEdit"==this.fb&&c!=this.fb&&0<=this.na&&this.v.length&&(c=this.v[this.na],
c.cr||(c.cr=this.opt.color_paint),this.triggerEvent("onEdit",[this,b,c.mode,c.cr,c.crBg]))}this.Z=0},Lh:function(){if(this.fb){var b=this.fb+"_out";if(this[b])this[b](this.Cb)}}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Painting.prototype,b=__MTS.Painting.FC=function(b,c){b+="_";l.each(c,function(c,h){l.isF(h)&&(q[b+c]=h)});return c};u=__MTS.Painting.rG=function(c,h,e){e=l.ext({},h,e);return b(c,e)};l.ext(q,{Sd:2,Zf:15,gx:15,n:function(b){return this.e.c(b-this.k)},o:function(b){var c=this.uo;b=isNaN(c)||!c?b:l.round(100*(b/c-1),2);return this.e.i(b)},qr:function(b,c,h,e){return{x:this.Qx(b,c,h,e),y:this.Rx(b,c,h,e)}},Qx:function(b,c,h,e){var k=this.d,m=b,l=k.getY2();h-=
b;e-=c;Math.abs(h)>=Math.abs(e)?m=0>h?k.x:k.getX2():0>e?m=b+h*(k.y-c)/e:0<e&&(m=b+h*(l-c)/e);return m},Rx:function(b,c,h,e){var k=this.d,m=k.getX2();h-=b;e-=c;var l=c;Math.abs(e)>=Math.abs(h)?l=0>e?k.y:k.getY2():0>h?l=c+e*(k.x-b)/h:0<h&&(l=c+e*(m-b)/h);return l},Uh:function(b,c,h,e,k,m){return h===k?Math.abs(b-h):e===m?Math.abs(c-e):Math.abs(((b-h)*(c-m)-(c-e)*(b-k))/Math.sqrt(Math.pow(h-k,2)+Math.pow(e-m,2)))}});var c=b("pLine",{init:function(){this.vc=0},start:function(b){b.points||(b.points=[{x:this.Ca,
y:this.Ea}],this.bc().Ic(),this.g.addClass("tipDown"))},move:function(b){b.points[1]={x:this.Ca,y:this.Ea};this.bc().Ic()},end:function(b){var c;if(2==b.points.length){if(c=b.points[0],b=b.points[1],c.x!==b.x||c.y!==b.y)this.Qh(),this.g.removeClass("tipDown")}else this.vc=1},isPointOn:function(b,c){if(b.points&&!(2>b.points.length)&&b.points[c]){var h=b.points[c],e=this.gx,k=this.Sd,m=this.n(this.Ca)-this.n(h.x)-k,h=this.o(this.Ea)-this.o(h.y)-k;return Math.sqrt(m*m+h*h)<e?1:0}},pointOn:function(b,
c,h){if(b.points&&b.points[c]){var e=b.points[c];c=this.n(e.x);e=this.o(e.y);h.save().setLineWidth(1).beginPath(1).setStrokeStyle(b.cr).pathCircle(c,e,10).stroke().beginPath().setFillStyle(b.cr).pathCircle(c,e,3).fill().restore()}},isMouseOn:function(b){if(b.points&&!(2>b.points.length)){var c=0,h=this.Sd,c=this.n(this.Ca)+h,h=this.o(this.Ea)+h,e=this.n(b.points[0].x),k=this.o(b.points[0].y),m=this.n(b.points[1].x),l=this.o(b.points[1].y),c=this.Uh(c,h,e,k,m,l)<this.Zf&&c>=Math.min(e,m)&&c<=Math.max(e,
m)&&h>=Math.min(k,l)&&h<=Math.max(k,l)?1:0;!c&&this.Pb&&0<=this.Vh(b)&&(c=1);return c}},mouseOn:function(b,c){c.save().setStrokeStyle(b.cr).setLineWidth(1);for(var h=0,e,k;h<b.points.length;h++)e=this.n(b.points[h].x),k=this.o(b.points[h].y),c.beginPath().setFillStyle(this.opt.color_paint_mouseOnBg).pathCircle(e,k,5).fill().beginPath(1).pathCircle(e,k,5).stroke().beginPath().setFillStyle(b.cr).pathCircle(e,k,3).fill();c.restore()},draw:function(b,c){if(b.points&&2==b.points.length){var h=this.n(b.points[0].x),
e=this.o(b.points[0].y),k=this.n(b.points[1].x),m=this.o(b.points[1].y);c.save().setStrokeStyle(b.cr).beginPath(1).pathLine(h,e,k,m).stroke().restore()}}});u("pTrend",c,{isMouseOn:function(b){if(b.points&&!(2>b.points.length)){var c=this.Sd,h=this.n(this.Ca)+c,c=this.o(this.Ea)+c,e=this.n(b.points[0].x),k=this.o(b.points[0].y),m=this.n(b.points[1].x);b=this.o(b.points[1].y);return this.Uh(h,c,e,k,m,b)<this.Zf?1:0}},draw:function(b,c){if(b.points&&2==b.points.length){var h=this.n(b.points[0].x),e=
this.o(b.points[0].y),k=this.n(b.points[1].x),m=this.o(b.points[1].y);if(h!==k||e!==m){var l=this.qr(h,e,k,m),h=this.qr(k,m,h,e);c.save().setStrokeStyle(b.cr).beginPath(1).pathLine(l.x,l.y,h.x,h.y).stroke().restore()}}}});var e=u("pHori",c,{move:function(b){b.points&&(b.points[0].x=this.Ca,b.points[0].y=this.Ea,this.bc().Ic())},end:function(b){b.points&&this.Qh()},isMouseOn:function(b){var c=this.Sd;return Math.abs(this.o(this.Ea)+c-this.o(b.points[0].y))<this.Zf?1:0},draw:function(b,c){var h=this.d;
if(b.points&&b.points.length){var e=this.o(b.points[0].y);c.save().setStrokeStyle(b.cr).beginPath(1).pathLine(h.x,e,h.getX2(),e).stroke().restore()}}});u("pVert",e,{isMouseOn:function(b){var c=this.Sd;return Math.abs(this.n(this.Ca)+c-this.n(b.points[0].x))<this.Zf?1:0},draw:function(b,c){var h=this.d;if(b.points&&b.points.length){var e=this.n(b.points[0].x);c.save().setStrokeStyle(b.cr).beginPath(1).pathLine(e,h.y,e,h.getY2()).stroke().restore()}}});var k=u("pArrowUp",c,{init:function(){this.vc=
1},move:function(b){b&&b.points&&(b.points[0].x=this.Ca,b.points[0].y=this.Ea);this.bc();b&&this.Z&&this.ag(b);k.gr(this.j,this.n(this.Ca),this.o(this.Ea),this.Xf,k.oj(this.fb),this.Z?1:0.5)},end:function(b){b.points&&this.Qh();this.vc=1},out:function(){this.bc()},isMouseOn:function(b){if(!b)return 0;var c=k.oj(b.mode),h=this.Sd,e=k.Qo,m=k.Hn,l=this.n(b.points[0].x);b=this.o(b.points[0].y);var p=this.n(this.Ca)+h,h=this.o(this.Ea)+h;return p>=l-e/2&&p<=l+e/2&&0<=(h-b)*c&&0>=(h-b-1.5*m*c)*c?1:0},mouseOn:function(b,
c){if(b&&b.points){var h=k.oj(b.mode),e=k.Qo,m=k.Hn,l=this.n(b.points[0].x),p=this.o(b.points[0].y);c.save().setGlobalAlpha(0.2).setFillStyle(this.opt.color_paint).beginPath().pathRect(l-e/2-2,p-2*h,l+e/2+2,p+h*m*1.5+2*h).fill().restore()}},draw:function(b,c){var h=this.n(b.points[0].x),e=this.o(b.points[0].y),m=k.oj(b.mode);b.points&&b.points.length&&k.gr(c,h,e,b.cr,m)},Qo:12,Hn:9,fg:16,oj:function(b){return"pArrowUp"==b?1:-1},gr:function(b,c,h,e,m,l){var p=k.Qo,q=k.Hn,u=k.fg,F=0<m?2:0;l||(l=1);
b.save().setGlobalAlpha(l).setFillStyle(e).beginPath().pathArrow(c,h,p,q,F).pathRect(c-p/4,h+m*q,c+p/4,h+m*u).fill().restore()}});u("pArrowDown",k);e=u("pRect",c,{isMouseOn:function(b){if(b.points&&!(2>b.points.length)){var c,h=this.Sd;c=this.n(this.Ca)+h;var h=this.o(this.Ea)+h,e=this.n(b.points[0].x),k=this.o(b.points[0].y),m=this.n(b.points[1].x),l=this.o(b.points[1].y);c=c>=Math.min(e,m)&&c<=Math.max(e,m)&&h>=Math.min(k,l)&&h<=Math.max(k,l)?1:0;!c&&this.Pb&&0<=this.Vh(b)&&(c=1);return c}},draw:function(b,
c){if(!(2>b.points.length)){var h=this.n(b.points[0].x),e=this.o(b.points[0].y),k=this.n(b.points[1].x),m=this.o(b.points[1].y);if(h!==k||e!==m)c.save(),b.crBg&&c.setGlobalAlpha(this.opt.s_paintBg_a).setFillStyle(b.crBg).beginPath().pathRect(h,e,k,m).fill(),c.setGlobalAlpha(1).setLineWidth(1).setStrokeStyle(b.cr).beginPath(1).pathRect(h,e,k,m).stroke(),c.restore()}}});u("pOval",e,{draw:function(b,c){if(!(2>b.points.length)){var h=this.n(b.points[0].x),e=this.o(b.points[0].y),k=this.n(b.points[1].x),
m=this.o(b.points[1].y),l=(h+k)/2,p=(e+m)/2;if(h!==k||e!==m)c.save(),b.crBg&&c.setGlobalAlpha(this.opt.s_paintBg_a).setFillStyle(b.crBg).beginPath().pathOval(l,p,Math.abs(l-h),Math.abs(p-e)).fill(),c.setGlobalAlpha(1).setLineWidth(1).setStrokeStyle(b.cr).beginPath(1).pathOval(l,p,Math.abs(l-h),Math.abs(p-e)).stroke(),c.restore()}}});u("pSpeed",c,{draw:function(b,c){if(!(2>b.points.length)){var h=this.d.w,e=this.n(b.points[0].x),k=this.o(b.points[0].y),m=this.n(b.points[1].x),l=this.o(b.points[1].y);
if(e>m)var p=e,q=k,e=m,k=l,m=p,l=q;p=Math.ceil(h/Math.abs(m-e));h=(m-e)*p;p*=l-k;h&&c.save().setLineWidth(1).setStrokeStyle(b.cr).strokeDashed(e,k,m,l,4).beginPath(1).moveTo(m,l).lineTo(m+h,l+p).moveTo(e,k).lineTo(e+3*h,k+p).moveTo(e,k).lineTo(e+3*h,k+2*p).stroke().restore()}}});u("pGann",c,{draw:function(b,c){if(!(2>b.points.length)){var h=this.d.w,e=this.n(b.points[0].x),k=this.o(b.points[0].y),m=this.n(b.points[1].x),l=this.o(b.points[1].y),p=Math.ceil(h/Math.abs(m-e)),h=(m-e)*p,p=(l-k)*p;(h||
p)&&c.save().setLineWidth(1).setStrokeStyle(b.cr).strokeDashed(e,k,m,l,4).beginPath(1).moveTo(m,l).lineTo(m+h,l+p).moveTo(e,k).lineTo(e+h,k+2*p).moveTo(e,k).lineTo(e+h,k+3*p).moveTo(e,k).lineTo(e+h,k+4*p).moveTo(e,k).lineTo(e+h,k+8*p).moveTo(e,k).lineTo(e+2*h,k+p).moveTo(e,k).lineTo(e+3*h,k+p).moveTo(e,k).lineTo(e+4*h,k+p).moveTo(e,k).lineTo(e+8*h,k+p).stroke().restore()}}});u("pFibFan",c,{draw:function(b,c){if(!(2>b.points.length)){var h=this.d.w,e=this.n(b.points[0].x),k=this.o(b.points[0].y),m=
this.n(b.points[1].x),l=this.o(b.points[1].y),p=Math.ceil(h/Math.abs(m-e)),h=(m-e)*p,p=(l-k)*p;(h||p)&&c.save().setLineWidth(1).setStrokeStyle(b.cr).strokeDashed(e,k,m,l,4).beginPath(1).moveTo(m,l).lineTo(m+h,l+p).moveTo(e,k).lineTo(e+h,k+0.618*p).moveTo(e,k).lineTo(e+h,k+0.5*p).moveTo(e,k).lineTo(e+h,k+0.382*p).stroke().restore()}}});u("pFibArc",c,{draw:function(b,c){if(!(2>b.points.length)){var h,e,k=Math.PI,m=this.n(b.points[0].x),l=this.o(b.points[0].y),p=this.n(b.points[1].x),q=this.o(b.points[1].y);
m>p&&(e=m,h=l,m=p,l=q,p=e,q=h);h=p-m;e=q-l;if(h||e)h=Math.sqrt(h*h+e*e),e=0>e?0:1,c.save().setLineWidth(1).setStrokeStyle(b.cr).strokeDashed(m,l,p,q,4).beginPath(1).moveTo(p+0.382*h,q).arc(p,q,0.382*h,0,k,e).stroke().beginPath(1).moveTo(p+0.5*h,q).arc(p,q,0.5*h,0,k,e).stroke().beginPath(1).moveTo(p+0.618*h,q).arc(p,q,0.618*h,0,k,e).stroke().restore()}}});var h=u("pFibRet",c,{Nz:"0 0.236 0.382 0.500 0.618 1.000 1.618 2.618 4.236".split(" "),draw:function(b,c){if(!(2>b.points.length)){var e=this,k=
[],m,p=e.d,q=b.points[0],z=b.points[1],u=z.y-q.y;if(u){l.each(h.Nz,function(b,c){var h=q.y+u*+c;k.push({y:h,i:e.o(h),txt:c})});m=k[0];c.save().setLineWidth(1).setStrokeStyle(b.cr);c.strokeDashed(e.n(q.x),e.o(q.y),e.n(z.x),e.o(z.y),3).strokeDashed(p.x,m.i,p.getX2(),m.i,5);c.beginPath(1);for(z=1;z<k.length;z++)m=k[z],c.pathLine(p.x,m.i,p.getX2(),m.i);c.stroke();c.setFont(12);for(z=1;z<k.length;z++)m=k[z],(0<u&&(z==k.length-1||16<Math.abs(m.i-k[z+1].i))||0>u&&16<Math.abs(m.i-k[z-1].i))&&c.drawText(p.x+
2,m.i-2,m.txt,b.cr);c.restore()}}}}),m=u("pFibTime",c,{draw:function(b,c){if(!(2>b.points.length)){var h,e=[],k=this.d,l=m.Mx,p=b.points[0],q=b.points[1],u=q.x-p.x,F=0;p.c=this.n(p.x);q.c=this.n(q.x);p.txt=0;e.push(p);if(0<u)for(var D=1;D<l.length;D++){h=u+F;F=u;u=h;h={x:p.x+h,c:this.n(p.x+h),txt:l[D]};if(h.c>=k.getX2())break;e.push(h)}else q.txt=1,e.push(q);c.save().setLineWidth(1).setStrokeStyle(b.cr).strokeDashed(p.c,this.o(p.y),q.c,this.o(q.y),4);for(D=0;D<e.length;D++)h=e[D],c.strokeDashed(h.c,
k.y,h.c,k.getY2());c.setFont(12);for(D=0;D<e.length;D++)h=e[D],(D==e.length-1||14<Math.abs(h.c-e[D+1].c))&&c.drawText(h.c+2,k.getY2()-2,h.txt,b.cr);c.restore()}},Mx:[1,1,2,3,5,8,13,21,34,55,89,144,233,377,610,987,1597,2584,4181,6765,10946,17711,28657,46368,75025,121393,196418,317811,514229,832040]});u("pLR",c,{isMouseOn:function(b){var c,h=0;c=this.Sd;var e=this.Zf,k=b.FB,m=this.n(this.Ca)+c,l=this.o(this.Ea)+c;if(k&&4==k.length)for(var p=0;3>p;p++)if(c=k[p]+k[3]*m,Math.abs(l-c)<e)return 1;2==b.points.length&&
this.Pb&&0<=this.na&&(k=this.n(b.points[0].x),b=this.n(b.points[1].x),m>k-e&&m<b+e&&(h=1));return h},mouseOn:function(b,h){if(!(2>b.points.length)){var e=this.d;e.getY2();this.n(b.points[0].x);this.n(b.points[1].x);c.mouseOn.apply(this,[b,h]);h.save().setGlobalAlpha(0.3).setFillStyle(this.opt.color_paint).beginPath().pathRect(this.n(b.points[0].x),e.y,this.n(b.points[1].x),e.getY2()).fill().restore()}},draw:function(b,c){if(!(2>b.points.length)){var h=this.d.w,e=this.Jc.ed(0);if(!(4>e.length)){var k=
0,m=0,l,q=[],u=[],F=[],D=[],J=0,G=0,H=b.points[0].x-this.k,K=b.points[1].x-this.k;if(H!=K){K<H&&(l=H,H=K,K=l);for(l=H;l<=K;l++)q.push(this.n(l+this.k)),u.push(this.o(e[1][l])),F.push(this.o(e[2][l])),D.push(this.o(e[3][l]));for(l=0;l<q.length;l++)k+=q[l];k/=q.length;for(l=0;l<D.length;l++)m+=D[l];m/=D.length;for(l=0;l<q.length;l++)J+=Math.pow(q[l]-k,2);for(l=0;l<q.length;l++)G+=(q[l]-k)*(D[l]-m);var e=G/J,k=m-e*k,L,M,I,N,h=h+100,m=k+-100*e,D=k+e*h;for(l=0;l<q.length;l++){G=k+e*q[l];J=G-u[l];G-=F[l];
if(!L||J>L)L=J,I=k-L;if(!M||G<M)M=G,N=k-M}L!=p&&M!=p&&(l=I+-100*e,q=I+e*h,u=N+-100*e,F=N+e*h,b.FB=[k,I,N,e],c.save().setLineWidth(1).setStrokeStyle(b.cr).beginPath().moveTo(-100,m).lineTo(h,D).moveTo(-100,l).lineTo(h,q).moveTo(-100,u).lineTo(h,F).stroke().restore())}}}}});u("pPara",c,{move:function(b){var c=b.points[0];if(1!==b.points.length||c.x!==this.Ca||c.y!==this.Ea)3==b.points.length?b.points[2]={x:this.Ca,y:this.Ea}:b.points[1]={x:this.Ca,y:this.Ea},this.bc().Ic()},end:function(b){3==b.points.length?
(this.Qh(),this.g.removeClass("tipDown")):(2==b.points.length&&(b.points[2]={x:this.Ca,y:this.Ea}),this.vc=1)},isMouseOn:function(b){if(b.points&&!(3>b.points.length)){var c,h=this.Sd;c=this.Zf;var e=this.n(this.Ca)+h,h=this.o(this.Ea)+h,k=this.n(b.points[0].x),m=this.o(b.points[0].y),l=this.n(b.points[1].x),p=this.o(b.points[1].y),q=this.n(b.points[2].x),u=this.o(b.points[2].y),q=this.Uh(q,u,k,m,l,p),e=this.Uh(e,h,k,m,l,p)%q;c=e<c||e-q>-1*c?1:0;!c&&this.Pb&&0<=this.Vh(b)&&(c=1);return c}},draw:function(b,
c){if(!(2>b.points.length)){var h,e,k=3===b.points.length?1:0,m=this.n(b.points[0].x),l=this.o(b.points[0].y);e=this.n(b.points[1].x);h=this.o(b.points[1].y);var p=k?this.n(b.points[2].x):NaN,q=k?this.o(b.points[2].y):NaN,u=this.d,D=u.w,J=u.h,G=u.x,u=u.y;if(m!==e||l!==h){c.save().setLineWidth(1).setStrokeStyle(b.cr).beginPath(1);if(l===h){if(c.moveTo(G,l).lineTo(G+D,l),k&&5<=Math.abs(q-l))for(e=h=l;;){h-=Math.abs(q-l);e+=Math.abs(q-l);if(h<u&&e>u+J)break;c.moveTo(G,h).lineTo(G+D,h);c.moveTo(G,e).lineTo(G+
D,e)}}else if(m===e){if(c.moveTo(m,u).lineTo(m,u+J),k&&5<=Math.abs(p-m))for(e=h=m;;){h-=Math.abs(p-m);e+=Math.abs(p-m);if(h<G&&e>G+D)break;c.moveTo(h,u).lineTo(h,u+J);c.moveTo(e,u).lineTo(e,u+J)}}else if(c.moveTo((m-e)/(l-h)*(u-h)+e,u).lineTo((e-m)/(h-l)*(u+J-l)+m,u+J),k&&(D=Math.sqrt(D*D+J*J),G=this.Uh(p,q,m,l,e,h),5<=G))for(var D=Math.ceil(D/G),p=p-m,q=q-l,G=m,k=l,H=e,K=h;0<=D;)G-=p,k-=q,H-=p,K-=q,m+=p,l+=q,e+=p,h+=q,c.moveTo((G-H)/(k-K)*(u-K)+H,u).lineTo((H-G)/(K-k)*(u+J-k)+G,u+J),c.moveTo((m-
e)/(l-h)*(u-h)+e,u).lineTo((e-m)/(h-l)*(u+J-l)+m,u+J),D--;c.stroke().restore()}}}})});
__MTS.Util.go(function(u,p,l){u=__MTS.Painting.FC;var q=u("pEraser",{init:function(){this.Pb=this.vc=1;this.Db=-1},move:function(b,c,e){c=-1;var k,h;if(this.v){for(var m=this.v.length-1;0<=m;m--)if(b=this.v[m],h=b.mode+"_isMouseOn",this[h]&&(k=this[h](b)),k){c=m;break}this.Lm(this.v[c]);this.Db===c||e||(this.bc(),0<=c&&this.ag(this.v[c]));this.Db=0<=c?c:-1}},end:function(b){this.v&&this.v.length&&0<=this.Db&&(b=this.v.splice(this.Db,1),b.length&&b[0].txtID&&this.ha.Hl(b[0].txtID),this.Ph(),this.v.length&&
(this.vc=1));this.Db=-1}});u("pEdit",{init:function(){this.Pb=this.vc=1;this.na=this.Db=-1;this.Kj=this.Jj=NaN;this.Jh=this.ln=-1;this.Ij=0},start:function(b){this.v&&(b=this.ln,0<=b&&(this.Pb=1),this.na=b,b=this.v[b],this.Db=-1,this.Ph(),this.vc=1,this.Ij=0,b&&(this.Jj=this.Ca,this.Kj=this.Ea,0<=this.Jh&&this.gn(b,this.Jh)))},move:function(b,c){if(this.v){var e=this,k,h,m=e.na,n=e.Jh;b=e.v[m];if(e.Z){if(b){k=e.Ca-e.Jj;h=e.Ea-e.Kj;if(k||h)e.Ij=1;e.Jj=e.Ca;e.Kj=e.Ea;0<=n&&b.points[n]?(b.points[n].x+=
k,b.points[n].y+=h):l.each(b.points,function(b,c){c.x+=k;c.y+=h;c.label=e.gf[c.x]||""});e.bc().Ic(!0);0<=n?e.gn(b,n):e.ag(b)}}else q.move.apply(e,[b,c,1]),m=e.na,n=-1,0<=m&&(n=e.Vh(e.v[m])),0>n&&0<=e.Db&&(m=e.Db,n=e.Vh(e.v[m])),e.ln=0<=n?m:e.Db,e.Jh=n,e.bc().Ic(!0),0<=e.na&&e.na!=e.Db&&e.ag(e.v[e.na]),b=e.v[m],0<=m&&0<=n?e.gn(b,n):0<=m&&m==e.Db&&e.ag(b)}},end:function(b,c){this.Z&&0<=this.na&&(b=this.v[this.na],b.txtID&&!this.Ij?this.triggerEvent("onText",[this,c,b.txtID,this.Vr(b)]):(b.cr||(b.cr=
this.opt.color_paint),this.triggerEvent("onEdit",[this,c,b.mode,b.cr,b.crBg])));this.Db=-1;this.Kj=this.Jj=NaN;this.Jh=this.ln=-1;this.Ij=0}});u("pText",{init:function(){this.vc=0},start:function(b){b.txtID||(b.txtID=this.ny(),b.txt="Text",b.points=[{x:this.Ca,y:this.Ea}],this.bc().Ic())},end:function(b,c){b.txtID&&(this.Qh(),this.triggerEvent("onText",[this,c,b.txtID,this.Vr(b)]))},isMouseOn:function(b){if(b.txtID){var c=b.points[0],e=this.n(this.Ca),k=this.o(this.Ea),h=this.n(c.x),c=this.o(c.y),
m=this.ha.Ui(b.txtID);b=m.width();m=m.height();return e>=h&&e<=h+b&&k>=c&&k<=c+m?1:0}},mouseOn:function(b){b.txtID&&this.ha.Ui(b.txtID).addClass("mts-txtOn")},draw:function(b){if(b.txtID){var c,e;e=b.points[0];b.txt?(c=l.safeHtmlText(b.txt),e=this.Jt({x:this.n(e.x),y:this.o(e.y)},b),this.ha.mw(b.txtID,c,e)):this.ha.Hl(b.txtID)}}})});
__MTS.Util.go(function(){var u=__MTS.Constant;__MTS.ParamDef={"":{Rf:{name:["theme"],type:u.sa},Gd:{name:["type"],type:u.oa,Vb:2},Fi:{name:["legend"],type:u.oa,Vb:2},Ef:{name:["unit"],type:u.oa,Vb:2},Vo:{name:["unitY"],type:u.sa},je:{name:["lineWidth"],type:u.oa,Vb:2},oB:{name:["dirCoorY"],type:u.sa,ih:u.Lf},pu:{name:["isInnerY"],type:u.Oa},Bc:{name:["empty"],type:u.Oa},Yg:{name:["dataType"],type:u.sa,ih:u.Lf},yl:{name:["baseVal"],type:u.oa},zb:{name:["dv","partition"],type:u.oa},Dv:{name:["panelH"],
type:u.oa},tD:{name:["panelTop"],type:u.oa},sD:{name:["panelBottom"],type:u.oa},zl:{name:["panelRight"],type:u.U},uD:{name:["noBaseIn"],type:u.Oa},Fv:{name:["padTop"],type:u["int"]},Ev:{name:["padBottom"],type:u["int"]},Wv:{name:["xAxisFormat"],type:u.sa},dq:{name:["fixScaleY"],type:u.Cq},Yv:{name:["isFixCuttingY"],type:u.Oa},Xv:{name:["isFixCuttingX"],type:u.Oa},Zv:{name:["isStopNormalX"],type:u.Oa},Ml:{name:["cuttingY"],type:u["int"]},Ll:{name:["cuttingX"],type:u["int"]},bw:{name:["cuttingStepY"],
type:u.Cq},aw:{name:["minStepY"],type:u.U},$v:{name:["minStepX"],type:u.U},kq:{name:["sliderSize"],type:u.U},qw:{name:["sliderMax"],type:u.U},Xl:{name:["sliderMin"],type:u.U},lq:{name:["sliderType"],type:u["int"]},mq:{name:["xonlyStyle"],type:u["int"]},pw:{name:["sliderNum"],type:u.oa},gp:{name:["color"],type:"colorAry"},Eu:{name:["color_line"],type:"colorAry"},Cu:{name:["color_gdn1"],type:"colorAry"},Du:{name:["color_gdn2"],type:"colorAry"},Bu:{name:["colorFocus"],type:"colorAry"},hp:{name:["colorDefined"],
type:u.object},Ng:{name:["coor"],type:u["int"]},ml:{name:["noLabelX"],type:u.Oa},nl:{name:["noLabelY"],type:u.Oa},Sa:{name:["tipHover"],type:u["int"]},Cw:{name:["tipType"],type:u.sa},JE:{name:["tipChartCursor"],type:u.oa},xw:{name:["tipFocusY0"],type:u.Oa},jv:{name:["mark"],type:u.object},Gc:{name:["markY"],type:u.Cq}},Stock:{am:{name:["tradeT","tradeTime"],type:u.sa},se:{name:["pc"],type:u.U},bm:{name:["u"],type:u.U},$l:{name:["d"],type:u.U},vw:{name:["exch"],type:u.U}},K:{wp:{name:["u","unit"],
type:u.oa},wC:{name:["t","legend"],type:u.sa},ev:{name:["ttip","legendtip"],type:u.sa},vC:{name:["minH0"],type:u.U},uC:{name:["isTitleLast"],type:u.Oa},bv:{name:["isBoth"],type:u.Oa},cv:{name:["isRmRef"],type:u.Oa},tC:{name:["isDDRef"],type:u.Oa}},exTech:{Gd:{Vb:1},Fi:{Vb:1},Ef:{Vb:1},bl:{name:["id"],type:u.sa},sF:{name:["name"],type:u.sa},Id:{name:["color"],type:u.oa},Ku:{name:["lineHidden"],type:u.oa}},exTechData:{GB:{name:["param"],type:u.oa},HB:{name:["sign"],type:u.oa}},Chart:{Nw:{name:["volSignByFirst"],
type:u.Oa},qD:{name:["npbarBottom"],type:u.oa,Vb:2},rD:{name:["npbarTop"],type:u.oa,Vb:2},gB:{name:["barTxtIn"],type:u.Oa},qB:{name:["preDate"],type:u.sa},pB:{name:["isLineToEnd"],type:u.Oa}},Rotate:{Gd:{Vb:1},Fi:{Vb:1},Ef:{Vb:1},FD:{name:["title"],type:u.sa},GD:{name:["titleUnit"],type:u.sa}},Pie:{Av:{name:["popIndex"],type:u.U},Bv:{name:["legendStyle"],type:u.sa,ih:u.Lf},lD:{name:["pieSort"],type:u.Oa},mD:{name:["pieStyle"],type:u.U}},Radar:{AD:{name:["isBubble"],type:u.Oa}},Scatter:{ND:{name:["Symbol"],
type:u.oa},cw:{name:["symbolR"],type:u.U},fq:{name:["UserData"],type:u.oa},OD:{name:["titleX"],type:u.sa},PD:{name:["titleY"],type:u.sa},QD:{name:["unitX"],type:u.sa},RD:{name:["unitY"],type:u.sa},cj:{name:["DLevel"],type:""},MD:{name:["isLinreg"],type:u.Oa}},Bullet:{Gd:{type:u.sa,ih:u.Lf},je:{Vb:1},yl:{type:u.U},kB:{name:["legend","legend0"],type:u.oa,Vb:1},lB:{name:["legend1"],type:u.oa},mB:{name:["legend2"],type:u.oa},To:{name:["focus"],type:u.oa,Vb:1}},Bubble:{lu:{name:["colorLen"],type:u["int"]},
hB:{name:["noDashLine"],type:u.Oa}}}});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.ParamDef;l.regInherit("ParamMgr",__MTS.BaseClass,{Aj:p,$e:p,q:p,setDef:function(c){var e=this,k;c=c.split(" ");e.Aj=e.nr({},b[""]);l.each(c,function(c,m){(k=b[m])&&e.nr(e.Aj,k)});return e},set:function(b){var e=this.q;b=this.Iz(b);this.$e||(this.$e={});l.ext(this.$e,b);e||(e={});this.q=this.fA(e,b);return this},get:function(){return this.q},KF:function(){return this.$e},clear:function(){l.clearObj(this.$e);this.$e={};l.clearObj(this.q);this.q=
{};return this},destroy:function(){l.clearObj(this.Aj);l.clearObj(this.q);__MTS.BaseClass.prototype.destroy.apply(this,arguments)},nr:function(b,e){l.each(e,function(e,h){b[e]||(b[e]={});l.ext(b[e],h)});return b},Iz:function(b){var e={};b&&(typeof b==q.object?l.each(b,function(b,c){e[b.toString().toLowerCase()]=c}):l.isStr(b)&&l.each(b.split("&"),function(b,c){var m=l.trim(c.toString()).split("=");1<m.length&&(e[l.trim(m[0].toLowerCase())]=l.trim(m.slice(1).join("=")))}));return e},Zx:function(b,
e){var k=0;e++;l.isA(b)&&99>e&&(k++,k+=this.Zx(b[0],e));return k},at:function(b,e,k){l.isNum(b)||l.isBool(b)?b=[b]:l.isStr(b)?(k==q.Lf?b=b.toLowerCase():k==q.xq&&(b=b.toUpperCase()),b=l.trim(b).split(",")):l.isA(b)?l.eachLeafAry(b,function(b){l.each(b,function(c,e){void 0===e?b[c]="":l.isStr(e)&&k&&(k==q.Lf?b[c]=e.toLowerCase():k==q.xq&&(b[c]=e.toUpperCase()))})}):b=p;return b=l.fmtLevelArrayUpper(b,e)},Tx:function(b,e){var k,h=b.type,m=b.Vb||1;h==q.oa?k=this.at(e,m,b.ih):"colorAry"==h?(k=this.at(e,
m),l.each(k,function(b,c){!c||3!=c.length&&6!=c.length||0>c.indexOf("#")&&/^[0-9,a-f]+$/i.test(c)&&(k[b]="#"+c)})):h!=q.object||!l.isO(e)&&e!==p?h==q.U&&l.isSNum(e)?k=0<e.toString().indexOf("%")?e:+e:h!=q.Oa||isNaN(+e)?h!=q["int"]||isNaN(parseInt(e))?h==q.sa?(k=l.isA(e)?e[0]||"":l.isStr(e)?e:"",b.ih==q.Lf?k=k.toLowerCase():b.ih==q.xq&&(k=k.toUpperCase())):h||(k=e):k=parseInt(e):k=0<+e?!0:!1:k=e;return k},fA:function(b,e){var k=this;l.each(k.Aj,function(h,m){if(!m||!m.name)return!0;for(var n=0,l;n<
m.name.length;n++)if(l=m.name[n].toLowerCase(),void 0!==e[l]){n=k.Tx(m,e[l]);void 0!==n&&(b[h]=n);break}});return b}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template,c=__MTS.DataParser,e=__MTS._Shell.prototype;l.regExtClass("Shell",__MTS._Shell,__MTS._ShellSLD,{main:function(){__MTS._Shell.apply(this);this.r=new __MTS.ViewDataMgr;this.N=new __MTS.EventMgr;this.ac.setDef("");this.Gb.setDef("Chart");this.addEvent("-",this.Eb);this.addEvent("_onInit",this.Fb);this.addEvent("_onParams",this.tb);this.addEvent("_onValidResize",this.so);this.addEvent("_onSliderDataY",this.wz);this.addEvent("_onMoveTipAt",
this.Ws)},opt:{lm:0},du:"View",a:p,r:p,N:p,cc:p,og:p,qf:p,Vn:p,pg:0,Un:-1,Th:NaN,Sh:NaN,ri:0,qi:0,Nh:21,Lj:11,hi:0,rf:0,sf:1,hc:1,zm:p,rn:p,un:p,b:p,Q:-1,gg:0,Wj:1,Xd:0,fc:0,Me:NaN,wk:NaN,xf:NaN,xk:NaN,ti:NaN,ui:NaN,vk:NaN,clearParams:function(){this.r.zB();return e.clearParams.apply(this,arguments)},setData:function(b,c){var e,n,s=(e=this.q)?e.Yg:"";this.$h=this.Xd=0;e=__MTS.DataParser.fmtLabels(b,s);n=l.fmtLevelArrayUpper(l.dupAry(c),3);(!s||s!=q.sa&&s!=q.U)&&__MTS.DataParser.fmtOrderBy(e,n);this.rn=
e;this.un=n;this.b=this.r.fa(e).b;this.r.nw(n);this.sf=1;if(s==q.U&&1<e.length){n=1;for(var t;n<e.length;n++)if(s=Math.abs(e[n]-e[n-1]),isNaN(t)||s<t)t=s;isNaN(t)||(this.sf=t)}this.cs();this.$h=1;return this},setPeriodDates:function(b,c){this.qf=b;this.Vn=c;return this},getPeriodDateIndexs:function(b){b=this.a?this.a.DC(b):p;return{buy:b?b.IE:[],sell:b?b.EB:[]}},setSliderToMarkDay:function(b,c){return this.It(b,c,this.b)},It:function(b,c,e){var n=[],s=this.k,t=this.p,q=this.p-this.k,E,u,A,z,C=new Date(b);
l.each(this.qf,function(b,c){E=c[0]?new Date(c[0]):p;u=c[1]?new Date(c[1]):p;if(+E==+C||+u==+C){if(!A||A>E)A=E;if(!z||z<u)z=u;n.push(b)}});b=l.findDateIndex(C,e);b<s?(s=b,t=s+q):b>t&&(t=b,s=t-q);n.length&&(c&&A&&u&&(s=l.findDateIndex(A,e),t=l.findDateIndex(z,e)),this.Un=n);this.Ck("","",s,t,e.length-1);this.ia=b;return this},setSliderToMark:function(b,c){return this.Ht(b,c,this.b)},Ht:function(b,c,e){c||(c=0);var n,s,t=this.p-this.k;b-=1;if(s=(n=this.qf)&&n[b]?n[b]:p)if(n=s[0],s=s[1],n||s)this.Un=
b,b=n?l.findDateIndex(n,e):NaN,n=s?l.findDateIndex(s,e):NaN,s=0>c?n:b,0<c?(b>this.k&&b<this.p&&(b=this.k),n=b+t):0>c&&(n<this.p&&n>this.k&&(n=this.p),b=n-t),this.Ck("","",b,n,e.length-1),this.ia=s;return this},poster:function(c){this.cc&&this.cc.addClass("mts-poster").html(b.Nb(c));return this},draw:function(){this.q||this.Gb.set();this.triggerEvent("onBeforeDraw");this.triggerEvent("_onDraw");if(!this.r.$u())return this;this.r.mE(this.hc).WD(this.gg).Ok();this.r.Ya&&(this.Aa=0);this.Eh();this.Ak();
this.yk();0<this.Aa&&this.Ih();0<=this.k&&this.p>=this.k?this.df(this.k,this.p):this.df();this.cc&&this.cc.hasClass("mts-poster")&&this.cc.removeClass("mts-poster");return this},drawFocus:function(b,c){var e,n,l=c;this.a&&!isNaN(b)&&(n=this.a.kb,e=b-this.k,e!=n&&(this.a.Ue(e),l=1),l&&this.Xd&&this.a.Jb());return this},La:p,getChartFilterKeys:function(){return this.La},clearChartFilter:function(){this.La=p;return this},setChartFilterKey:function(b,c,e,n){b=[b,c,e].join();this.La||(this.La={});this.La[b]=
n;return this},kf:p,getIgnoreLimitKeys:function(){return this.kf},clearIgnoreLimit:function(){this.kf=p;return this},setIgnoreLimitKey:function(b,c,e,n){b=[b,c,e].join();this.kf||(this.kf={});this.kf[b]=n;return this},setTipTemplate:function(){this.a&&this.a.setTipTemplate.apply(this.a,arguments);return this},setTipOnOff:function(b){this.Q=b?1:0;this.a&&this.a.Mb(this.Q).wq();return this},suspendTipDbClick:function(b){this.a&&this.a.suspendTipDbClick(b);return this},suspendTipBlock:function(b){this.a&&
this.a.suspendTipBlock(b);return this},setTipBlock:function(b,c){var e,n;e=this.b;e=this.hasTriggerEvent("_onDele_tipBlockLabels",[],e);if(!e||!e.length)return this;n=e.length-1;l.isDate(b)&&(b=l.findDateIndex(b,e),-2==b&&(b=n));l.isDate(c)&&(c=l.findDateIndex(c,e),-2==c&&(c=n));b>c&&(e=c,c=b,b=e);0>b&&(b=0);c>n&&(c=n);this.Th=b;this.Sh=c;0<=this.k&&this.a.Fp(this.Th-this.k,this.Sh-this.k,q.qc);return this},Ws:function(b,c){this.a&&this.a.Kb(b,c)},onDele_LegendStyle:function(b,c,e){return this.addEvent("DeleLegendStyle",
b,c,p,e)},onDele_ChartLegend:function(b,c,e){return this.addEvent("onDele_ChartLegend",b,c,p,e)},onDele_TipTmplMove:function(b,c,e){return this.addEvent("onDele_TipTmplMove",b,c,p,e)},onDele_ScaleX:function(b,c,e){return this.addEvent("onDele_ScaleLabelX",b,c,p,e)},onDele_ScaleY:function(b,c,e){return this.addEvent("onDele_ScaleLabelY",b,c,p,e)},onDele_Coor:function(b,c,e){return this.addEvent("onDele_Coor",b,c,p,e)},onTipOnOff:function(b,c,e){return this.addEvent("onTipOnOff",b,c,p,e)},onBeforeDraw:function(b,
c,e){return this.addEvent("onBeforeDraw",b,c,p,e)},onDraw:function(b,c,e){return this.addEvent("onDraw",b,c,p,e)},onBeforeResize:function(b,c,e){return this.addEvent("onBeforeResize",b,c,p,e)},onResize:function(b,c,e){return this.addEvent("onResize",b,c,p,e)},onTipBlock:function(b,c,e){this.addEvent("onTipBlock",b,c,p,e);if(this.a)this.a.onTipBlock(this.po,this);return this},onTipMove:function(b,c,e){return this.addEvent("onTipMove",b,c,p,e)},onPartition:function(b,c,e){return this.addEvent("onPartition",
b,c,p,e)},isTipSuspendDbClickCheck:function(){return this.a?this.a.isTipSuspendDbClickCheck():0},isTipSuspendBlockCheck:function(){return this.a?this.a.isTipSuspendBlockCheck():0},getPartition:function(){var b=this.q;return b&&l.isA(b.zb)?b.zb.slice():[1]},getTipOnOff:function(){var b=this.Q;this.a&&(b=this.a.g.F?0:1);return b},getLR:function(){return{L:this.hi,R:this.rf}},getSliderSize:function(){var b=this.ua;return b?b.getSliderSize():-1},getSliderLR:function(){return{L:this.k,R:this.p}},getSliderDate:function(){var b=
this.k,c=this.p,e=this.b;return{L:e?e[b]:-1,R:e?e[c]:-1}},Eh:function(){this.a?this.a.setOption(this.opt):(this.a=new __MTS[this.du](this.opt),this.a.init(this.f.find(".mts-view:first")).suspendTipDbClick(!this.opt.s_dbclick_tipOn).tv(this.fo,this).Wg(this.yd,this).ql(this.vg,this).rl(this.Sy,this).onDele_LegendStyle(this.jk,this).Mf(this.Wc,this).me(this.Kc,this).Kd(this.ta,this).onDele_TipTmplMove(this.Us,this).ne(this.ic,this).Hp(this.kk,this).onTipBlock(this.po,this).onTipOnOff(this.Ys,this).vl(this.vf,
this).Pp(this.oi,this).Xg(this.ae,this).ul(this.zd,this).Op(this.mi,this).Np(this.oo,this).Mp(this.nk,this).Xi(this.pk,this).pv(this.Ps,this).Wi(this.$d,this));this.Pm();this.Tb()},Tb:function(){var b=this.q,c,e=this.a,n=this.f.width(),s=this.f.height(),t=this.Aa?this.ua.gl():0;this.b<this.opt.s_slider_limit&&(t=0);b.Dv?(c=e.opt.pd+e.Wu(),l.each(b.Dv,function(b,e){c+=e})):c=s-t;e.setSize(n,c);t&&this.ua.setSize(n,t)},Qr:function(b,c){var e=this.f.height()*c.tp;return b=b&&0<b.toString().indexOf("%")?
l.round(parseFloat(b)/100*e):+b},Ak:function(){var b=this,c=b.q,e,n=c.tD||[],s=c.sD||[],t=c.Yg||b.r.Ru(),p=b.sn(b.r.gi+1,1),q=b.a;q.Re();b.r.Qa(function(u,A){A=l.ext({},A);A.tp=p[A.m];A.nm=0;A=b.triggerEvent("DelePnParam",[A])||A;var z=c.Bc?1:b.Nh,C=c.Bc?1:b.Lj,F=A.Ya,z=l.ext({Yb:t,Up:F?C:0,Tp:F?z:0,jd:F?0:C,Tc:F?0:z},b.opt,A.Xb);1===c.Ng&&(z.dh=1);0<+c.zl&&(z.Zg=+c.zl);z=b.triggerEvent("DelePnOpt",[z,A])||z;q.Fg(A,z);e=b.Qr(n[u],A);0<=e&&(u||(b.ri=e||0),q.paddingTop(e,u));e=b.Qr(s[u],A);0<=e&&(u||
(b.qi=e||0),q.xl(e,u))})},yk:function(){var b=this,c=0,e=0,n=0,s=b.q,t=b.r.gi,p=b.a.kb,E=b.a;b.Wj=0;E.Kg();b.r.Qa(function(p,w,u){n<w.m&&(n=w.m,e=c=0);l.each(u,function(u,z){var D=[],J=b.opt.color_line,G=l.ext({ke:0,Oc:0,Pc:0,gb:0,Hg:w.jl,Cc:c},b.opt,w.Xb,z.Wa);-1==w.dir&&(G.Qc=q.left);s.pu&&(G.Jg=1);w.Ya&&l.ext(G,{Qc:q.left,vu:q.AC});0==u&&(l.ext(G,{ke:1,Oc:1,gb:1}),w.m==t&&(G.Pc=1),w.jl&&w.dir!=b.hc&&(G.Oc=0));s.ml&&(G.Pc=0);if(s.nl||!w.dir)G.gb=0;s.Bc&&(G.ke=0,G.Yo=1,G.Pc=0,G.gb=0);s.je&&s.je[n]&&
(G.Dc=s.je[n].slice(e));b.opt.s_bar_a==b.opt.s_bar_focus_a||"BAR"!=z.Xa&&"STACKBAR"!=z.Xa&&"NPBAR"!=z.Xa||(b.Wj=1);s.hp&&l.isA(s.hp[n])&&(J=s.hp[n],J.length&&(J.Yw=1));(s.gp||J.Yw)&&z.Pk&&l.each(z.Pk,function(b,c){D.push(J[c%J.length])});D.length&&(G.color_line=G.color_gdn1=G.color_gdn2=D);G.Ki=z.ka;G.Li=b.fc&&0==p?["%"]:z.Pa;!l.isStr(s.Vo)||p||u||(G.Qe=b.fc?"(%)":s.Vo);G=b.triggerEvent("DeleChartOpt",[G,u,w])||G;E.wb(p,z.Xa,G);c=D.length?0:c+z.S.va();e=z.S.va()})});isNaN(p)||b.a.Ue(p)},so:function(){return this.a?
1:0},wz:function(){var b=this.r.Si(0);this.qs=(new __MTS.Lines).xb(b.S.Ec())},df:function(b,c){var e=this,n=e.q,s=e.b;b=e.k=0<=b?b:0;c=e.p=c>=b?c:s.length-1;s=s.slice(b,c+1);e.a.fa(s,e.sf);e.r.Qa(function(s,p,q){l.each(q,function(l,p){var q,w=new __MTS.Lines;w.xa(p.S.rw(b,c+1));0==s&&(e.fc?w.op():e.hasEvent("onDele_Coor")&&w.WC(function(b,c,h){return e.triggerEvent("onDele_Coor",[b,c,h])},e));"VOLUME"==p.Xa&&(n.Nw&&!l&&(q=__MTS.DataParser.mj(p.S.Ec())),q=n.Nw&&q?q:__MTS.DataParser.Pw(p.S.Ec()),p.ou=
q,w.Md(q.slice(b,c+1)));e.a.xa(l,w,s)})});e.La&&l.each(e.La,function(b,c){var h=b.split(",");e.a.dE(h[0],h[1],h[2],c,e.hc)});e.kf&&l.each(e.kf,function(b,c){var h=b.split(",");e.a.eh(h[0],h[1],h[2],c)});e.triggerEvent("_onAfterViewData",[b,c]);e.jc()},jc:function(){var b=this.hf();0>this.Q&&(this.Q=this.a.g.F?0:1);this.a.Ia().Mb(this.Q);var c=this.a.sp();this.hi=c.L;this.rf=c.R;this.a.Kb(b,q.qc).Fp(this.Th-this.k,this.Sh-this.k,q.qc).draw();this.triggerEvent("onDraw")},Eb:function(){this.r.destroy();
this.N.destroy();this.a.destroy();this.ua.destroy()},Fb:function(){this.f.html(['<div class="mts-mask"></div>',b.view(),b.nq()].join(""));this.cc=this.f.find(".mts-mask")},tb:function(){var b,c=this.q;c.Yg&&c.Yg!=q.sa&&c.Yg!=q.U&&(c.Yg="");this.Gt();c.Gd&&(this.r.fw(c.Gd,c.Fi,c.Ef,function(b,e){var k=p;c.Gc&&(k={},k.Gc=[c.Gc[b]],0<=e&&(l.isA(c.Gc[0])?k.Gc=[c.Gc[b][e]]:k.Gc=[c.Gc[e]]));return k}),this.rn&&this.un&&(this.b=this.r.fa(this.rn).b,this.r.nw(this.un)));this.opt.ld=c.Wv||"";c.dq&&(this.opt.Of=
c.dq.length?c.dq:p);isNaN(c.Ml)||(this.opt.kd=c.Ml);isNaN(c.Ll)||(this.opt.$i=c.Ll);this.opt.bq=c.Xv?1:0;this.opt.cq=c.Yv?1:0;this.opt.Jl=c.bw||p;this.opt.Kl=0<c.aw?c.aw:0;this.opt.Qv=0<c.$v?c.$v:0;this.opt.od=c.ml&&!this.Aa?0:1;this.opt.We=c.nl&&!this.Aa?0:1;this.fc=2==c.Ng?1:0;this.opt.Iv=c.uD?0:1;0<=c.Fv&&(this.Nh=c.Fv);0<=c.Ev&&(this.Lj=c.Ev);this.opt.kj=c.xw?1:0;this.opt.km=c.Cw?c.Cw:"";this.opt.Mw=l.map(c.JE,function(b){return 0<=b||"last"==b?b:0});this.opt.Sa=c.Sa?1:0;this.opt.Nd=2==c.Sa?1:
0;this.Co(c.yl,function(b,c){c==q.mb?b.Wb=NaN:""===c||isNaN(c)||(b.Wb=c,b.Gf=c,b.Ff=c)});this.Co(c.qD,function(b,c){l.isA(c)&&c.length&&(b.Zo=c)});this.Co(c.rD,function(b,c){l.isA(c)&&c.length&&(b.$o=c)});c.zb&&this.hasEvent("onPartition")&&(b=c.zb.slice(),this.zm&&this.zm.join(",")==b.join(",")||this.triggerEvent("onPartition",[b,0]),this.zm=b);c.Bu&&(this.opt.Au=c.Bu);this.og=c.jv?c.jv:p;this.opt.su=c.gB?1:0;this.opt.Tk=c.qB||"";this.opt.uu=c.pB||0;c.Bc&&(this.Aa=this.Q=0,this.opt.od=0,this.opt.We=
0)},Ps:function(){var b,c,e=this.Nh,n=this.Lj;b=this.pg;this.qf&&(b||(b=this.pg=1,this.a.BC(this.qf,this.Vn,this.Un)),this.a.mv(),2>b&&(this.pg=2,b=this.a.EC(),b.top&&(c=1,this.ri=b.top,this.a.paddingTop(b.top,0,e,1)),b.Uo&&(c=1,this.qi=b.Uo,this.a.xl(b.Uo,0,n,1)),c&&(this.a.Ia({Ve:0,dw:0,hw:0,jw:0,uv:0}),this.a.mv())))},$d:function(){var b=this,c=b.q,e;b.Xd=1;c.Gc&&b.r.Qa(function(c,h,t){l.each(t,function(h,s){s.kc&&l.isA(s.kc.Gc)&&l.each(s.kc.Gc,function(l,s){if(!s)return!0;if(e=b.a.PB(h,c)){var t=
e.Kf(l)[0];b.a.Gc(c,1,t[t.length-1],e.opt.color_line[e.opt.Cc+l])}})})});b.og&&b.a.xC(b.og);b.qf&&(b.a.CC(),b.pg=0)},Ys:function(b){var c=this.f.find(".mts-sensor");this.Q=b?1:0;b||!this.Aa?c.removeClass("mts-cursor-hand"):c.addClass("mts-cursor-hand");this.triggerEvent("onTipOnOff",[b])},po:function(b){var c=this.k+b.start;b=this.k+b.end;var e=this.b;this.Th=c;this.Sh=b;this.triggerEvent("onTipBlock",[e[c],e[b],b-c+1])},vf:function(){this.f.addClass("mts-cursor-default")},oi:function(){this.f.removeClass("mts-cursor-default")},
ae:function(){var b=this.a.g.F;this.opt.Nd&&b&&this.setTipOnOff(1)},zd:function(){this.opt.Nd&&(this.setTipOnOff(0),this.Wj&&this.drawFocus(-1))},mi:function(b,c){if(!l.isIE(8)){var e,n=l.getTouchEvent(b,1),s=l.getPageXY(c);__MTS.Config.Chart.s_zoomPreventDefault&&(b.preventDefault(),b.stopPropagation());n&&(b.preventDefault(),b.stopPropagation(),e=l.getPageXY(n));this.Me=s.pageX;this.wk=s.pageY;this.xf=e?e.pageX:NaN;this.xk=e?e.pageY:NaN;this.ti=this.k;this.ui=this.p;this.vk=Math.abs(this.p-this.k);
this.ua.Wl()}},oo:function(b,c){if(!l.isIE(8)){var e=l.getTouchEvent(b,1),n=this.a.Ja().pos,s=this.vk,t=this.ti,p=this.ui,q=this.wd()-1,u=l.getPageXY(c),A=u.pageX,u=u.pageY,n=l.round(n.J(A)-n.J(this.Me));__MTS.Config.Chart.s_zoomPreventDefault&&(b.preventDefault(),b.stopPropagation());if(e){var e=l.getPageXY(e),z=e.pageX,e=e.pageY,s=__MTS.AniMath.distance(A,u,z,e),t=__MTS.AniMath.distance(this.Me,this.wk,this.xf,this.xk),s=s>t?-1:s<t?1:0;b.preventDefault();b.stopPropagation();isNaN(this.xf)||this.Eg(s,
0.04);this.Me=A;this.wk=u;this.xf=z;this.xk=e}else isNaN(this.xf)&&0<s&&!isNaN(t)&&!isNaN(p)&&!isNaN(n)&&n&&(z?t-=dw:(t-=n,p-=n),0>t?(t=this.ti=0,p=this.ui=s,this.Me=A):p>q&&(t=this.ti=q-s,p=this.ui=q,this.Me=A),z&&(this.xf=z,this.vk=Math.abs(this.p-this.k)),this.ua.re(t,p).pl())}},nk:function(){l.isIE(8)||(this.vk=this.ui=this.ti=this.xk=this.xf=this.wk=this.Me=NaN,this.ua.il())},Wc:function(b,c){var e={val:b.val,txt:b.txt,cr:b.cr,bg:b.bg};this.hasEvent("onDele_ScaleLabelX")&&(b=(e=this.triggerEvent("onDele_ScaleLabelX",
[e,c.m]))?l.ext(b,e):p);return b},Kc:function(b,c){var e={val:b.val,txt:b.txt,cr:b.cr,bg:b.bg},n=0>c.dir?"L":"R";this.hasEvent("onDele_ScaleLabelY")&&(b=(e=this.triggerEvent("onDele_ScaleLabelY",[e,c.m,n]))?l.ext(b,e):p);return b},fo:function(b,c){c&&(b=this.wd()-1);return b},yd:function(b){var c=this.q,e={x:"",y:[]};if(this.hasEvent("onDele_ChartLegend")){b.Pg(function(b,c){e.x=c.label;var h=[];l.each(c.Oe,function(b,c){var e=[];l.each(c,function(b,c){e.push({cr:c.cr,txt:c.txt,legend:c.legend,val:c.val,
fmtValue:c.fmtValue,unit:c.unit,sign:c.sign,signTag:c.signTag})});h.push(e)});e.y.push(h)});e=this.triggerEvent("onDele_ChartLegend",[e,this]);if(!e||c.Bc)return!1;l.isA(e.y)&&b.Pg(function(b,c){var h=e.y[b];l.isStr(e.x)&&(c.label=e.x);l.isA(h)&&l.each(c.Oe,function(b,c){var e=h[b];l.isA(e)&&l.each(c,function(b,c){e[b]&&l.ext(c,e[b])})})})}else c.Bc&&(b=!1);return b},vg:function(b,h){var e=this.b;h.idx>=h.Ow&&(b.label=e[e.length-1]);b.label=c.dl(b.label,this.opt.ld);return b},Sy:function(b,c,e){var n,
s,t=this.wd()-1;s=e.Hd[c];"Volume"==s._name&&0<b.Zi&&(b=p);"StockLine"==s._name&&(n=s.Kf(b.M),s=s.opt.Ki,s=l.isA(s)?s[b.M]:p,4==n.length&&3>b.Zi&&(!l.isA(s)||4>s.length)&&(b=p));e.idx>=e.Ow&&(n=this.r.Si(e.gd,c))&&(n.ou&&(b.sign=n.ou[t]),n=n.S.le(b.M,b.Zi),b.val=n[t],b=this.a.Nu(b,e.Hd[c]));return b},jk:function(){return this.triggerEvent("DeleLegendStyle",arguments)},kk:function(b,c){this.Q=c?0:1;return b},ic:function(b,c){var e,n=this.k,l=this.p,t=this.wd()-1,p=this.a.I;0==p&&0>c?(n--,l--,0<=n&&
(this.ia--,e=1)):p==l-n&&0<c&&(n++,l++,l<=t&&(this.ia++,e=1));e&&0<this.Aa&&(this.k=n,this.p=l,this.ua.re(this.k,this.p).pl());return b},ta:function(b){var h=b.idx,e=this.a.g.F;b.Ta=c.dl(b.Ta,this.opt.ld);b.Za=l.fmtNum(b.D);this.ia=isNaN(h)?this.p:this.k+h;this.triggerEvent("onTipMove",[this.ia,this.Sj(b)]);this.Wj&&(h=this.opt.Nd&&e?-1:this.ia,this.drawFocus(h));return b},Us:function(b){return b=this.hasTriggerEvent("onDele_TipTmplMove",[b],b)},Sj:function(b){return{label:b.Ta,value:b.D}},Co:function(b,
c){b&&this.r.pE(b,c)},dy:function(){var b=this.q,c=1;b.zb&&(c=b.zb.length);return c},sn:function(b,c){var e=this.q,n,l=0,p=1,q=[1];b||(b=1);e.zb&&(q=e.zb.slice(0,b));for(e=0;e<b;e++)q[e]||(q[e]=c),l+=q[e];for(e=b-1;0<=e;e--)n=q[e],e?(n=q[e]=n/l,p-=n):q[e]=p;return q}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template,c=__MTS.DataParser,e=__MTS.Shell.prototype,k=q.nu;l.regInherit("ShellK",__MTS.Shell,{main:function(){__MTS.Shell.apply(this,arguments);this.Gb.setDef("K");this.ac.setDef("K");this.pn=(new __MTS.ParamMgr).setDef("exTech");this.nn=(new __MTS.ParamMgr).setDef("exTechData");this.ck=new __MTS.KDraggable;this.lg=new __MTS.KBoundary;this.gc=new __MTS.Painting;this.lb=[];this.eb=new __MTS.Lines;this.Ua=new __MTS.Lines;this.ng=new __MTS.Lines;
this.cb={};this.Ge={};this.ff={};this.B=[];this.Lc=[];this.Xc={};this.Hb={};this.yh={};this.zh=__MTS.Config.K.mtTech.slice();this.sd=__MTS.Config.K.subTech.slice();this.qb=__MTS.ConfigTechInit();this.addEvent("_onZoomInOutValid",this.Ss,this);this.addEvent("_onDele_tipBlockLabels",this.Xy,this);this.addEvent("_onDraw",this.io,this)},opt:{gj:0,Zg:15,Iw:0,od:0,lh:0},Ee:p,B:p,pn:p,nn:p,l:p,eb:p,Ua:p,ng:p,pj:p,qj:p,uh:p,we:p,zh:p,sd:p,Ek:p,ze:p,Lc:p,Xc:p,Hb:p,yh:p,Wn:p,qb:p,cb:p,Ge:p,ff:p,iF:p,yA:20,
Lx:1,uk:0,Aa:1,Hk:0,Pt:65,rc:3,sm:0,rm:20,sg:q.KBar,Rz:q.Chart,jt:NaN,hi:0,rf:0,Po:0,vh:0,rj:0,pt:"",st:"\u958b:",qt:"\u9ad8:",rt:"\u4f4e:",Xz:"\u91cf:",Wz:"\u50f9\u91cf:",Zt:"",No:"",Fk:"",Iy:"pEdit",Jy:"",Pn:1,Kn:0,nf:0,Xj:0,$j:0,ci:0,fc:0,of:0,Sn:0,setOption:function(b){var c=this;e.setOption.apply(c,arguments);c.qb&&c.Do();c.gc&&c.vd(function(b,h){h.setOption(c.opt)});return c},clearData:function(){this.l=p;return this},clearBaseOnData:function(){var b=this;l.each(b.we,function(c){__MTS.Config.K.baseOnName[c]=
"";b.we[c]=p});b.we={};return b},setBaseOnData:function(b,c,e){if("C"==b||"H"==b||"L"==b)return this;this.we||(this.we={});this.we[b]=c;l.isStr(e)&&(__MTS.Config.K.baseOnName[b]=e);return this},setData:function(b,e,k){b=c.fmtLabels(b);e=l.dupAry(e);k=l.dupAry(k);c.fmtOrderBy(b,e,k);this.xt(b,e,k);b.length?this.f.removeClass("mts-nodata"):this.f.addClass("mts-nodata");this.ar();this.clearExTechData();this.p=this.k=NaN;this.La=p;this.ia=NaN;this.$w();this.vd(function(b,c){c.clearData()});this.yf();
return this},addData:function(b,e,k){if(!this.l)return this;b=c.fmtLabels(b);e=l.dupAry(e);k=l.dupAry(k);c.fmtOrderBy(b,e,k);var s=this.l.length,p=new Date(this.l[0]),q=new Date(this.l[s-1]),u=new Date(b[b.length-1]);if(new Date(b[0])<=p&&u>=q)this.xt(b,e,k);else return this;b=l.findDateIndex(p,this.l)-0;q=this.l.length-1-l.findDateIndex(q,this.l);e=this.ia;0<=this.k&&this.p>this.k&&(this.nf=1,b?(this.ia+=b,this.k+=b,this.p+=b,this.ar()):q&&s>=this.p+1-this.rc&&(this.p+=q,e>=s-1&&(this.nf=0,this.ia=
this.l.length-1)));return this},addRef:function(b,e,k){if(2>e.length||!this.l)return this.l||(this.yh[b]={data:e,title:k}),this;k||(k=b);e=l.dupAry(e);e[0]=c.fmtLabels(e[0]);c.fmtOrderBy(e[0],e.slice(1));e=this.Pz(e);var s=this.Hb[b]||{};s.eB=e[e.length-1];s.title=k;-1==this.Bn(b)&&this.Lc.push(b);this.Xc[b]||(this.Xc[b]=this.An(b));this.Hb[b]=s;this.nt();return this},removeRef:function(b){var c=this.Bn(b);this.Hb[b]=p;this.Xc[b]&&(this.Xc[b]=p);0<=c&&this.Lc.splice(c,1);this.nt()||(this.Hb={},this.Lc=
[],this.Xc={},this.uk=0);this.Km();return this},clearRef:function(){this.ng.clear();l.each(this.Hb,function(b,c){c&&c.S&&c.S.destroy();l.clearObj(c)});this.Lc=[];this.Xc={};this.uk=0;this.Hb={};this.yh={};this.Km();return this},setRefColor:function(b,c){b&&c&&this.Xc&&(this.Xc[b]=c);return this},getRefColor:function(b){return this.An(b)},setDataBG:function(b,c,e,k){this.pj=b;this.qj=c;this.uh=p;this.rj=0<e?e:0;this.vh=0<=k?k:1;return this},setDataBG_byBS:function(b,c,e,k){this.pj=b;this.qj=c;this.uh=
e||[];this.rj=0<k?k:0;this.vh=2;return this},setTipOnOff:function(b){this.Q=b?1:0;this.a&&(this.a.Mb(b).wq(),l.each(this.B,function(c,e){e.nc||e.Mb(b).wq()}));this.yf();return this},setSliderAt:function(b,c){var e=this.l,k=e.length-1,p=this.b.length-1,q=l.isDate(b)?l.findDateIndex(b,e):0<=b?b:NaN,e=l.isDate(c)?l.findDateIndex(c,e):0<c?c:NaN;this.Ck(b,c,q,e,k,p);return this},setSliderToMarkDay:function(b,c){return this.It(b,c,this.l)},setSliderToMark:function(b,c){return this.Ht(b,c,this.l)},clearExTechParams:function(){var b=
this;l.each(b.cb,function(c,e){l.clearObj(e);b.Ge[c]=p;b.ff[c]=p});b.cb={};b.Ge={};b.ff={};return b},clearExTechData:function(){var b=this;l.each(b.Ge,function(c,e){var k=[];l.each(e,function(){k.push([])});b.Ge[c]=k;b.ff[c]=p});return b},setExTechParams:function(b,c,e){var k=1;b=this.pn.clear().set(b).get();e&&(b.bl=e);b.Id&&(b.Id.length?l.each(b.Id,function(b,c){if(!c)return k=0,!1}):k=0,k||(b.Id=void 0));c&&b.Id&&(b.Ju=b.Id,b.Id=void 0);b.bl&&(e=this.cb[b.bl]||{},this.cb[b.bl]=l.ext(e,b),e.nb||
(e.nb={}),c&&e.Ju&&(e.nb["-1"]=e.Ju),e.pc||(e.pc={}));return this},setExTechData:function(b,c,e,k){k||(k={});var t=this.cb[b];k=this.nn.clear().set(k).get();var q=k.GB;k=k.HB;t&&(e&&(c=this.lr(c,e),k&&(k=this.lr(k,e))),this.Ge[b]=c,this.ff[b]=k?k:p,q&&c&&l.each(t.pc,function(b){t.pc[b]=q.slice()}));return this},clearExTechData:function(b){this.cb[b]&&(this.Ge[b]=p,this.ff[b]=p);return this},setMaster:function(b){this.sg="B"==b?q.Bamboo:"C"==b?q.Chart:"M"==b?q.Area:q.KBar;return this},setMasterTech:function(b,
c,e,k,l){var q=c?this.qb[c]:p;this.zh[b]=c;q?(q&&q.baseOn&&!l&&(l=[]),this.ut(-1,c,e,k,l)):this.cb[c]&&(q=this.cb[c],k&&(q.nb[-1]=k));return this},setSubTech:function(b,c,e,k,p){l.isA(c)&&(c=c.join("|"));var w=this.sd[b],u=this.qb[c];u?(this.sd[b]=c,this.ut(b,c,e,k)):this.cb[c]?(this.sd[b]=c,u=this.cb[c],k&&(u.nb[b]=l.map(k,function(b,c){var h=u.Gd?u.Gd[c]:"";h&&h.toLowerCase()==q.mb&&(b="");return b})),e&&(u.pc[b]=e.slice())):c&&1<c.split("|").length&&(this.sd[b]=c);p||w==this.sd[b]||this.lb&&this.lb[b]&&
this.lb[b].clearData();return this},addSubTech:function(b,c,e){return this.Fq(0,b,c,e)},addSubTech_ByParams:function(b,c,e){return this.Fq(1,b,c,e)},Fq:function(b,c,e,k){if(!this.Ek)return this;var p=__MTS.Config.K.subNum,q=this.dy(),u=this.sn(q,0),B=l.aryIndexOf(c,this.Ek);0>B&&q==p+1?B=p-1:b&&0<=B&&(b=this.getTechParam(c,B))&&e&&b.join(",")!=e.join(",")&&(B=-1);0>B&&(B=q-1,u.push(u[q-1]),this.setParams({dv:u}));this.setSubTech(B,c,e,k);return this},setGapX:function(b){b=+b;isNaN(b)||b<this.sm?b=
this.sm:b>this.rm&&(b=this.rm);var c=this.p-this.k+1-this.rc;this.l&&this.l.length&&(this.p=this.l.length-1+b,this.k=this.p-b-c+1);this.rc=b;return this},bindSensorEvent:function(b,c,e,k){(b=0>b?this.a:this.B?this.B[b]:p)&&b.ED(c+"__",e,k);return this},unbindSensorEvent:function(b){b+="__";this.a.Fw(b);l.each(this.B,function(c,e){e.Fw(b)});return this},getGapX:function(){return this.rc},getSliderSize:function(){var b=e.getSliderSize.apply(this,arguments);this.l&&this.p>=this.l.length-1&&(b-=this.rc);
return b},getData:function(){return this.l?{T:this.l,O:this.eb.le(0,0),H:this.eb.le(0,1),L:this.eb.le(0,2),C:this.eb.le(0,3),V:this.Ua.le(0,0)}:p},getPaintData:function(){var b={};this.vd(function(c,e,k){b[k]=e.Ti()});return b},getSubTechList:function(){var b=this,c=[],e=b.getPartition();l.each(e,function(e){0<e&&c.push(b.getTech(e))});return c},getTech:function(b){var c="";0<b?(b=(b-1)%this.sd.length,c=this.sd[b].toString().split("|"),c=1<c.length&&!this.Ua.va()?c[1]:c[0]):this.zh&&(c=l.map(this.zh,
function(b){if(b)return b}),c=c.join(","));return c},getTechParam:function(b,c){var e=p,k=this.qb[b];k&&k.params?(e=0<=c&&k.pc&&k.pc[c]?k.pc[c]:k.params,e=l.map(e,function(b){if(0<b)return b})):this.cb[b]&&(k=this.cb[b],0<=c&&k.pc&&k.pc[c]&&(e=k.pc[c]));return e},getSysColor:function(b,c){var e=this.opt,e={crin:[e.color_vol_upin,e.color_vol_dnin,this.opt.color_vol_eqin],"":[e.color_vol_up,e.color_vol_dn,this.opt.color_vol_eq]},e=e[c]?e[c]:e[""];return 0<b?e[0]:0>b?e[1]:e[2]},getTechColor:function(b,
c){var e=p,k;"_MTEX"==b?e=this.opt.color_line_exMtTech.slice():"_EX"==b&&(e=this.opt.color_line_subTech.slice());if(e)return e;(k=this.qb[b])&&"V"!==b?(0<=c&&k.nb&&k.nb[c]?e=k.nb[c].slice():k.color?e=k.color.slice():k.legend&&(e=this.opt.color_line_subTech.slice(0,k.legend.length)),k.isAVG?e[0]="--":k.ll&&(e[e.length-1]="--")):this.cb[b]&&(k=this.cb[b],e=[],k.nb&&k.nb[c]?e=k.nb[c].slice():k.Id&&(e=k.Id.slice()),l.each(k.Gd,function(b,c){c=c?c.split(":")[0].toLowerCase():"";c==q.mb?e[b]="":0==c.indexOf("np")&&
(e[b]="--")}),e.length||(e=p));return e},getCID2TechID:function(b){b&&(b=b.split(k)[0],0==b.indexOf("EXMT_")&&(b=b.split("EXMT_")[1]));return b},hasVol:function(){return this.Ua&&this.Ua.va()?1:0},onDele_KTitle:function(b,c){return this.addEvent("dele_title",b,c)},onDele_KLegend:function(b,c){return this.addEvent("onDele_KLegend",b,c)},onLineFilter:function(b,c,e){return this.addEvent("onLineFilter",b,c,p,e)},onKInfo:function(b,c,e){return this.addEvent("onKInfo",b,c,p,e)},onKTitleAfter:function(b,
c,e){return this.addEvent("onKTitleAfter",b,c,p,e)},onCoor:function(b,c,e){return this.addEvent("onCoor",b,c,p,e)},onBoxRmRef:function(b,c,e){return this.addEvent("onBoxRmRef",b,c,p,e)},onDragDownRef:function(b,c,e){return this.addEvent("onDragDownRef",b,c,p,e)},nt:function(){var b=this,c;b.ng.clear();l.each(b.Lc,function(e,k){var l=b.Hb[k];l&&(b.ng.Df(l.eB),c=1)});return c},Km:function(){var b=this;b.ef(function(c){0<c.key.indexOf("ref")&&(b.La[c.key]=0)})},Eh:function(){var b=this,c;c=b.opt;b.a?
b.a.setOption(c):(b.a=new __MTS.View(c),b.a.init(b.f.find(".mts-view:first")).me(b.Kc,b).MC(b.Ty,b).Kd(b.ta,b).onDele_TipTmplMove(b.Us,b).ne(b.ic,b).Ip(b.Uy,b).sv(b.Ts,b).Hp(b.kk,b).ql(b.vg,b).rv(b.Rs,b).rl(b.lk,b).Wg(b.yd,b).onDele_LegendStyle(b.jk,b,[0]).pv(b.Ps,b).Wi(b.$d,b).Xi(b.pk,b).Op(b.mi,b).Np(b.oo,b).Mp(b.nk,b).sl(b.mk,b).Lp(b.ko,b).Kp(b.jo,b).onTipOnOff(b.Ys,b).vl(b.vf,b).Pp(b.oi,b).Xg(b.ae,b).onTipBlock(b.po,b),b.Qs(b.gc,b.a));c=l.ext({dm:2,em:b.opt.s_subTipMsgY,Jw:b.Pn},b.opt);b.f.find(".mts-kSub").each(function(e){var k=
b.B[e],l=b.lb[e];k?k.setOption(c):(k=b.B[e]=new __MTS.View(c),k.init(b.f.find(".mts-view:eq("+(e+1)+")")).Kd(b.ta,b).ne(b.ic,b).sv(b.Ts,b).Hp(b.kk,b).ql(b.vg,b).rv(b.Rs,b).rl(b.lk,b).Wg(b.yd,b).onDele_LegendStyle(b.jk,b,[e+1]).Xi(b.pk,b).Op(b.mi,b).Np(b.oo,b).Mp(b.nk,b).sl(b.mk,b).vl(b.Cz,b).dD(b.Bz,b).Pp(b.Az,b).Xg(b.ae,b),l||(l=b.lb[e]=new __MTS.Painting),b.Qs(l,k))});b.Pm();b.Tb()},ur:function(b){var c=this.q.vC,c=1>c&&0<c?l.round(this.Hk*c):b;c>b&&(b=c);return b},Yx:function(b){var c,e=0,k=[],
p=this.Hk;c=this.ur(l.round(p*b[0]));k.push(c);p-=c;b=l.map(b,function(b,c){if(0<c)return e+=b,b});l.each(b,function(b,h){c=l.round(p*h/e);k.push(c)});return k},Tb:function(){var b=this,c,e,k=b.f.width();e=b.f.height();var p=b.b,q=b.Pt,u=b.Aa?b.ua.gl():0,B=b.Ee.height(),A=b.sn(b.B.length+1,0),z={lh:1,od:1},C={lh:0,od:0};p.length<b.opt.s_slider_limit&&(u=0);b.Hk=e-u-B;e=b.Yx(A);l.each(e,function(e,l){var n,p,t=e+1;e?(e-=1,n=b.f.find([".mts-kSub:eq(",e,")"].join("")),0<l&&(l-=n.find(".mts-head").height()),
p=b.B[e],p.nc=0<l?0:1,0<l?(n.show(),p.setSize(k,l),b.vi(e),b.cg("mts-kSmallFont",l<q,n),A[t]?p.setOption(C):p.setOption(z)):n.hide()):(n=b.f.find(".mts-kMain"),b.a.setSize(k,l),c=l,b.cg("mts-kSmallFont",l<q,n),A[t]?b.a.setOption(C):b.a.setOption(z))});b.Nt(c);b.ua.setSize(k,u)},Ak:function(){var b=this,c,e=b.q,s=b.r.Ru();b.a.Re();l.each(b.B,function(b,c){c.Re()});b.r.Qa(function(p,q){c=q.m;q=l.ext({},q);q.m=0;var u=c-1,B=b.B[u],A=b.qb[q.ca.split(k)[0]],z=l.ext({Yb:s,jd:b.Lx,Tc:b.Nh},b.opt,q.Xb);c||
1!==e.Ng||b.fc||(z.dh=1);0<+e.zl&&(z.Zg=+e.zl);A&&A.Nf&&l.ext(q,A.Nf);A&&A.option&&l.ext(z,A.option);c?B&&!B.nc&&(B.Fg(q,z),b.vi(u)):b.a.Fg(q,z)})},yk:function(){var b=this,c=0,e=0,s=0,p=0,w,u,B,A={},z=b.q,C=b.r.gi;b.a.Kg();l.each(b.B,function(b,c){c.Kg()});b.r.Qa(function(F,D,J){e<D.m&&(e=D.m,u=w=p=s=c=0);l.each(J,function(F,H){var J=D.dir,L=b.B[e-1],M="ref"==H.s&&b.ci?1:0,I=l.ext({ke:0,Oc:0,Pc:0,gb:0,Cc:c},b.opt,D.Xb,H.Wa);-1==J&&(I.Qc=q.left);z.pu&&(I.Jg=1);u||J!=b.hc?F||!b.Kn&&!M||w||J==b.hc||
(w=1,I.gb=1):(u=1,l.ext(I,{ke:1,Oc:1,gb:1}),D.m==C&&(I.Pc=1));D.jl&&(e&&(b.Kn||b.Pn)||M)&&(I.Hg=1);p&&(I.s_border=[0,0,0,0]);e||p||b.sg!=q.Chart&&b.sg!=q.Area||(I.Dc=[1.5*b.opt.s_lineW],I.s_area_a=b.opt.s_kArea_a);"ref"==H.s&&(I.s_lineW=1.5*b.opt.s_lineW);H.s&&-1<H.s.indexOf("EXMT_")&&(I.s_vbar_a=I.s_bgBar_a=I.s_bar_a=0.5);I.Ki=H.ka;I.Li=H.Pa;b.fc&&"price"==D.ca&&(I.Li=["%"]);!e&&H.s?"ref"==H.s?I.color_line=b.jy():0===H.s.indexOf("EXMT_")&&(B=H.s.split(k)[0],A.s!=B&&(A={s:B,fp:0}),I.Cc=A.fp,A.fp+=
H.S.va()):L&&(c+=H.S.va(),L&&!H.Wa.color_line&&(I.color_line=I.color_gdn1=I.color_gdn2=b.opt.color_line_subTech));e?L&&!L.nc&&L.wb(s,H.Xa,I):b.a.wb(s,H.Xa,I);p++});s++})},Ih:function(){e.Ih.apply(this,arguments);this.ua.Gp(this.Ss,this)},df:function(b,c){var e=this.b;b=this.k=0<=b?b:0;c=this.p=c>b?c:e.length-1;this.vA(b,c);this.jc()},jc:function(){var b=this,c=b.k,e=b.hf();0>b.Q&&(b.Q=b.a.g.F?0:1,b.yf());b.Tz();b.a.Ia().Mb(b.Q);var k=b.a.sp(),p=k.L,w=k.R;l.each(b.B,function(c,e){e.nc||(e.Ia().Mb(b.Q),
k=e.sp(),k.L>p&&(p=k.L),k.R>w&&(w=k.R))});b.nf=0;b.hi=p;b.rf=w;b.a.Zp(p,w).Kb(e,q.qc,b.nf).Fp(b.Th-c,b.Sh-c,q.qc).draw();l.each(b.B,function(c,k){k.nc||k.Zp(p,w).Kb(e,q.qc,b.nf).draw()});b.ck.setSize();b.tz();b.uz();b.triggerEvent("onDraw")},Tz:function(){var b=this;b.a.Vk();l.each(b.B,function(b,c){c.Vk()});b.ef(function(c,e){var k=b.r.Qu(c.m,c.s),l=0<c.m?b.B[c.m-1]:0===c.m?b.a:p;l&&0<=k&&e&&l.dj(k,c.M,e,b.hc)})},Br:function(b,c,e){b=[b];isNaN(c)||b.push(c);l.isA(e)&&(b=b.concat(e));return b.join(k)},
Nt:function(b){var c,e=this.ri,k=this.qi,p=this.lg.Yd;if(0<this.Po&&(0<e||0<k)){c=b/this.Po;e=l.round(e*c)||1;k=l.round(k*c)||1;b-e-k<p&&(e>k?e=b-p-k:k=b-p-e);if(0>e||0>k)k=e=0;this.ri=e;this.qi=k;this.a.paddingTop(e).xl(k)}this.Po=b},vi:function(b){var c,e=this.yA;(b=this.B[b])&&!b.nc&&(c=b.Ed.h,c=c-e-40,c<e&&(e=0>c?0:c),b.paddingTop(e,0).paddingTop(e,1))},Eb:function(){this.clearExTechParams();this.clearRef();l.each(this.B,function(b,c){c.destroy()});this.pn.destroy();this.nn.destroy();this.ck.destroy();
this.lg.destroy();this.vd(function(b,c){c.destroy()});this.eb.destroy();this.Ua.destroy();this.ng.destroy();e.Eb.apply(this,arguments)},Fb:function(){var c=[],e=__MTS.Config.K.subNum;c.push('<div class="mts-mask"></div>');c.push(b.pa("mts-wrapK"));c.push(b.av("mts-kMain"));for(var k=0;k<e;k++)c.push(b.av("mts-kSub"));c.push("</div>");c.push(b.nq());this.f.html(c.join("")).addClass("mts-kChart");this.Ee=this.f.find(".mts-head:first");this.cc=this.f.find(".mts-mask");this.cz();this.bz();this.dz(e);
this.N.init(this.f).reg(".mts-wrapK","mouseenter",this.Jx,this).reg(".mts-wrapK","mouseleave",this.Kx,this);this.Do();return this},tb:function(){var b=this.q;e.tb.apply(this,arguments);l.isNum(b.kq)&&(this.opt.s_slider_size+=this.rc);b.wp&&(this.Zt=b.wp[0]||"",this.No=b.wp[1]||"");this.Fk=b.wC||"";0<=b.bv&&(this.Kn=b.bv);b.Rf&&this.Do();b.cv&&this.Km()},io:function(){if(!this.l)return this;var b=this,c=b.q,e=b.hc,k=c.zb||[1],p=b.getData();b.we&&l.each(b.we,function(b,c){p[b]=c});b.b=b.r.fa(b.l,b.rc).b;
b.r.cp();b.r.wb(b.sg,b.eb,{ca:"price",m:0,dir:e,ka:[[b.st,b.qt,b.rt,b.pt]]});l.each(b.yh,function(c,e){e&&b.addRef(c,e.data,e.title)});b.yh={};b.$j=b.ky();b.ci=0;if(b.$j){var q=[],u=[],B=0,A;l.each(b.Lc,function(c,e){var k=b.Hb[e];k&&(q.push(k.title),u.push(e),B++)});A=b.ci=3===c.Ng&&1===B?1:0;b.r.wb(b.Rz,b.ng,{ca:A?"ref":"price",m:0,dir:A?-1*e:e,s:"ref",ka:q},{fB:u})}b.fc=b.$j&&!b.ci||2===c.Ng?1:0;b.triggerEvent("onCoor",[b.ci?3:b.fc?2:1===c.Ng?1:0]);b.dA(p);b.Ek=[];if(1<k.length)for(c=1;c<k.length;c++)e=
b.tA(c,p),b.Ek.push(e);b.Lt()},$d:function(){var b=this.k,c=this.p,k=this.l.length-1;this.og&&(this.og.unit=this.fc?"%":"",this.og.lC=this.sg==q.Chart||this.sg==q.Area?1:0);e.$d.apply(this,arguments);this.Wn&&this.a.yC(this.Wn,b,c>k?k:c,k+1)},mk:function(b,c,e){var k=this.to(b).m,l=0<k&&this.B?this.B[k-1]:this.a;c=c?0:e.lp||1;l&&(this.setChartFilterKey(b,c),2==e.lp?(l.Ia(),this.gc.setSize(),this.lg.iw(this.rf),l.draw().Kb(this.hf(),q.qc)):this.Pn&&0<k?this.jc():l.draw(),this.triggerEvent("onLineFilter",
[k]))},ko:function(b,c,e){this.triggerEvent("onBoxRmRef",[b,e]);this.removeRef(b).draw()},jo:function(b,c,e){this.Bn(b);c=this.An(b);refInfo={id:b,cr:c};this.triggerEvent("onDragDownRef",[refInfo,e])},mi:function(b){this.Xj||this.of||e.mi.apply(this,arguments)},ok:function(b){var c=this.Wd(q.min);0<+b&&(b=+b,b<c&&(b=c),0<this.rc&&(b+=this.rc));e.ok.apply(this,[b])},Dk:function(b){this.a.kw(b);l.each(this.B,function(c,e){e.nc||e.kw(b)})},vf:function(){this.Dk(1);e.vf.apply(this,arguments)},Cz:function(){this.vf.apply(this,
arguments);this.a.SE.apply(this.a,arguments)},Bz:function(){this.a.RE.apply(this.a,arguments)},oi:function(){this.Dk(0);e.oi.apply(this,arguments)},Az:function(){this.oi.apply(this,arguments);this.a.QE.apply(this.a,arguments)},ae:function(){this.Dk(1)},Jx:function(){this.Sn=1},Kx:function(){this.Sn&&this.a&&this.a.g.opt.Sa&&(this.Dk(0),this.a.setTipTemplate(""));this.Sn=0},Ws:function(b,c){this.a&&(this.a.Kb(b,c),l.each(this.B,function(e,k){k.nc||k.Kb(b,c)}))},Ss:function(b){var c=this.l.length-1,
e=this.Wd(q.min);c-b+1<e&&(b=c+1-e);return{Fc:b}},Kc:function(b,c){"price"==c.ca&&(this.fc?b.txt+="%":b.txt&&0<b.txt.toString().indexOf("K")&&(b.txt=b.val));return b},Xy:function(){return this.l},kk:function(b,c,e){var k=this;b+=0<b?-1:1;k.Q=c||k.of?0:1;k.of?e.Mb(0):(e!=k.a&&k.a.Mb(k.Q).Kb(b),l.each(k.B,function(c,l){l.nc||e==l||l.Mb(k.Q).Kb(b)}),k.yf());return b},Ts:function(b){var c=b.x,e=this.ia+c,k=this.l.length-1;0<c&&e>k&&(b.x=0);return b},ts:function(b,c,e){var k=-1,p;l.each(b,function(b,h){l.each(h.pe,
function(b,l){if(c<l.ue||c>l.aa)return!1;if(e>=l.Ye&&e<=l.ga)return k=h.idx,l.Zu&&(p=1),!1});if(p)return!1});return k},Ty:function(b,c,e){var k=-1,l=c.c;c=c.i;k=e==q.zw?1:0;this.qf&&2==this.Vn&&!k&&(e=this.a.qg,k=this.ts(this.a.rg,l,c),-1==k&&(k=this.ts(e,l,c)),0<=k&&(b=k));return b},ta:function(b,c,e){var k=this.b,p=this.au(b.idx);b.idx>p&&(b.idx=p,b.J=p,b.c=b.pos.c(b.J),b.Ta=k[this.k+p]);b.Za=l.fmtNum(b.D);if(c==q.Bw||c==q.gm)return b;this.ia=this.k+p;c&&0===c.indexOf(q.ij)&&(c=q.gm,e!=this.a&&
this.a.Kb(p,c),l.each(this.B,function(b,h){h.nc||e==h||h.Kb(p,c)}));e==this.a&&this.triggerEvent("onTipMove",[this.ia,this.Sj(b)]);return b},Uy:function(b,c,e){return b=b+this.opt.s_fontSizeY+c+e>this.Hk?b+(-c-e):b+c},vg:function(b,c,e){e=this.Rj(e);this.Q||(b.label=this.l[this.l.length-1]);if(0<e||"price"==c.Nf.ca)return b},Rs:function(b,c,e,l){l=this.Rj(l);c=this.r.Si(l,e.gd,c);b.id=c=c.s||"";!l&&c&&"ref"!=c&&(b.Zk="mts-block",0==c.indexOf("EXMT_")&&(c=c.split(k)[0],b.jC=1,b.id=c));return b},lk:function(b,
e,n,s){var t,w,u,B=this.q;u=this.l.length-1;s=this.Rj(s);var A=n.gd,z=n.Nf.ca,C=this.r.Si(s,A,e);n=b.val;w=b.sign;var F=this.opt.s_legend_formatNaN;!this.Q&&C&&(t=C.S.le(b.M,b.Zi),n=t[u],w=(w=C.S.fl(b.M))?w[u]:NaN,!s&&this.fc&&("ref"==C.s?(u=this.k,isNaN(t[u])&&0<=t.ma&&t.ma>this.k&&(u=t.ma),n=l.fmtPercent(n,t[u])):A||(n=l.fmtPercent(n,this.jt))));s||!this.$j||e||b.M||3!=b.Zi?s||(A||e)&&z!="V"+k+"0"?(!A&&this.fc&&(F="--"),C&&(e=[s,C.s,b.M].join(";"),u=(u=this.qb[C.s.split(k)[0]])?u.dp:NaN,b.checkbox=
{on:this.La&&this.La[e]?0:1,val:e},0<C.s.indexOf(q.mb)?b.checkbox=p:0<u&&!isNaN(n)?n=this.cu(n,u):"ref"==C.s?(b.yG=1,b.lp=2,C=C.kc.fB[b.M],B.tC?b.Hu={val:C}:B.cv&&(b.checkbox=p,b.Lv={val:C})):0==C.s.indexOf("EXMT_")&&(b.lp=2))):b=p:(b.legend=this.Fk,b.signTag="",b.cr=this.opt.color_line[0]);b&&(b.val=n,b.sign=w,b.signTag=this.a.Uu(w),b.fmtValue=isNaN(n)?F:s?l.fmtNum(n):n,b.txt=c.np(b,b.fmtValue));return b},yd:function(b,c){var e,k=this.Rj(c),p=this.ia;e=this.l.length-1;var q=new __MTS.LegendMgr,u=
b.UB(0),B={idx:k,x:"",y:[]};if(!this.Q||p>e)p=e;k||(e=this.Lt(p),this.hasEvent("onKInfo")&&this.triggerEvent("onKInfo",[e,p]));var A={},z;B.x=u.label;b.Pg(function(b,c){l.each(c.Oe,function(b,c){c.jC?(z=A[c.id])?l.each(c,function(b,c){z.push(c)}):(A[c.id]=z=l.ext([],c),B.y.push(z)):B.y.push(c)})});var C=0;(k=this.triggerEvent("onDele_KLegend",[B,k]))&&(B=k);q.gq(0,u.x,u.y).iq(0,B.x);l.each(B.y,function(b,c){l.isA(c)&&(!C&&c.Zk&&(c.Zk=""),c.z=c.id?"ref"==c.id?1:0:2,q.So(0,c),C++)});c==this.a&&q.HE(0,
function(b,c){return c.z-b.z});return q},jk:function(b,c,e){return this.triggerEvent("DeleLegendStyle",[b,e])},$x:function(b){var c=this.q,e=this.a?this.a.g.Qd:p,k=this.opt.s_legend_formatNaN,t=this.b,q=this.eb.ed(0),u=this.Ua.le(0,0),B=q[3][b],A=0<b?q[3][b-1]:NaN,z=this.eb.hb().dp,C=this.Tj(B,A);b={T:t[b]||"",O:q[0][b],H:q[1][b],L:q[2][b],C:B,DT:"",PC:A,V:u?u[b]:k,UD:isNaN(A)?"--":l.round(B-A,z),UDP:isNaN(A)||0==A?"--":l.round((B-A)/Math.abs(A)*100,2).toString(),cF:z,dF:u?this.Ua.hb().dp:0,sO:this.st,
sH:this.qt,sL:this.rt,sC:this.pt,sV:this.Xz,signC:C,signO:this.Tj(q[0][b],A),signH:this.Tj(q[1][b],A),signL:this.Tj(q[2][b],A),signUD:0<C?String.fromCharCode(9650):0>C?String.fromCharCode(9660):isNaN(A)?"":"=",signUDP:0<C?"+":"",cssC:this.Yh(B,A),cssO:this.Yh(q[0][b],A),cssH:this.Yh(q[1][b],A),cssL:this.Yh(q[2][b],A),legend:this.Fk,legendTip:c.ev?c.ev:this.Fk,unitC:this.Zt,unitV:this.No};e&&0<=e.up&&(b.sBG=this.Wz,b.bgPrice=e.iB,b.bgVolume=e.jB,b.bgSign=e.bgSign);isNaN(b.O)&&(b.O=k);isNaN(b.H)&&(b.H=
k);isNaN(b.L)&&(b.L=k);isNaN(b.C)&&(b.C=k);return b},$w:function(){this.Ee.empty()},Lt:function(c){var e;e=this.l.length-1;if(this.q.uC||isNaN(c)||c>e)c=e;if(this.eb){e=this.$x(c);if(e=this.hasTriggerEvent("dele_title",[e,c],e))this.Ee.find(".mts-kTitle").length||this.Ee.html(b.rC(e.legend,e.legendTip)),this.uA(".mts-signC",e.signC),this.Eo(".mts-ud",isNaN(e.UD)?"":e.signUD+e.UD,e.cssC),this.Eo(".mts-udp",isNaN(e.UD)?"":["(",e.signUDP,e.UDP,"%)"].join(""),e.cssC),this.Eo(".mts-date",e.DT),this.wi(".mts-close",
e.sC,e.C,e.unitC,e.cssC),this.wi(".mts-open",e.sO,e.O,"",e.cssO),this.wi(".mts-high",e.sH,e.H,"",e.cssH),this.wi(".mts-low",e.sL,e.L,"",e.cssL),this.wi(".mts-vol",e.sV,e.V,e.unitV,"",1),e.sBG&&(c=["(",e.bgPrice,") ",l.fmtNum(e.bgVolume)],this.Mt(".mts-bgCV",e.sBG,c.join(""),e.unitV,e.bgSign)),this.triggerEvent("onKTitleAfter");return e}},Tj:function(b,c){return b>c?1:b<c?-1:0},Yh:function(b,c){return b>c?"up":b<c?"dn":"eq"},wi:function(b,c,e,k,p,q){e=isNaN(e)?"":q?l.fmtNum(e):e.toString();this.Mt(b,
c,e,k,p)},Mt:function(c,e,k,s,p){l.isNum(p)&&(p=this.Yh(p,0));c=this.Ee.find(c);var q=[];k?(e&&q.push(e),p?q.push(b.md(k,p)):q.push(k),s&&q.push(s),c.html(q.join(""))):c.empty()},Eo:function(c,e,k){k&&(e=b.md(e,k));this.Ee.find(c).html(e)},uA:function(c,e){var k=0<e?"signUp":0>e?"signDn":"signEq";this.Ee.find(c).html(b.md("",["mts-signBigFlag",k].join(" ")))},vA:function(b,c){var e=this,k=0,q=0,w=NaN,u=e.b,B=u.slice(b,c+1);e.a.Uk();e.vh&&e.a.VD({s_bar_maxWidth:1});2==e.vh&&e.a.setDataBG(e.pj,e.qj,
e.uh,e.rj);e.a.fa(B);l.each(e.B,function(b,c){c.nc||c.fa(B)});e.vd(function(c,e){e.gE(b).fa(B).fE(u).TE()});e.r.Qa(function(u,z,E){q<z.m&&(q=z.m,k=0);l.each(E,function(l,u){var z=q-1,E=e.B[z],A=e.yn(z),B=new __MTS.Lines;B.xa(u.S.rw(b,c+1));B.tE(u.S.FE(b,c+1));-1==z?(e.fc?(k||l||(w=B.Ec()[0]),"ref"==u.s?B.op():B.op(w)):l||1!=e.vh||e.a.setDataBG(e.pj.slice(b,c+1),e.qj.slice(b,c+1),e.uh?e.uh.slice(b,c+1):p,e.rj),e.a.xa(l,B,k),k||l||!A||A.xa(B)):E&&!E.nc&&(E.xa(l,B,k),k||l||!A||A.xa(B))});k++});e.gc.oE(w);
e.jt=w},Uz:function(){var b=this.q,c=[];this.f.find(".mts-k .mts-view").each(function(b,e){var h=u(e).height();h&&c.push(h)});b.zb&&b.zb.join(",")==c.join(",")||(this.q.zb=c.slice(),this.triggerEvent("onPartition",[c,1]))},xt:function(b,e,k){this.l=b;this.eb.clear().Df(e);b=c.mj(this.eb.Ec());this.eb.Md(b);this.Ua.clear();k&&this.Ua.xb(k).Md(b)},lr:function(b,c){var e=this.l;if(!c||!e)return b;var k=e.length,p=c.length,q=e[0],u=e[k-1],B=c[0],A=c[p-1];if(p==k&&q==B&&u==A)return b;var z=[],C=0;l.each(b,
function(b){z[b]=[]});for(u=0;u<k&&!(C>=p);u++){q=new Date(e[u]);B=new Date(c[C]);B-=q;if(0>B&&C<p-1)for(;0>B&&C<p-1;)C++,B=new Date(c[C]),B-=q;0<B?l.each(z,function(b){z[b].push(NaN)}):0==B&&(l.each(z,function(c){z[c].push(b[c][C])}),C++)}return z},Pz:function(b){var c,e,k,p,q=Array(b.length),u=b[0],B=0;l.each(q,function(b){q[b]=[]});for(c=0;c<this.l.length&&!(B>=u.length);c++){k=this.l[c];p=u[B];p=new Date(p)-new Date(k);if(0>p&&B<u.length-1)for(e=B;e<u.length;e++)if(p=u[e],p=new Date(p)-new Date(k),
0<=p){B=e;break}if(0<p)for(q[0].push(k),e=1;e<q.length;e++)k=B?b[e][B-1]:NaN,q[e].push(k);else 0==p&&(l.each(q,function(c){q[c].push(b[c][B])}),B++)}return q},ls:function(b,c){return(b?b.join(","):"")==(c?c.join(","):"")?1:0},cu:function(b,c){var e=b;0<c&&(e=l.toFixed(b,c),0==+e&&0!=b&&4>c&&(e=this.cu(b,c+1)));return e},Fo:function(b){var c=[],e,k=b.length,p=l.floor(k/2);c[p]=b[0];for(var q=1;q<k;q+=2)e=l.ceil(q/2),c[p-e]=b[q],c[p+e]=b[q+1];b.length!=c.length&&(c=b);return c},Rj:function(b){var c=
-1;this.a==b?c=0:l.each(this.B,function(e,k){b==k&&(c=e+1)});return c},Bn:function(b){return this.Lc?l.aryIndexOf(b,this.Lc):-1},ky:function(){return this.Lc?this.Lc.length:0},jy:function(){var b=this,c=[],e=b.opt.color_ref;l.each(b.Lc,function(k,l){var p=b.Xc[l];p||(p=e[k%e.length]);c.push(p)});return c},An:function(b){var c=this.opt.color_ref;b=this.Xc[b];b||(b=c[this.uk%c.length],this.uk++);return b},Do:function(){var b=this;l.each(__MTS.Config.MtTech,function(c){var e=b.qb[c];(c=b.opt["color_"+
c])&&e&&!e.color&&(e.color=c)})},cg:function(b,c,e){e||(e=this.f);c?e.addClass(b):e.removeClass(b)},Wx:function(b,c,e){var k,l,p,q=__MTS.Config.K.baseOnName;for(k=0;k<c.length;k++)l="{P"+k+"}",0<b.indexOf(l)&&(b=b.replace(l,c[k]),l="{B}",0<b.indexOf(l)&&(p=e&&e[k]?q[e[k]]||"":"",b=b.replace(l,p)));return b},Sx:function(b,c,e){var k=this,p=[],q=k.qb[b];"MAE"==b&&l.isA(e)&&(e=e.slice(),b=e[2],e[3]=2*e[1],e[4]=2*b);l.each(c,function(b,c){p[b]=k.Wx(c,e,q.baseOn)});return p},Xx:function(b){var c=this.No;
l.isA(b)?b=l.map(b,function(b){return b?b.replace("{V}",c):""}):b&&(b=b.replace("{V}",c));return b},au:function(b){var c=this.l.length-1;if(isNaN(b)||b>=c-this.k)b=c-this.k,this.ia=c;return b},hf:function(){var b=e.hf.apply(this,arguments);return this.au(b)},ar:function(){l.clearObj(this.ze);this.ze={}},Sz:function(b){var c=this,e;l.each(c.ze,function(k,l){l&&(e=k.split("-")[0],e==b&&(c.ze[k]=p))})},ut:function(b,c,e,k,p){var q,u=this.qb[c];u&&(u.option||(u.option={}),e&&(e=l.map(e,function(b){if(!isNaN(+b))return+b}),
q=0,0<=b?(u.pc||(u.pc={}),this.ls(u.pc[b],e)||(u.pc[b]=e,q=1)):this.ls(u.params,e)||(u.params=e,q=1),q&&this.Sz(c)),l.isA(k)&&k.length&&k[0]&&(0<=b?(u.nb||(u.nb={}),u.nb[b]=k.slice()):u.color=k),p&&u.baseOn&&(u.baseOn=p))},ly:function(b,e,k,p){var q,w,u,B,A=this.qb[e],z="avg"==b?"AVG":A.tech;if(A.baseOn){w=[];for(var C=0,F;C<p.length;C++)if(q=p[C],(B=A.baseOn[C]||"C")&&void 0===k[B]&&(B="C"),F=k[B])B=[e,b,q,B].join("-"),u=this.ze[B],q=c.Vu(z,[q],F,u),this.ze[B]=q.Qk,w.push(q.Kk.slice()[0])}else B=
[e,b],l.isA(p)&&B.push(p.join(",")),B=B.join("-"),u=this.ze[B],q=c.Vu(z,p,k,u),this.ze[B]=q.Qk,w=q.Kk.slice();return w},Tr:function(b,e,k,p){var q,w=this.qb[e];p=this.getTechParam(e,p);var u=this.Sx(e,w.legend,p),B={Xa:w.type||"",S:new __MTS.Lines,ka:u,Pa:this.Xx(w.unit)||""};if("vol"!=b&&w.params.length&&!p.length)return B;"vol"!=b&&k&&(q=this.ly(b,e,k,p));"vol"==b?B.ka=u.slice(0,1):"avg"==b?(B.Xa="",B.ka=u.slice(u.length-p.length)):"osc1"==b?(q&&(q=q.slice(0,q.length-1)),B.ka=u.slice(0,u.length-
1)):"osc2"==b&&(q&&(q=q.slice(q.length-1)),B.Xa="NPBar",B.ka=u.slice(u.length-1));w.sortByCenter&&q&&(q=this.Fo(q),B.ka=this.Fo(u.slice(0,q.length)),B.color=this.Fo(w.color.slice(0,q.length)));"vol"==b?B.S=this.Ua:q&&l.each(q,function(b,e){var k=c.mj(e);B.S.Df(e,4).iu(k)});return B},Ur:function(b,c,e){if(!this.qb[b])return[];var k;k="";var l=this.qb[b],p=[];"V"==l.tech?k="vol":l.ll&&(k="osc1");k=this.Tr(k,b,c,e);p.push(k);k="";l.isAVG?k="avg":l.ll&&(k="osc2");k&&(k=this.Tr(k,b,c,e),p.push(k));return p},
ey:function(b){var e=this,k=[],p,t=e.cb[b],w=e.Ge[b],u=e.ff[b];t&&l.each(t.Gd,function(b,h){h=h.split(":");var l=h[0]||"",C=t.Fi||[""],F=t.Ef||[""],C={Xa:l,Gg:"L"==h[1]?-1:"R"==h[1]?1:e.hc,S:new __MTS.Lines,ka:1<C.length?C[b]||"":C[0],Pa:1<F.length?F[b]||"":F[0],Wa:{},Xb:{}};l==q.NPBar&&(C.Xb.aq=1,C.Xb.jd=C.Xb.Tc=0);l.toLowerCase()==q.mb&&(C.Xa=q.mb,C.Wa.Ig=C.Wa.Xo=0,C.Gg=0);k.push(C);w&&w[b]?(p=u&&u[b]?u[b]:c.mj(w[b]),C.S.Df(w[b]).iu(p)):w&&C.S.Df([])});return k},dA:function(b){var c=this,e=0,s=
c.hc,q=[];l.each(c.zh,function(p,u){var B=c.qb[u];if("V"==u&&!c.Ua.va())return!0;if(B){var A=c.Ur(u,b),z,C=B.color,F={ca:"price",m:0,dir:s,s:u},D=l.map(B.params,function(b){if(0<b)return b});A.length&&("V"==u?(F.ca=u+k+"0",F.dir*=-1):"price"==F.ca&&e++,F.ka=A[0].ka,F.Pa=A[0].Pa,F.Wa=B.option||{},1==A.length&&A[0].color&&(C=A[0].color),l.isA(C)&&C.length&&(B.ov&&(C=l.map(C,function(b,c){if(0<B.params[c])return b})),F.Wa.Cc=0,F.Wa.color_line=C),B.Ug&&"price"==F.ca&&l.isA(D)&&(z=[],l.isA(B.Ug)?l.each(B.Ug,
function(b,c){D[c]&&z.push(D[c])}):z=D,q.push({rB:e,Bq:z})),c.r.wb(A[0].Xa,A[0].S,F))}else c.cb[u]&&c.yt(0,u,"EXMT_"+u)});c.Wn=q.length?q:p},tA:function(b,c){var e=this,p,q,w,u,B=e.hc,A=(b-1)%e.sd.length,z=e.sd[A].split("|"),z=1<z.length&&!e.Ua.va()?z[1]:z[0];(q=e.qb[z])?(p=e.Ur(z,c,A),l.each(p,function(c,m){u=e.Br(z,b);w={ca:u,s:u,m:b,dir:B};c&&q.ll&&(w.s+=k+"OSC",w.ca+=k+"OSC",w.dir*=-1);c&&q.isAVG&&(w.s+=k+"AVG");w.ka=m.ka;w.Pa=m.Pa;w.Wa=l.ext({},q.option);q.nb&&l.isA(q.nb[A])&&q.nb[A].length?
w.Wa.color_line=q.nb[A]:l.isA(q.color)&&q.color.length&&(w.Wa.color_line=q.color);e.r.wb(m.Xa,m.S,w)})):e.cb[z]?e.yt(b,z,z):z="";return z},yt:function(b,c,e){var k=this,p,w,u,B,A=b-1,z=k.getChartFilterKeys(b),C=k.cb[c],F=k.ey(c);l.each(F,function(c,m){u=[m.Xa,c];m.Gg!=F[0].Gg&&u.push(m.Gg);w=k.Br(e,b,u);p={ca:b||k.hc!=m.Gg?"":"price",s:w,m:b,dir:m.Gg,ka:m.ka,Pa:m.Pa,Wa:m.Wa,Xb:m.Xb};B=C.nb[A]||C.Id;m.Xa==q.mb?B=k.opt.color_line:l.isA(B)&&B[0]||(B=b?k.opt.color_line_subTech:k.opt.color_line_exMtTech);
p.Wa.color_line=p.Wa.color_gdn1=p.Wa.color_gdn2=B;if(!z&&C.Ku&&C.Ku[c]){var G=k.Pj(w,b,0);k.setChartFilterKey(G,1)}k.r.wb(m.Xa,m.S,p)})}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant.nu;l.ext(__MTS.ShellK.prototype,{La:p,getChartFilterKeys:function(b,c){var e={},k;0<=b&&this.ef(function(h,l){h.m!=b||c&&0!==h.s.indexOf(c)||(k=1,e[h.key]=l)});return k?e:p},clearChartFilter:function(b,c){var e=this;isNaN(b)?e.La={}:0<=b&&e.ef(function(k){k.m==+b&&(c&&0!==k.s.indexOf(c)||(e.La[k.key]=0))});return e},setChartFilterKey:function(b,c){var e=this.to(b),k=e.m,h=this.r.Qu(k,e.s);if(k=0<k&&this.B?this.B[k-1]:this.a)this.La||(this.La={}),
this.La[b]=c,0<=h&&0<=e.M&&k.dj(h,e.M,c,this.hc);return this},setChartFilterSwitch:function(b,c){var e=this,k,h,l=e.lb[b-1],n=e.lb[c-1],s={};e.ef(function(k,h){var l=k.s.split(q);k.m==b?k.m=c:k.m==c&&(k.m=b);1<l.length&&0<+l[1]&&(l[1]==b?l[1]=c:l[1]==c&&(l[1]=b),k.s=l.join(q));k.key=e.Pj(k.s,k.m,k.M);s[k.key]=h});e.La=s;h=k=p;l&&(k=l.Ti());n&&(h=n.Ti(),n.clearData().setData(k));l&&l.clearData().setData(h);e.triggerEvent("onPaintData");e.yf();return e},setChartFilterReSort:function(b,c){var e=this,
k,h=Array(e.B.length+1),m={};e.ef(function(b,c){var k,l=h[b.m]||{};h[b.m]||(h[b.m]=l);b.m=NaN;k=e.Pj(b.s,b.m,b.M);l[k]={is:c,s:b.s}});k=h.splice(b,1);h.splice(c,0,k[0]);l.each(h,function(b,c){l.each(c,function(c,e){var k=e.s.split(q);1<k.length&&0<k[1]&&(k[1]=b);c=c.split(";");c.splice(0,0,b);c[1]=k.join(q);c=c.join(";");m[c]=e.is})});e.La=m;var n=[];l.each(e.lb,function(b,c){n.push(c.Ti())});k=n.splice(b-1,1);n.splice(c-1,0,k[0]);l.each(e.lb,function(b,c){c.clearData().setData(n[b])});e.triggerEvent("onPaintData");
e.yf();return e},setChartFilterRemove:function(b){var c=this,e=b-1,k={};c.ef(function(e,h){if(e.m<b)k[e.key]=h;else if(e.m>b){e.m-=1;var l=e.s.split(q);1<l.length&&0<+l[1]&&(l[1]-=1,e.s=l.join(q));e.key=c.Pj(e.s,e.m,e.M);k[e.key]=h}});c.La=k;aa=a=p;for(var h=c.lb.length-1,l;h>=e;h--)l=c.lb[h],aa=l.Ti(),l.clearData().setData(a),a=aa;c.triggerEvent("onPaintData");c.yf();return c},ef:function(b){var c=this;l.each(c.La,function(e,k){b(c.to(e),k)})},to:function(b){var c=b.split(";"),e=c[0],k=NaN,h=NaN;
1<c.length&&(e=c[1],k=+c[0],h=+c[2]);return{key:b,s:e,m:k,M:h}},Pj:function(b,c,e){var k=[];isNaN(c)||k.push(c);k.push(b);isNaN(e)||k.push(e);return k.join(";")}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.ext(__MTS.ShellK.prototype,{lg:p,onGapX:function(b,c,e){return this.addEvent("onGapX",b,c,p,e)},tz:function(){var b=this.k,c=this.l.length-1,e=this.b,k=this.a.Ja(0);this.lg.ya(k.pos).la(k.Ka,k.oc).iw(this.rf).uE(c-b,e.length-1-b).sE(this.rc,this.sm,this.rm)},bz:function(){this.lg.init(this.f.find(".mts-sensor:first")).zc().gD(this.Vs,this).JC(this.ez,this).YC(this.gz,this).QC(this.fz,this)},Vs:function(b,c){var e=this.hf();this.Xj=1;this.ri=b;this.qi=
c;this.pg=2;this.a.paddingTop(b).xl(c).resize(this.hi,this.rf).Kb(e,q.qc);this.gc.setSize();this.pg=2},ez:function(b,c){this.Vs(b,c)},gz:function(b){var c;0<=b&&(this.Xj=1,c=b-this.rc)&&(this.k+=c,this.p+=c,this.rc=b,this.b=this.r.fa(this.l,this.rc).b,this.nf=1,this.Ih(),this.df(this.k,this.p),this.gc.setSize(),this.triggerEvent("onGapX"))},fz:function(){this.Xj=0}})});
__MTS.Util.go(function(u,p,l){l.ext(__MTS.ShellK.prototype,{ck:p,onKDrag:function(l,b,c){return this.addEvent("onKDrag",l,b,p,c)},cz:function(){this.ck.init(this.f.find(".mts-wrapK")).zc().hD(this.hz,this)},hz:function(l,b,c){var e=this.Pt,k=this.f.width();l?(this.B[l-1].setSize(k,b),this.vi(l-1),this.cg("mts-kSmallFont",b<e,this.B[l-1].f),this.B[l].setSize(k,c),this.vi(l),this.cg("mts-kSmallFont",c<e,this.B[l].f)):(l=this.ur(b),l>b&&(c=c+b-l,b=l),l=this.a.Ja(0),l.pos.setOption({Tc:this.Nh,jd:this.Lj,
Dl:0,Cl:0}),l.scale.setOption({aj:1,bj:1}),this.a.setSize(k,b),this.Nt(b),this.cg("mts-kSmallFont",b<e,this.a.f),this.B[0].setSize(k,c),this.vi(0),this.cg("mts-kSmallFont",c<e,this.B[0].f));this.nf=1;this.jc();this.Uz();this.triggerEvent("onKDrag")}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Shell.prototype;l.ext(__MTS.ShellK.prototype,{gc:p,lb:p,clearPaintEmptyText:function(){this.gc.yu();l.each(this.lb,function(b,c){c.yu()});return this},setPaintMode:function(b,c){this.vd(function(e,k){k.jq(b,c)});return this},setPaintEdit:function(b,c){var e=this.yn(c);e&&(b["delete"]?e.nE():b.colorBg?e.gw(b.colorBg,1):e.gw(b.color));return this},setPaintData:function(b){l.isA(b)?this.gc.setData(b):l.isO(b)&&this.vd(function(c,e,k){b[k]&&e.setData(b[k])});
return this},setPaintText:function(b,c,e,k){(k=this.yn(k))&&k.setText(b,c,e);return this},onPaintMode:function(b,c,e){return this.addEvent("onPaintMode",b,c,p,e)},onPaintEdit:function(b,c,e){return this.addEvent("onPaintEdit",b,c,p,e)},onPaintEditOff:function(b,c,e){return this.addEvent("onPaintEditOff",b,c,e)},onPaintText:function(b,c,e){return this.addEvent("onPaintText",b,c,p,e)},onPaintData:function(b,c,e){return this.addEvent("onPaintData",b,c,p,e)},yn:function(b){return 0<=b?this.lb[b]:this.gc},
Qj:function(b){var c=-1;b!=this.gc&&l.each(this.lb,function(e,k){if(b==k)return c=e,!1});return c},vd:function(b,c,e){var k=this.B,h=[this.gc];l.each(this.lb,function(b,e){(!c||k&&k[b]&&!k[b].nc)&&h.push(e)});l.each(h,function(c,k){e&&e==k||b(c,k,c-1)})},yf:function(){var b=this.Q?this.Jy:this.Iy;this.gc.fb!=b&&this.setPaintMode(b)},uz:function(){var b=this,c=b.a.Ja(0);b.vd(function(e,k,h){0<=h&&(c=b.B[h].Ja(0));k.ya(c.pos).la(c.Ka,c.oc).setSize()},1)},dz:function(b){this.gc.setOption(this.opt).init(this.f.find(".mts-view:eq(0)")).XC(this.mz,
this);for(var c=0,e;c<b;c++)(e=this.lb[c])||(e=this.lb[c]=new __MTS.Painting),e.setOption(this.opt).init(this.f.find(".mts-view:eq("+(c+1)+")"))},Qs:function(b,c){b.qe(c.P).zc().onStart(this.nz,this).NC(this.jz,this).bD(this.oz,this).OC(this.kz,this).LC(this.iz,this).VC(this.lz,this)},mz:function(b,c,e,k){var h=this;b=h.Qj(b);h.of=c&&"pEdit"!==c?1:0;h.of&&(h.Q=0);h.Q=c?0:1;h.a&&(h.a.Mb(h.Q),l.each(h.B,function(b,c){c.nc||c.Mb(h.Q)}));h.triggerEvent("onPaintMode",[c,{cr:e,crBg:k,subIdx:b}])},oz:function(b,
c,e,k){b=this.Qj(b);k.subIdx=b;this.triggerEvent("onPaintText",[e,k,c])},jz:function(b,c,e,k,h){b=this.Qj(b);this.of=0;this.triggerEvent("onPaintEdit",[e,{cr:k,crBg:h,subIdx:b},c])},nz:function(b,c,e){e&&(this.of=1,isNaN(this.Me)||q.nk.apply(this));this.vd(function(b,c){c.refresh()},1,b)},kz:function(b){b=this.Qj(b);this.triggerEvent("onPaintEditOff",[b])},iz:function(){this.triggerEvent("onPaintData")},lz:function(b,c){this.vd(function(b,k){k.jq(c)},0,b)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Template,b=__MTS.Shell.prototype;l.regInherit("ShellRotate",__MTS.Shell,{main:function(){__MTS.Shell.apply(this,arguments);this.Gb.setDef("Rotate");this.ac.setDef("Rotate")},Qn:0,Aa:0,Im:p,onDele_TipTmplInfo:function(b,e,k){return this.addEvent("onDele_TipTmplInfo",b,e,p,k)},onTipStart:function(b,e,k){return this.addEvent("onTipStart",b,e,p,k)},Eh:function(){this.a?this.a.setOption(this.opt):(this.a=new __MTS.ViewRotate(this.opt),this.a.init(this.f.find(".mts-view:first")).suspendTipDbClick(!this.opt.s_dbclick_tipOn).ne(this.ic,
this).me(this.Kc,this).Kd(this.ta,this).vl(this.vf,this).Xg(this.ae,this).ul(this.zd,this).Wi(this.$d,this));this.Tb()},$d:function(){this.Xd=1},ae:function(){this.Qn=1;b.ae.apply(this,arguments)},zd:function(){this.Qn=0;this.a.setTipTemplate("");b.zd.apply(this,arguments)},vf:function(){this.triggerEvent("onTipStart",[this.ia,this.Im])},ta:function(b){var e=[],k=this.q,h,m=this.r.Si(),n=this.opt.color_line,p=b.idx,t={txt:"",idx:p,y:b.Za,x:[],cr:[],title:k.FD||"",titleUnit:k.GD||"",legend:k.Fi||[],
unit:k.Ef||[]};this.ia=isNaN(p)?this.p:this.k+p;m.S.Rc(function(b,c,e){t.x[e]=b[p];t.cr[e]=n[e%n.length]});h=[];h.push(t.title);l.isNum(t.y)?h.push(l.fmtNum(t.y)):h.push(t.y);h.push(t.titleUnit);e.push(q.Nb(h.join("")));l.each(t.x,function(b,c){h=[];t.legend[b]&&h.push(t.legend[b]);h.push(l.fmtNum(c));t.unit[b]&&h.push(t.unit[b]);e.push(q.Nb(h.join(""),"",{color:t.cr[b]}))});t.txt=e.join("");this.hasEvent("onDele_TipTmplInfo")&&(m=this.triggerEvent("onDele_TipTmplInfo",[t]))&&(t=m);if(!k.Sa||this.Qn)t&&
t.txt&&this.a.setTipTemplate(t.txt),this.Im=this.Sj(b),this.triggerEvent("onTipMove",[this.ia,this.Im]);return b}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.DataParser,c=__MTS.Shell.prototype;l.regInherit("ShellStock",__MTS.Shell,{main:function(){__MTS.Shell.apply(this,arguments);this.Gb.setDef("Stock");this.ac.setDef("Stock");this.eb=new __MTS.Lines;this.Ua=new __MTS.Lines;this.mg=new __MTS.Lines;this.ei=new __MTS.Lines;this.Hb={};this.Je={};this.addEvent("DelePnParam",this.Qy,this);this.addEvent("DelePnOpt",this.Py,this);this.addEvent("DeleChartOpt",this.Oy,this);this.addEvent("_onDraw",this.io,
this)},opt:{gj:0,fm:q.left,Sp:20,Zg:20},l:p,ab:p,eb:p,Ua:p,mg:p,ei:p,tc:p,Hb:p,Je:p,Aa:0,Qm:0,Xm:0,AA:"",zA:"",hc:-1,setData:function(b,c,h,l){c=this.dg(b,c,h,l,0);if(!c)return this;this.tc={};b=this.Jo(c,0);b=this.Sm(b.start,b.end,c,this.tc);this.Qm=b.yb;this.tc.Jf=b.Jf;this.ab=b.X;this.eb.clear().ej(b.Y.ed(0),0);this.Ua.clear().ej(b.V);this.mg.clear().ej(b.$b?b.$b[0]:p);this.ei.clear().ej(b.$b?b.$b[1]:p);this.Xm=b.$b?b.pm:0;return this},addData:function(b,c,h,l){var n=this.ab.length-1;c=this.dg(b,
c,h,l,this.Qm);if(!c)return this;b=this.Jo(c,1);b=this.Sm(b.start,b.end,c,this.tc);this.Qm=b.yb;0>this.tc.Jf&&(this.tc.Jf=b.Jf);c=this.ds(b.X[0],this.ab);this.ab=this.ab.slice(0,c).concat(b.X);this.eb.Mi(b.Y.ed(0),0,c);b.V&&this.Ua.Mi(b.V,0,c);b.$b&&(this.mg.Mi(b.$b[0],0,c),this.ei.Mi(b.$b[1],0,c),b.pm>this.Xm&&(this.Xm=b.pm));this.ia==n&&(this.ia=this.ab.length-1);return this},addRef:function(b,c){b||(b="");var h;h=this.q;if(!h||!h.se||!this.l||this.Je[b])return this.Je[b]||(this.Je[b]=[]),this.Je[b].push(c),
this;var l=this.Hb[b],n=l?l.yb:0,q=c.PC||l.PC,t=this.dg(c.X,c.Y,p,p,n);if(!t)return this;this.Oz(t);t.Y.DB(1/q*h.se,4);h=this.Jo(t,n);h=this.Sm(h.start,h.end,t);n?(n=this.ds(h.X[0],this.ab),l.X=l.X.slice(0,n).concat(h.X),l.Y.Mi(h.Y.ed(0),0,n),l.yb=h.yb):this.Hb[b]={X:h.X,Y:h.Y,PC:c.PC,yb:h.yb};return this},clearRef:function(){l.each(this.Hb,function(b,c){l.clearObj(c)});this.Hb={};this.Je={};return this},Eh:function(){c.Eh.apply(this,arguments);this.a.Mf(this.Wc,this).me(this.Kc,this).Kd(this.ta,
this).ne(this.ic,this).tv(this.fo,this).ql(this.vg,this).rl(this.lk,this).Wg(this.yd,this)},ds:function(b,c){for(var h=c.length,l=h;0<=l;l--)if(c[l]==b){h=l;break}return h},Ux:function(b,c,h){if(isNaN(v))return NaN;v=l.round(v/c-1,4);return h?1+v:100*v},fF:function(b,c,h){var m=this;b.Rc(function(b){l.each(b,function(e,l){b[e]=m.Ux(l,c,h)})})},Eb:function(){this.eb.destroy();this.Ua.destroy();this.mg.destroy();this.ei.destroy()},Fb:function(){c.Fb.apply(this,arguments);this.f.addClass("mts-stockChart")},
tb:function(){var e=this.q;c.tb.apply(this,arguments);e.am||(e.am="09001330");e.zb||(e.zb=[1]);this.l=b.Lu(e.am);this.AA=this.l[0];this.zA=this.l[this.l.length-1];this.b=this.r.fa(this.l).b},io:function(){var c=this,k=0,h=0,m=c.q,n=c.hc;if(!m||!m.se)return c;1<m.zb.length&&(h=1);c.b=c.r.fa(b.IB(c.l)).b;c.r.cp();c.r.wb("StockLine",c.eb,{ca:"price",m:k,dir:n,ka:[["\u958b:","\u9ad8:","\u4f4e:","\u6536:"]]});l.each(c.Je,function(b,k){if(!k)return!0;var h=k.slice();c.Je[b]=void 0;l.each(h,function(k,h){c.addRef(b,
h)},"price")});l.each(c.Hb,function(b,h){c.r.wb("StockLine",h.Y,{ca:"price",m:k,dir:n})});c.Ua.va()&&(h?k=1:n*=-1,c.r.wb("Bar",c.Ua,{ca:"vol",m:k,dir:n,ka:["\u91cf"]}));h&&c.mg.va()&&(n*=-1,c.r.wb("Bar",c.mg,{ca:"diffup",m:0,dir:n,Xb:{Vv:0}}),c.r.wb("Bar",c.ei,{ca:"diffdn",m:1,dir:n,Xb:{Uv:0}}))},Qy:function(b){var c=this.q,h=b.ca;"vol"==h?2>c.zb.length&&(b.nm=2/3):"diffup"==h?b.cl=25:"diffdn"==h&&(b.mp=25);return b},Py:function(b,c){var h=this.q,l=c.ca;if("price"==l)b.$p=1,b.El=1.02*h.se,b.Fl=0.98*
h.se,h.bm&&(b.Wp=h.bm,1===h.vw&&(b.El=h.bm)),h.$l&&(b.Xp=h.$l,1===h.vw&&(b.Fl=h.$l));else if("diffdn"==l||"diffup"==l)b.jd=0,b.Tc=0;return b},Oy:function(b,c,h){c=this.q;var l=[0,0,0,0];h=h.ca;b.Hg=0;if("price"==h)b.Cc=0,c.se&&(b.Wb=c.se);else if("vol"==h)b.Cc=2,2>c.zb.length&&(b.s_border=l);else if("diffdn"==h||"diffup"==h)b.s_border=l,b.gb=0,b.Pc=0,b.tu=0,b.color_line="diffdn"==h?[this.opt.color_vol_dn]:[this.opt.color_vol_up],b.color_gdn1=b.color_gdn2="diffdn"==h?[this.opt.color_vol_dnin]:[this.opt.color_vol_upin];
return b},Wc:function(b){0<+b.txt.toString().split(":")[1]&&(b.txt="");return b},Kc:function(b,c){var h=this.q,l=b.val,n=c.ca;"price"==n?(l>h.se?(b.cr=this.opt.color_txt_up,l==h.bm&&(b.cr=this.opt.color_txt_upin,b.bg=this.opt.color_bg_upin)):l<h.se?(b.cr=this.opt.color_txt_dn,l==h.$l&&(b.cr=this.opt.color_txt_dnin,b.bg=this.opt.color_bg_dnin)):b.cr=this.opt.color_txt_base,b.txt=l):"vol"==n&&(b.cr=this.opt.color_txt_base);return b},ic:function(b,c){var h=this.tc[b.idx],l=this.b;if(0>c&&h>b.idx)for(var n=
b.idx;0<=n&&!(h=this.tc[n],h<b.idx||isNaN(h));n--);else if(0<c&&h<b.idx)for(n=b.idx;n<l.length&&!(h=this.tc[n],h>b.idx||isNaN(h));n++);0>h?h=0:h>l.length-1&&(h=l.length-1);b.J=b.idx=h;return b},ta:function(b,k){var h=this.tc[b.idx],l=this.b;isNaN(+h)?h=this.tc[this.ab.length-1]:!h&&0<this.tc.Jf&&(h=this.tc.Jf);b.J=b.idx=h;b.c=b.pos.c(b.J);b.Ta=l[b.J];b.D=b.points[b.J];b.i=b.pos.i(b.D);b.Za=b.D;return c.ta.apply(this,arguments)},vg:function(b,c){var h=c.Nf.ca;if(0<c.m||"price"==h)return b},lk:function(b,
c,h){h=h.Nf.ca;if("price"==h&&2>c&&1>b.M||"vol"==h)return b},fo:function(b,c){c&&(b=this.ab.length-1);return b},yd:function(c){var k=new __MTS.LegendMgr;c.Pg(function(c,e){0==c&&k.gq(0,e.x,e.y).iq(0,e.label);l.each(e.Oe,function(c,e){l.each(e,function(c,e){e.txt=b.np(e,e.val)});k.So(0,e)})});return k},tm:function(b,c){var h,l,n,p=h=0,q=0;c||(c=this.l);for(;q<b.length;q++){h=c[p];n=b[q];if(p==c.length-1)break;l=c[p+1];if(n>h&&n<l)h=1;else if(n>=h){for(;p<c.length&&!(h=c[p],h>n||2400==h);p++);p>=c.length||
n>c[p-1]&&n<h?(p--,h=1):h=0}else h=1;h&&(c.splice(p,0,n),p++)}},Eq:function(b){for(var c=-1,h=0,l=[];h<b.length;h++)if(b[h]>=this.l[0]){c=h;break}if(c){for(h=0;h<c;h++)0!=+b[h]&&l.push(b[h]);this.l=l.concat(this.l)}},um:function(c){var k="",k=[],k=b.Mu(this.l[this.l.length-1],4),k=k+b.Mu(c[c.length-1],4),k=b.Lu(k);1<k.length&&30>=k.length&&(k.splice(0,1),this.l=this.l.concat(k))},Rt:function(b,c,h){for(var l=-1,n,p,q,w=1;w<b.length;w++)if(n=b[w-1],p=b[w],!q&&c&&(p>=c[0]&&p<=c[c.length-1]?q=-1:p>=
h[0]&&p<=h[h.length-1]&&(q=1)),n>p){l=w;break}0<=l?(c=b.slice(0,l),b=b.slice(l)):-1==q?(c=b,b=[]):c=[];return[c,b]},Jo:function(b,c){var h=b.X,l=b.yb,n=this.q.am,p=-1,q=-1;if(!h.length)return{start:-1,end:-1};1<n.replace(/2400;0000/g,"").split(";").length&&(0<n.indexOf("2400;0000")?(n=this.Rt(this.l),partX=this.Rt(h,n[0],n[1]),this.tm(partX[0],n[0]),this.tm(partX[1],n[1]),this.l=n[0].concat(n[1])):this.tm(h));for(i=0;i<this.l.length;i++)if(this.l[i]==h[0]){p=i;break}for(i=this.l.length-1;0<=i;i--)if(this.l[i]==
h[h.length-1]){q=i;break}-1===p&&-1===q?(0<l?(this.um(h),p=l+1):(this.Eq(h),p=0,h.length>this.l.length/2&&this.um(h)),q=this.l.length-1):-1===p?(this.Eq(h),p=0):-1===q&&(this.um(h),q=this.l.length-1);c||(p=0);return{start:p,end:q}},Sm:function(b,c,h,m){if(0>b)return h;var n=b?b:0;firstValidIdx=-1;X=h.X;Y=h.Y;V=h.V;Diff=h.$b;o={X:[],Y:(new __MTS.Lines).hC(Y),V:V?[]:p,$b:Diff?[[],[]]:p,yb:h.yb};m&&m[b]&&(n=m[b]);for(var q=h=0,t=n,w;b<=c&&!(h>=X.length);b++){w=X[h];q=this.l[b];o.X.push(q);w%2400==q%
2400?(o.Y.aB(Y,h),V&&o.V.push(+V[h]),Diff&&(o.$b[0].push(+Diff[0][h]),o.$b[1].push(+Diff[1][h])),q=1,t=n,n=b,0>firstValidIdx&&(firstValidIdx=b)):(o.Y.bB(),V&&o.V.push(NaN),Diff&&(o.$b[0].push(NaN),o.$b[1].push(NaN)),q=0);if(m&&(m[b]=n,1<n-t))for(w=t+l.floor((n-t)/2);w<n;w++)m[w]=n;q&&h++}o.Y.Te();o.yb=q?n-1:n;o.Jf=firstValidIdx;return o},dg:function(b,c,h,m,n){var s=this.q,s=s?s.dataType:"",t=new __MTS.Lines,w=0,u=[],B=[];if(l.isA(b)&&l.isA(c)&&c.length)return l.isA(m)&&l.each(m,function(b,c){c=+c;
0>c?(B.push(c),u.push(0)):(B.push(0),u.push(c));Math.abs(c)>w&&(w=Math.abs(c))}),b=s!==q.pq&&b.length&&0<b[0].toString().indexOf(":")?l.map(b,function(b){b=b.split(":");return+(b[0]+b[1])}):b.slice(),l.isA(c[0])?l.each(c,function(b,c){var e=l.map(c,function(b){b=""===b?NaN:+b;isNaN(b)||(b=l.round(b,6));return b});t.xb(e)}):t.xb(c.slice()),{X:b,Y:t,V:l.isA(h)?h:p,$b:u.length?[u,B]:p,pm:w,yb:n}},Oz:function(b){var c,h=0,m=[],n=[],p=new __MTS.Lines;l.each(b.Y.Da,function(b,c){n[b]=[];l.each(c,function(c){n[b][c]=
[]})});for(var q=0,w;q<this.l.length;q++){w=this.l[q];for(c=b.X[h];c<w;)h++,c=b.X[h];c==w&&(m.push(c),l.each(b.Y.Da,function(b,c){l.each(c,function(c,e){n[b][c].push(e[h])})}),h++)}b.X=m;b.Y=p.xa(n)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Template,b=__MTS._ShellOne.prototype;l.regInherit("ShellPie",__MTS._ShellOne,{main:function(){__MTS._ShellOne.apply(this);this.a=new __MTS.ViewPie;this.Gb.setDef("Pie");this.ac.setDef("Pie");this.addEvent("_onInitTemplate",this.li);this.addEvent("_onParams",this.tb);this.addEvent("_onResize",this.qz)},bf:p,a:p,b:p,Na:p,Rb:0,Mn:0,setData:function(b,e){var k=[],h=this.q;l.each(b,function(b,c){k.push({x:c,y:e[b]||0})});h&&0==h.lD||k.sort(function(b,c){return c.y-
b.y});this.b=l.map(k,function(b){return b.x});this.Na=l.map(k,function(b){return b.y});this.a.setData(this.b,this.Na,5===this.opt.Tf);this.Mn=0;return this},setText:function(b){this.a.ZD(b);return this},draw:function(b){this.triggerEvent("onBeforeDraw");isNaN(b)||(this.Rb=b);this.Bd();this.Tb();this.a.setOption(this.opt).Mb(this.Q).Ia().draw(this.Rb);return this},onBeforeDraw:function(b,e,k){return this.addEvent("onBeforeDraw",b,e,p,k)},onDele_PieText:function(b,e){this.a.onDele_PieText(b,e);return this},
onDele_PieTextCenter:function(b,e){this.a.onDele_PieTextCenter(b,e);return this},Bd:function(){var b=this,e=[],k=b.q||{},h,m=b.opt.color_pie,n=m.length,s=l.isA(k.Ef)?k.Ef[0]:"";k&&"none"==k.Bv?b.bf.empty():b.Mn||(b.Mn=1,s||(s=""),e.push("<div>"),l.each(b.b,function(k,w){h="background-color:"+m[k%n];e.push(q.pa("mts-pie-row"),q.span("mts-pie-cr",p,h),"</span>",q.span("mts-pie-txt"),l.fmtNum(b.Na[k]),s," (",w,")","</span>","</div>")}),e.push("</div>"),b.bf.html(e.join("")))},li:function(){this.f.html([q.view(),
q.pa("mts-pie-legend"),"</div>"].join("")).addClass("mts-PieChart");this.bf=this.f.find(".mts-pie-legend")},$d:function(b){this.Xd=1;this.triggerEvent("onDraw",[b])},tb:function(){var b=this.q,e;b.Rf&&this.a.setOption(this.opt);this.opt.Tf=b.mD||1;e=b.Bv;this.f.removeClass("pieLg pieLg-L pieLg-R");e&&("left"==e?this.f.addClass("pieLg pieLg-L"):"right"==e&&this.f.addClass("pieLg pieLg-R"));2==b.Sa?this.Rb=-1:isNaN(b.Av)||(this.Rb=b.Av)},qz:function(){this.a.Ia().draw(this.Rb);this.triggerEvent("onResize")},
zd:function(){b.zd.apply(this,arguments);this.opt.Nd&&this.draw(-1)},Tb:function(){var b=this.f.width(),e=this.f.height(),k=this.bf.height()||0;this.f.hasClass("pieLg")&&(b=this.f.find(".mts-view").width(),k=0);this.a.setSize(b,e-k)}})});
__MTS.Util.go(function(u,p,l){l.regInherit("ShellRadar",__MTS._ShellOne,{main:function(){__MTS._ShellOne.apply(this);this.a=new __MTS.ViewRadar;this.Gb.setDef("Radar");this.ac.setDef("Radar");this.addEvent("_onParams",this.tb)},a:p,Q:0,tb:function(){var l=this.q;l.Rf&&this.a.setOption(this.opt);this.Q=this.opt.s_rd_tip;this.opt.jm=l.AD?1:0}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template;l.regInherit("ShellScatter",__MTS._ShellOne,{main:function(){__MTS._ShellOne.apply(this);this.a=new __MTS.ViewScatter;this.Gb.setDef("Scatter");this.ac.setDef("Scatter");this.addEvent("_onInitTemplate",this.li);this.addEvent("_onInitViewEvent",this.lo);this.addEvent("_onParams",this.tb);this.addEvent("_onDrawBefore",this.Zd)},opt:{Up:10,Tp:10,jd:10,Tc:10},bf:p,an:p,Ej:p,Ym:p,a:p,Vj:p,Ai:"",Cg:"",Ci:"",Di:"",moveTipAt:function(b){this.a.Kb(b);
return this},getLegendSymbol:function(b){var e="";this.Vj&&(b=this.Vj[b])&&(e=this.Dr(b.symbol,b.cr));return e},getLegendDLevel:function(){return this.Cr()},getLinreg:function(){return this.a.fi},onDele_ChartLegend:function(b,e,k){return this.addEvent("onDele_ChartLegend",b,e,p,k)},onDele_DLevelLegend:function(b,e,k){return this.addEvent("onDele_DLevelLegend",b,e,p,k)},Bd:function(){var c=[],e=this.a.g.F,k=this.a.XB();k&&(k.titleX=this.Ai?this.Ai+":":"",k.titleY=this.Cg?this.Cg+":":"",k.unitX=this.Ci,
k.unitY=this.Di,(k=this.hasTriggerEvent("onDele_ChartLegend",[k,this],k))&&!e&&c.push(b.pa("mts-sct-lgInfo"),b.Nb(k.legend,"mts-sct-lgTitle"),b.Nb(k.titleY+k.y+k.unitY,"mts-sct-lgY"),b.Nb(k.titleX+k.x+k.unitX,"mts-sct-lgX"),"</div>"),this.a.setTipTemplate(c.join("")))},aA:function(){var b="",e=[],k,h=this.q,m=this.opt.color_line,n=this.opt.ap;l.each(this.opt.bp,function(b,c){if(!c)return!0;e.push({symbol:c.kh||n[b%n.length],cr:c.cr||m[b%m.length],txt:c.txt})});this.Vj=(k=this.hasTriggerEvent("onDele_DLevelLegend",
[e],e))||e;!h.Bc&&k&&(b=this.Cr());this.Ym.html(b)},Cr:function(){var c=this,e=[];l.each(c.Vj,function(k,h){e.push(b.pa("mts-sct-dlv"),c.Dr(h.symbol,h.cr),b.Nb(h.txt,"mts-sct-dlegend"),"</div>")});return e.join("")},Dr:function(c,e){var k=[],h={},l={};switch(c){case "star":case "dia":l["border-top-color"]=e;case "trapz":case "tri":case "trailline":case "trail":l["border-bottom-color"]=e;break;default:h["background-color"]=e,l.display="none"}k.push(b.pa("mts-sct-symbol mts-sct-"+c,p,h),b.pa("mts-x0",
p,l),"</div>",b.pa("mts-x1",p,l),"</div>",b.pa("mts-x2",p,l),"</div>","</div>");return k.join("")},li:function(c){c.hasClass("mts-scatter")||c.html(b.LD()).addClass("mts-scatter");this.bf=c.find(".mts-sct-legend");this.an=c.find(".mts-sct-titleX");this.Ej=c.find(".mts-sct-titleY");this.Ym=c.find(".mts-sct-DLevel")},lo:function(){this.a.eD(this.qo,this)},tb:function(){var b=this.q,e,k=this.Wr(this.Ai,this.Ci),h=this.Xr(this.Cg,this.Di);b.Rf&&this.a.setOption(this.opt);b.fq&&this.a.ew(+b.fq[0],+b.fq[1]);
e=l.isA(b.cj)?b.cj:[];(l.isO(b.cj)||l.isA(b.cj))&&l.each(b.cj,function(b,c){c&&(l.isStr(c)&&(c={txt:c}),c.symbol&&(c.kh=c.symbol.toLowerCase()),e[b]=c)});this.opt.bp=e;this.opt.Kw=b.MD?1:0;this.Ci=b.QD||"";this.Di=b.RD||"";this.opt.wu=this.Ci;this.opt.Qe=this.Di;this.Ai=b.OD||"";e=this.Wr(this.Ai,this.Ci);k!=e&&this.an.html(e);this.Cg=b.PD||"";e=this.Xr(this.Cg,this.Di);h!=e&&this.Ej.html(e);this.opt.xu=b.cw?b.cw:"auto";this.opt.ap=b.ND||"dia tri rect cir star trapz".split(" ");e=b.oB==q.right?q.right:
q.left;this.opt.Qc=this.opt.fm=e;this.opt.ke=b.Bc?0:1;this.opt.Oc=b.Bc?0:1;this.opt.od=this.opt.Pc=b.Bc?0:1;this.opt.We=this.opt.gb=b.Bc?0:1},Wr:function(b,e){var k=[b];b&&e&&k.push("  ",e);return k.join("")},Xr:function(b,e){var k=[b];b&&e&&k.push("  ",e);return k.join("")},Zd:function(){this.Bd();this.aA();this.Tb()},Tb:function(){var b=this.f.width(),e=this.f.height(),k=0,h=this.bf.height()||0,m=this.Ym.height()||0,n=this.an.height()||0,p=this.Ej.height()||0,p=l.round(-p/2)-this.opt.s_fontSizeX;
this.Cg&&(k=20);this.Ej.css("margin-top",p);this.a.setSize(b,e-h-m-n,k,0)},I:-1,pi:function(){var b;this.triggerEvent("onTipMove",arguments);this.Bd();b=this.a.I;b!==this.I&&(this.I=b,this.a.Ue(b),!l.isIE(8)&&this.Xd&&this.a.Jb())},qo:function(){this.pi()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS._ShellOneSLD.prototype;l.regInherit("ShellBullet",__MTS._ShellOneSLD,{zj:p,Tm:p,Um:p,main:function(){__MTS._ShellOneSLD.apply(this);this.a=new __MTS.ViewBullet;this.Gb.setDef("Bullet");this.ac.setDef("Bullet");this.addEvent("_onParams",this.tb);this.addEvent("_onSetData",this.sz);this.addEvent("_onPartialData",this.pz)},opt:{jd:1,Tc:1},sz:function(b,c,e,k){this.b=b;this.zj=c;this.Tm=e;this.Um=k;return this},pz:function(b,c){var e,k,h,m,n,p,q,w=this.b.slice(b,
c+1);n=this.zj[0];m=this.zj[1];l.isA(n)||(n=this.zj,m=[]);e=n.length;k=b-e;h=c-e;0>k&&(k=0);-1>h&&(h=-1);n=[n.slice(b,c+1),m.slice(k,h+1)];this.Tm&&(p=this.Sr(this.Tm,k,h));this.Um&&(q=this.Sr(this.Um,k,h));e-=b;m=m[0];this.a&&(this.a.setData(w,n),(p||q)&&this.a.addData(p,q),0>e&&this.a.re(e,m))},Sr:function(b,c,e){var k=[],h;l.each(b,function(b,n){l.isA(n[0])?(h=[],l.each(n,function(b,k){h.push(k.slice(c,e+1))})):h=n.slice(c,e+1);k.push(h)});return k},tb:function(){var b=this.q,c,e,k,h={type:"",
opt:{ru:0}},l={type:"Chart",opt:{Dc:p,Ig:1}},n={type:"Bullet",opt:{Dc:p}},q={type:"Chart",opt:{}};this.opt.yq=this.opt.Vp=+b.yl;(k=b.Gd)&&0==k.indexOf("dashed")&&(l.type="Dashed","dashed-nparea"==k?(l.type="NPDashed",n.type="NPLine",h.type="NPArea"):"dashed-area"==k&&(n.type="Chart",h.type="Area",n.opt.Ii=0,isNaN(+b.yl)&&(this.opt.yq=0)));this.opt.od=b.ml&&!this.Aa?0:1;this.opt.We=b.nl&&!this.Aa?0:1;this.opt.Pc=b.ml?0:1;this.opt.gb=b.nl?0:1;this.opt.Qe=b.Vo||"";this.opt.kj=b.xw?1:0;b.je&&(l.opt.Dc=
[b.je[0]],n.opt.Dc=b.je,q.opt.Dc=[b.je[b.je.length-1]]);b.To&&(c=b.To[0],e=b.To[1]);b.Bc&&(this.Aa=this.Q=0,this.opt.od=0,this.opt.We=0,this.opt.ke=0,this.opt.Yo=1,this.opt.Pc=0,this.opt.gb=0);this.a.$D([h,l,n,q]).iE(b.kB,b.lB,b.mB).hq(c,e)},yd:function(b){var c=this.q;b.x=__MTS.DataParser.dl(b.x,this.opt.ld);b=q.yd.apply(this,arguments);return c.Bc?!1:b}})});
__MTS.Util.go(function(u,p,l){u=__MTS.Constant;var q=__MTS.Shell.prototype;l.regInherit("ShellRef",__MTS.Shell,{main:function(){__MTS.Shell.apply(this,arguments);this.Ke={};this.zo=(new __MTS.OptionMgr).setDef(this.Qz);this.addEvent("_onAfterViewData",this.ki,this)},Ke:p,zo:p,Qz:{CD:{name:"legend",type:u.oa},DD:{name:"unit",type:u.oa},Kv:{name:"color",type:u.oa}},addRef:function(b,c,e){c=this.zo.clear().setOption(c).get();e||(e=[]);this.Ke[b]=l.ext({BD:e},c);return this},removeRef:function(b){this.Ke[b]&&
(l.clearObj(this.Ke[b]),this.Ke[b]=p);return this},clearRef:function(){var b=this;l.each(b.Ke,function(c){b.removeRef(c)});return b},yk:function(){var b=this,c,e=b.r.Tu(0),k=e?e.Hd.length-1:0;0<=k&&(e.Hd[0].Wa.Dc=[2]);q.yk.apply(this,arguments);0<=k&&l.each(b.Ke,function(e,m){k++;m&&(c=l.ext({ke:0,Oc:0,Pc:0,gb:0,Cc:k,Ki:m.CD,Li:m.DD},b.opt),m.Kv&&(c.color_line=m.Kv),b.a.wb(0,"",c))})},ki:function(b,c){var e=this,k=e.r.Tu(0),h=k?k.Hd.length-1:0;0<=h&&l.each(e.Ke,function(k,l){if(l){var p=new __MTS.Lines;
p.xb(l.BD.slice(b,c+1));h++;e.a.xa(h,p)}})},Eb:function(){this.clearRef();this.zo.destroy();q.Eb.apply(this,arguments)}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant,b=__MTS.Template,c=__MTS.ShellRef.prototype;l.regInherit("ShellBS",__MTS.ShellRef,{main:function(){__MTS.ShellRef.apply(this,arguments);this.Gb.setDef("Chart BS");this.ac.setDef("BS");this.addEvent("_onInit",this.Fb);this.addEvent("_onAfterViewData",this.ki)},opt:{gj:0},du:"ViewBS",Cm:p,vj:p,wj:p,uj:p,Sq:-1,Tq:"",setDataBG_byBS:function(b,c,h){this.Cm=b;this.vj=this.rr(c,1);this.wj=this.rr(h,-1);this.vj.sort(function(b,c){return c.ob-b.ob});this.wj.sort(function(b,
c){return c.ob-b.ob});this.wt(this.vj,1);this.wt(this.wj,-1);this.uj=this.vj.concat(this.wj);this.uj.sort(function(b,c){return b.Ab-c.Ab});return this},wt:function(b,c){var h=0<c?this.opt.color_bs_buy:this.opt.color_bs_sell;l.each(b,function(b,c){c.cr=h[b]||h[h.length-1]})},rr:function(b,c){var h,m=[],n=this.Cm;l.each(b,function(b,e){h={sign:c};l.each(e,function(b,c){var e=n[b];e&&e.id&&(h[e.id]=c,"price"==e.id?h.Ab=+c:"vol"==e.id?h.ob=+c:"date"==e.id&&(h.date=__MTS.DataParser.fmtDateLabel(c)))});
m.push(h)});return m},onBS:function(b,c,h){return this.addEvent("onBS",b,c,p,h)},Fb:function(){c.Fb.apply(this,arguments);this.opt.s_slider_limit=1;this.f.addClass("mts-bsChart")},tb:function(){c.tb.apply(this,arguments);this.q.Xl||(this.opt.s_slider_min=3)},Wc:function(b,k){var h;b.type==q.min&&(h=b.txt.split("/"),4==h[0].length&&(h=h.slice(1)),b.txt=h.join("/"));return b=c.Wc.apply(this,arguments)},ki:function(b,k){c.ki.apply(this,arguments);this.a.Uk();this.a.setDataBG(this.uj)},ta:function(b,
k){b=c.ta.apply(this,arguments);var h=this,m=[],n,p=-1,t;if((t=h.a.WB(b.xv,b.yv))&&(b.c!=b.xv||b.i!=b.yv)&&(b.c=(t.A+t.aa)/2,b.i=(t.t+t.ga)/2,p=t.idx,n=h.uj[p])){if(h.Sq!=p||h.Tq!=k)t=k==q.yw?"hover":"move",h.triggerEvent("onBS",[n,t]);l.each(h.Cm,function(b,c){c.legend&&m.push(h.qn(c.legend,n[c.id]))})}h.Sq=p;h.Tq=k;h.a.yE(-1<p?1:0).eE(p).setTipTemplate(m.join(""));return b},qn:function(c,k){if(!c||!l.isSNum(k))return"";0<c.indexOf("{D}")?c=c.replace("{D}",k.split(" ")[0]):0<c.indexOf("{V}")?c=c.replace("{V}",
l.fmtNum(k)):0<c.indexOf("{B}")?c="<b>"+c.replace("{B}",k)+"</b>":0<c.indexOf("{P}")?c=c.replace("{P}",l.round(100*k,2)):0<c.indexOf("{S}")&&(c=c.replace("{S}",k));return b.Nb(c,"mts-bsCell")}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Template,b=__MTS.ShellRef.prototype;l.regInherit("ShellBubble",__MTS.ShellRef,{main:function(){__MTS.ShellRef.apply(this,arguments);this.Gb.setDef("Chart Bubble");this.ac.setDef("Bubble");this.sc=new __MTS.Bubble;this.addEvent("_onAfterViewData",this.ki,this)},opt:{gj:0},gg:1,sc:p,Rm:p,Ae:p,setBubble:function(b,e,k){this.Rm=b;this.Ae=[];this.sr(e,1);this.sr(k,-1);this.sc.setData(this.Ae);return this},getBubbleList:function(){return{buy:this.sc.Dm,sell:this.sc.Ao,
crup:this.opt.color_vol_upin,crdn:this.opt.color_vol_dnin}},onBubble:function(b,e,k){return this.addEvent("onBubble",b,e,p,k)},sr:function(b,e){var k=this,h,m=k.Rm;l.each(b,function(b,c){h={sign:e};l.each(c,function(b,c){var e=m[b];e&&e.id&&(h[e.id]=c,"price"==e.id?h.Ab=+c:"vol"==e.id?h.ob=+c:"date"==e.id&&(h.T=__MTS.DataParser.fmtDateLabel(c)))});k.Ae.push(h)})},Fb:function(){b.Fb.apply(this,arguments);this.opt.s_slider_limit=1;this.sc.setOption(this.opt).init(this.f.find(".mts-view"))},Eb:function(){this.sc.destroy();
b.Eb.apply(this,arguments)},tb:function(){b.tb.apply(this,arguments);var c=this.q;c.Xl||(this.opt.s_slider_min=1);0<=c.lu&&this.sc.aE(c.lu);this.sc.bE(c.hB?0:1)},ta:function(c,e){c=b.ta.apply(this,arguments);var k=this,h,m,n=[];!c.gd&&(h=k.sc.OB(c.iD,c.jD))&&(c.c=h.c,c.i=h.i,c.Za=h.Ab,m={},l.each(k.Rm,function(b,c){c.id&&(m[c.id]=h[c.id]);c.legend&&n.push(k.qn(c.legend,h[c.id]))}),k.triggerEvent("onBubble",[m]));k.sc.Jb(h,c.idx);k.a.setTipTemplate(n.join(""));k.triggerEvent("onTipMove",[k.ia,k.Sj(c)]);
return c},qn:function(b,e){0<b.indexOf("{D}")?b=b.replace("{D}",e.split(" ")[0]):0<b.indexOf("{V}")?b=b.replace("{V}",l.fmtNum(e)):0<b.indexOf("{B}")?b="<b>"+b.replace("{B}",e)+"</b>":0<b.indexOf("{P}")?b=b.replace("{P}",l.round(100*e,2)):0<b.indexOf("{S}")&&(b=b.replace("{S}",e));return q.Nb(b,"mts-bsCell")},jc:function(){var c;c=this.b.slice(this.k,this.p+1);this.sc.fa(c).kE();c=this.sc.bC();this.a.cE(c.min,c.max);b.jc.apply(this,arguments);c=this.a.Ja(0);this.sc.ya(c.pos).la(c.Ka,c.oc).setSize().ep().If()}})});
__MTS.Util.go(function(u,p,l){var q=__MTS.Constant;l.regInherit("ViewDataMgr",__MTS.BaseClass,{Ba:p,de:p,l:p,b:p,gi:0,ss:1,Va:p,gg:0,ib:0,Ya:0,$u:function(){var b=this.Ba;return this.l&&b&&b[0]&&b[0].S.va()?1:0},cp:function(){this.$q();this.Ba=[];return this},wb:function(b,c,e,k){this.Ba||(this.Ba=[]);this.vm(this.Om(b,c,e,k));return this},fw:function(b,c,e,k){var h=this,m,n=0;c||(c=[]);e||(e=[]);h.cp();l.isA(b)||(b=[b]);1===b.length&&l.isA(b)&&1===b[0].length&&(m=b[0][0]||"",1<c.length||l.isA(c[0])&&
1<c[0].length)&&(b=l.dupObj(c),l.each(b,function(b,c){l.each(c,function(b){c[b]=m})}));for(var q=0,t,w,u,B;q<b.length;q++)t=b[q],w=c[q]||[],u=e[q]||[],l.isA(t)?(1===t.length&&(l.isA(w)&&1<w.length&&(w=[w]),l.isA(u)&&1<u.length&&(u=[u])),l.each(t,function(b,c){var e=w[b]||"",l=u[b]||"";B=k?k(q,b):p;h.vm(h.Om(c,p,{m:n,yb:b,ka:[e],Pa:[l]},B))}),n++):(B=k?k(q):p,h.vm(h.Om(t,p,{m:n,yb:q,ka:[w],Pa:[u]},B)));return h},nw:function(b){var c=this,e,k=0,h=c.l?c.l.length:0;l.isA(b[0])||(b=[b]);c.Ba||c.fw("");
c.AB();e=c.Ba[0];for(var m=0,n,p;m<b.length;m++)n=b[m],l.isA(n[0])?l.each(n,function(b,l){p=c.Ba[k]||e;p.S.Df(h?l.slice(0,h):l);k++}):(p=c.Ba[k]||e,p.S.Df(h?n.slice(0,h):n),k++);return c},AB:function(){l.each(this.Ba,function(b,c){c&&c.S&&c.S.clear()});return this},fa:function(b,c){c||(c=0);var e=b.slice();this.l=b;if(b.length&&0<c)for(var k=0;k<c;k++)e.push("");this.b=e;return this},zB:function(){this.de=[];return this},pE:function(b,c){this.de||(this.de=[]);for(var e=0,k;e<b.length;e++)k=b[e],this.de[e]||
(this.de[e]={}),c&&c(this.de[e],k);return this},mE:function(b){this.ss=b;return this},WD:function(b){this.gg=b;return this},Ok:function(){var b=this;if(!b.$u())return b;var c={},e={},k=[],h=0,m=0,n={},p=0;l.each(b.Ba,function(q,w){var u,B,A=w.ca?w.ca:10*w.m+w.dir;B=w.s?w.s:[w.Xa,w.m,w.dir,A].join(":");w.ib&&(h=1);w.Ya&&(m=1);e[B]?(u=e[B],u.S.hu(w.S),u.ka.push(l.isA(w.ka)?w.ka[0]:w.ka),u.Pa.push(l.isA(w.Pa)?w.Pa[0]:w.Pa),u.Pk&&0<w.yb&&u.Pk.push(w.yb),u.kc&&w.kc&&l.each(u.kc,function(b){l.isA(u.kc[b])&&
l.isA(w.kc[b])&&u.kc[b].push(w.kc[b][0])})):(u={s:w.s,Xa:w.Xa,S:new __MTS.Lines(w.S),ka:w.ka,Pa:w.Pa,Wa:w.Wa,kc:w.kc},e[B]=u,c[A]?(B=c[A],B.Hd.push(u)):(B={ca:w.ca,m:w.m,dir:w.dir,jl:0,ib:0,vp:b.gg,Ya:0,Xb:w.Xb,Hd:[u],tw:0>w.m?999:w.m},b.de&&b.de[w.m]&&l.ext(B.Xb,b.de[w.m]),k.push(B),c[A]=B,p<w.m&&(p=w.m),w.iC&&(n[w.m]||(n[w.m]=[]),n[w.m].push(A))),0<=w.yb&&(u.Pk=[w.yb]))});l.each(k,function(c,e){e.ib=b.gg?1:h;e.Ya=m});l.each(n,function(b,e){1<e.length&&l.each(e,function(b,e){c[e].jl=1})});k.sort(function(b,
c){return b.tw-c.tw});b.Va=k;b.gi=p;b.ib=h;b.Ya=m;return b},cC:function(){return this.Va?this.Va.length:0},LF:function(){return this.gi},Tu:function(b){return this.Va?this.Va[b]:p},YB:function(){return this.b},fG:function(){return this.b?this.b.length:0},Si:function(){var b=l.aryArgs(arguments);return 3==b.length?this.by.apply(this,b):this.Hr.apply(this,b)},Hr:function(b,c){b||(b=0);c||(c=0);var e,k=this.Va[b];k&&(e=k.Hd[c]);e||(e=p);return e},by:function(b,c,e){var k=0;l.each(this.Va,function(c,
e){if(e.m==b)return!1;k++});return this.Hr(c+k,e)},Qu:function(b,c){b||(b=0);if(!c)return 0;var e=-1,k=0;l.each(this.Va,function(h,m){if(m.m==b&&(l.each(m.Hd,function(b,h){if(0==h.s.indexOf(c))return e=k,!1;k++}),-1<e))return!1});return e},Ru:function(){var b=this.l,c="";b&&b.length&&(b=b[0],c=l.isFullDate(b)?q.Nl:l.isDate(b)?q.Nl:l.isMin(b)?q.sw:l.isSec(b)?q.pq:l.isQuarter(b)?q.Yl:q.sa);return c},Qa:function(b,c){l.each(this.Va,function(e,k){return b.apply(c,[e,k,k.Hd])});return this},destroy:function(){this.$q();
l.each(this.Va,function(b,c){l.clearObj(c)});__MTS.BaseClass.prototype.destroy.apply(this,arguments)},$q:function(){l.each(this.Ba,function(b,c){c.S.destroy();l.clearObj(c)})},vm:function(b){var c=this.Ba,e;c&&(b.s&&l.each(c,function(k,h){if(h.s==b.s)return c[k]=b,e=1,!0}),e||c.push(b))},Om:function(b,c,e,k){b=b.toUpperCase().split(":");var h=__MTS[b[0]]?b[0]:"CHART",m=b[1]?"L"==b[1]?-1:"R"==b[1]?1:0:this.ss,n=__MTS[h].prototype;c=l.ext({ca:"",m:0,dir:m,Ya:n.Ya,ib:n.ib,iC:"NONE"==b[0]?0:1,Xb:{},s:"",
Xa:h,S:new __MTS.Lines(c),ka:[""],Pa:[""],Wa:{},kc:{}},e);!m&&b[1]&&(c.ca=c.m+"-"+b[1]);k&&l.ext(c.kc,k);l.isA(c.ka)||(c.ka=[c.ka]);l.isA(c.Pa)||(c.Pa=[c.Pa]);return c}})});

//required(jQuery version:1.2.6+)
__MTS.Config.Chart = {
    s_zoomPreventDefault:0,//when zoom move,prevent browser touch event
    s_sliderPreventDefault:0,//when slider move,prevent block repaint in html5_browser
    s_wheelZoomInOut:1,//是否滾輪要縮放slider
    s_autoResize:0,//is autor-resize binding?
	'':{//default theme
		//---[color:色碼]---
		color_bg:'#fff',//View的背景色, 支援transparent
        color_fg:'#fff',//Chart的背景色, 支援transparent
        color_border:'#9f9f9f',//圖的外框框線,可為陣列表示:[top, left, bottom, right]的顏色
        color_grid_x:'#d7eaf3',//格線X軸的顏色
        color_grid_y:'#ededed',//格線Y軸的顏色
        color_gridBaseline:'#9fd9f6',//基線的顏色
        //線條(包含標籤)的顏色
        color_line:['#00a6a8','#8957a1','#aa7c21','#eb6877','#8fc41f','#00b7ef','#f49800','#7057a3','#a66a1f','#8fc41f','#009394','#7fb5ff','#eb6100'],//線條的顏色
        //gradient-漸層底部(bottom,left)
        color_gdn1:['#00a6a8','#8957a1','#aa7c21','#eb6877','#8fc41f','#00b7ef','#f49800','#7057a3','#a66a1f','#8fc41f','#009394','#7fb5ff','#eb6100'],
        //gradient-漸層頂端(top,right)
        color_gdn2:['#00a6a8','#8957a1','#aa7c21','#eb6877','#8fc41f','#00b7ef','#f49800','#7057a3','#a66a1f','#8fc41f','#009394','#7fb5ff','#eb6100'],
        //文字
        color_txt:'#3e3a39',//文字預設顏色
        color_txt_x:'#3e3a39',//x軸刻度的文字預設顏色
        color_txt_y:'#3e3a39',//y軸刻度的文字預設顏色
        //stock Y軸文字(含背景色)
        color_txt_up:'#ff0000',
        color_txt_upin:'#fff',
        color_bg_upin:'#ff0000',
        color_txt_dn:'#008c00',
        color_txt_dnin:'#fff',
        color_bg_dnin:'#009900',
        color_txt_base:'#898989',
        //slider, bgChart only
        color_slider:['#29abe2'],
        color_slider_gdn1:['#29abe2'],
        color_slider_gdn2:['#29abe2'],
        //XOnly only
        color_sldbg:'#b3b3b3',
        //kbar only
        color_kbar_up:'#c33',
        color_kbar_upin:'#f66',
        color_kbar_dn:'#000',
        color_kbar_dnin:'#000',
        //K線圖: volume,MACD(UpDnBar),KD(UpDnArea) only
        color_vol_up:'#c33',
        color_vol_upin:'#f66',
        color_vol_dn:'#090',
        color_vol_dnin:'#6c3',
        color_vol_eq:'#6a6a6a',
        color_vol_eqin:'#acacac',
        //標籤
        color_mark:'#07e',
        color_mark_high:'#07e',//標記最高點
        color_mark_low:'#07e',//標記最低點
        color_mark_bg:'#898989',
        //標記時間區間顏色專用
        color_mark_period:['#00a6a8','#8957a1','#aa7c21','#eb6877','#8fc41f','#00b7ef','#f49800','#7057a3','#a66a1f','#8fc41f','#009394','#7fb5ff','#eb6100'],
        //標記時間區間文字專用
        color_mark_period_up:'#ff0000',
        color_mark_period_upin:'#8c0000',
        color_mark_period_dn:'#008c00',
        color_mark_period_dnin:'#004c00',
        color_mark_period_txt:'#fff',
        color_mark_period_bg_curr:'#ff0',
        //標記Y軸文字專用
        color_markY:'#fff',
        color_markY_bg:'',

        //---[setting:設定]---
        //animate
        s_is_animate: false, //預設是否顯示動畫
        s_animateDuration: 1000, //動畫顯示的毫秒數，0則不畫動畫
        s_animateFPS: 60, //動畫FPS，若 500 ms 畫完，則 fps 數值會 / 2
        //border
        s_border:[1,1,1,1],//top,left,bottom,right(border width)
        //line width
        s_lineW:1.3,
        s_dashLen:5,
        //bar width
        s_bar_maxWidth: 100, //柱子最大寬度(發生在當根數很少而畫面很大時，計算出來寬度可能極大，圖很醜
        //grid
        s_thick_gridX:1,
        s_thick_gridY:1,
        s_tickLen:4,//tick length
        s_tickGap:2,//gap between tick and labelX
        //圖形透明度(不含Pie圖,象限圖)
        s_grid_a:1, //格線
        s_line_a:1, //線,Cross,Bamboo,Rotate圖
        s_area_a:0.7, //Area,NPArea圖
        s_kArea_a:0.4, //K線Area圖
        s_bar_a:0.7,  //Bar/StackBar/NPBar/HorzBar
        s_bar_focus_a:0.7, //Bar/StackBar focus alpha (與s_bar_a不同時,查價會重繪)
        s_bar_preDt_a:0.4, //Bar preDate alpha
        s_kbar_a:1, //KBar圖
        s_vbar_a:1, //Volume圖
        s_bgBar_a:0.7,//K線價量背景圖的透明度
        s_txtInnerY_a:0.4, //Y軸文字內縮的透明度
        //tipOn
        s_delay_longPressTipOn:1000, //長壓顯示查價線的時間判定
        s_dbclick_tipOn:0, //double-click是否可以開關查價線
        
        //font (canvas-fontSize,最小只能設到12,小於12仍視為12)
        s_fontFamily:'sans-serif',//'Arial',
        s_markPeriod_family: 'Arial',//'Arial Narrow',
        s_fontSizeX:13,
        s_fontSizeY:13,
        s_markFont:15,
        s_legend_formatNaN: 'N/A', // 當legend 的值為 NaN時，轉換成此文字
        //最高點與最低點提示文字
        s_high:'',//'最高 ',
        s_low:'',//'最低 ',
        //slider
        s_slider_min:5,//預設的slider最小根數
        s_slider_max:'100%',//預設的slider最大根數
        s_slider_size:'25%',//預設一開始slider顯示的根數
        s_slider_percent_limit: 10, //百分比顯示根數時,根數小於此值,則以此值顯示
        s_slider_limit:10,//如果資料長度小於此值,則顯示全部資料
        
        //flag,讓物件知道MbChartColor已覆蓋option
        s_ready:true
	},
    'Pie':{
        color_pie:["#0099d9","#f18d00","#8957a1","#8fc31f","#ea68a2","#8f3300","#556fb5","#fabe00"],
        color_pie_gdn1:["#0099d9","#f18d00","#8957a1","#8fc31f","#ea68a2","#8f3300","#556fb5","#fabe00"],
        color_pie_gdn2:["#7ecef4","#f8b551","#c490bf","#b3d465","#f19ec2","#b87200","#8aa3d4","#ffe33f"],
        color_pie_center:'transparent',//'#fbd14d', //pie style===3||4||5時, 中心圓圈的顏色
        color_pie_center_txt:'#555',//pie style===3||4||5時, 中心圓圈的文字顏色
        color_pie_border:'#ddd',//pie style===4時, 邊框的顏色
        color_pie_proportion_background:'#ddd',//pie style===5時, 背景圓圈的顏色
        s_pie_proportion_width: 20, //pie style===5時, 資料的寬度
        s_pie_a:1, //pie 的透明度
        s_pie_focus_a:1, //pie focus alpha
        s_pie_rotate: 0 //pie旋轉角度
    },
    'Radar':{
        color_rd_text: ['#000'], //文字顏色
        //五角形的文字如果改成泡泡,(泡泡顏色:color_line, 透明度:內s_area_a,框s_line_a)
        //五角形內背景色(color_fg)
        color_rd_border: '#ddd', // 五角形最外層顏色
        color_rd_hGrid: '#dbdbdb', // 五角形裡面水平線的顏色
        color_rd_aGrid: '#cae3fc', // 五角形裡面，中心連接五個點的線 的顏色
        color_rd_dataBorder: ['#07e'], //五角形裡面資料框的 顏色
        color_rd_dataBackground: ['#07e'], //五角形裡面資料的 背景色
        color_rd_yLabelBackground: ['transparent'], //五角形裡面 yLabel 的 背景色
        color_rd_yLabel: ['#9a9a9a'], //五角形裡面 yLabel 的 文字顏色
        color_rd_yLabelBorder: ['transparent'],  //五角形裡面 yLabel 的 框顏色

        //setting
        s_rd_tip:1,//0:notip, 1:show tip
        s_rd_style: 1, //0:格線上沒有數字提示 1:格線上有數字提示
        s_rd_padding: 3, //五角形(含文字)與邊界(上下左右)的最小 padding
        s_rd_bubbleR: 13,   //五角形的文字如果改成泡泡, (泡泡半徑)
        s_rd_textPadding: 10, //文字跟圖中間的 padding
        s_rd_borderWidth: 2, // 五角形最外層寬度
        s_rd_hGridWidth: 1, // 五角形裡面水平線的寬度
        s_rd_aGridWidth: 1, // 五角形裡面，中心連接五個點的線 的寬度
        s_rd_dataBorderGlobalAlpha: 0.8, //五角形裡面資料框的 透明度
        s_rd_dataBorderWidth: [3], //五角形裡面資料框的 寬度
        s_rd_dataGlobalAlpha: 0.5 //五角形裡面資料的 透明度
    },
    'Scatter':{
        color_linreg:'#07e',
        s_font_dmark:12,
        s_symbol_bubble_a:0.5 //symbol:bubble, inner circle alpha
    },
    'Bullet':{
        color_blt_focus: '#6a6a6a',
        color_blt_focus_in: '#ffcd30',
        s_blt_font_focus: 14
    },
    'Bubble':{//泡泡圖
        color_bubbleUp:['#906','#c03','#f39','#f99','#fbb'],
        color_bubbleDn:['#030','#060','#090','#0c0','#0f0']
    },
    'BS':{
        color_bs_buy:['#906','#c03','#f39','#f99','#fbb'],
        color_bs_sell:['#030','#060','#090','#0c0','#0f0'],
        color_bs_focus_buy:'',
        color_bs_focus_sell:'',
        color_bs_txtin:'#fff',
        s_bs_barW: 14,
        s_bs_font: 12,
        s_bgBar_a:0.9,
        s_bgBar_focus_a:1
    },
    'Rotate':{
        s_bar_maxWidth: 50 //柱子最大寬度
    },
    'Stock':{
        s_dbclick_tipOn:1
    },//分時走勢圖
    'K': {//K線圖
        //主線一定要黑,不然績效比較時,說明會很怪
        color_line:['#2D425F'],
        color_gdn1:['#2D425F'],
        color_gdn2:['#fff'],
        //參考指標預設顏色
        color_ref:['#03f','#f60','#f06','#060','#939','#733','#069'],
        //副圖指標預設顏色
        color_line_subTech:['#07e','#f06','#f60','#099', '#96c'],
        //主圖額外指標顏色
        color_line_exMtTech:['#00a6a8','#8957a1','#aa7c21','#eb6877'],
        //主圖指標預設顏色
        color_AVG:['#07e','#966','#f99','#96c','#0c0','#fc0'],
        color_EMA:['#00a','#600','#f06','#906','#060','#f60'],
        color_WMA:['#0ff','#c99','#f39','#f9f','#0f0','#f90'],
        color_BOB:['#090','#939','#939'],
        color_MAE:['#f99','#f90','#f90','#f33','#f33'],
        color_ALI:['#049','#f39','#090'],
        color_SAR:['#906'],
        color_CDP:['#f60','#099','#fc0','#c39','#0f0'],
        color_JMS:['#092bb5'],
        //paint
        color_paint:'#000',
        color_paintBg:'#99c',
        color_paint_mouseOnBg:'#fff',
        color_arrowUp:'#900',
        color_arrowDown:'#060',
        s_paintBg_a:0.3, //K線繪圖,Oval,Rect填滿顏色的透明度
        //---
        s_bar_maxWidth: 30, //柱子最大寬度
        s_border:[0,0,1,0], //top,left,bottom,right(border width)
        s_subTipMsgY:1    //K線副圖的Y軸查價資訊是否要顯示
    }
};

__MTS.Config.K = {
    mtTech: ['AVG'], //主圖預設顯示指標
    subTech: ['AVGV|RSI', 'KD','MACD','DMI','PSY','BIAS'], //副圖預設顯示指標 ,AVGV|RSI:(沒有成交量時,則顯示RSI)
    subNum: 6, //副圖最多顯示的數量
    baseOnName:{
        'H':'(高)',
        'L':'(低)'
    }
};

__MTS.Config.MtTech = {//主圖技術指標設定
    'AVG': { tech: 'AVG', params: [5, 20, 60], baseOn:[],//baseOn(計算基準:'C'收(預設),'H'高,'L'低
        legend: ['SMA{P0}{B}:','SMA{P1}{B}:', 'SMA{P2}{B}:', 'SMA{P3}{B}:', 'SMA{P4}{B}:', 'SMA{P5}{B}:'], dp: 2 },
    'EMA': { tech: 'EMA', params: [5, 20, 60], baseOn:[],
        legend: ['EMA{P0}{B}:','EMA{P1}{B}:', 'EMA{P2}{B}:', 'EMA{P3}{B}:', 'EMA{P4}{B}:', 'EMA{P5}{B}:'], dp: 2 },
    'WMA': { tech: 'WMA', params: [5, 20, 60], baseOn:[],
        legend: ['WMA{P0}{B}:','WMA{P1}{B}:', 'WMA{P2}{B}:', 'WMA{P3}{B}:', 'WMA{P4}{B}:', 'WMA{P5}{B}:'], dp: 2 },
    'V': { tech:'V', params:[], legend:[], opacity:0.5 },//價量重疊的透明度
    'BOB': { tech: 'BOB', params: [20, 2, 2], legend: ['BBandMA{P0}:', 'UB{P1}:', 'LB{P2}:'], sortByCenter:1 },
    'MAE': { tech: 'MAE', params: [10, 3, 3, 1], legend: ['MA{P0}:', 'UB_+{P1}%:', 'LB_-{P2}%:', 'UB_+{P3}%:', 'LB_-{P4}%:'], sortByCenter:1 },
    'ALI': { tech: 'ALI', params: [], legend: ['鱷顎:', '齒:', '唇:'] },
    'SAR': { tech: 'SAR', params: [0.02, 0.02, 0.2], legend: ['SAR({P0},{P1},{P2}):'] },
    'CDP': { tech: 'CDP', params: [], legend: ['CDP:', 'AH:', 'NH:', 'NL:', 'AL:'] },
    'JMS': { tech: 'JAMES', params:[3], legend:['James{P0}:'] }
};

__MTS.Config.Tech = {//副圖技術指標設定
    'AVGV':{ tech: 'V', isAVG:true, params: [5, 10], baseOn:['V','V'], legend: ['成交量:', 'MA{P0}:', 'MA{P1}:'], unit: '{V}', dp:1 },
    'RSI': { tech: 'RSI', params: [6, 12], legend: ['RSI{P0}:', 'RSI{P1}:'], unit: '%', dp: 2},
    'KD': { tech: 'KD', params: [9, 3, 3], legend: ['K({P0},{P1}):', 'D({P0},{P2}):'], unit: '%', dp: 2 },
    'KDFAST': { tech: 'KDFAST', params: [9, 3], legend: ['fK({P0},{P1}):', 'fD({P0},{P1}):'], unit: '%', dp: 2 },
    'MACD': { tech: 'MACD', params: [12, 26, 9], legend: ['DIF{P0}-{P1}:', 'MACD{P2}:', 'OSC:'], dp: 2 },
    'MAO': { tech: 'MAO', params: [5, 10], legend: ['{P0}-{P1}MA-Osc:'] },
    '3-6': { tech: 'BIASO', params: [3, 6], legend: ['{P0}-{P1}乖離率:'], unit: '%' },
    'AR': { tech: 'AR', params: [26], legend: ['AR{P0}:'], unit: '%', dp: 2 },
    'BR': { tech: 'BR', params: [26], legend: ['BR{P0}:'], unit: '%', dp: 2 },
    'BIAS': { tech: 'BIAS', params: [5, 10, 20], legend: ['乖離率{P0}:', '乖離率{P1}:', '乖離率{P2}:'], unit: '%', dp: 2 },
    'MTM': { tech: 'MTM', params: [10], legend: ['MTM{P0}:', 'MA{P0}:'], dp: 2 },
    'ACC': { tech: 'ACC', params: [10], legend: ['ACC{P0}:'], dp: 2 },
    'WIL': { tech: 'WIL', params: [14, 28, 42], legend: ['威廉指標{P0}:', '威廉指標{P1}:', '威廉指標{P2}:'], unit: '%', dp: 2 },
    'DMI': { tech: 'DMI', params: [14], legend: ['+DI{P0}:', '-DI{P0}:', 'ADX{P0}:'], dp: 2 },
    'DMO': { tech: 'DMO', params: [14], legend: ['DMI-Osc{P0}:'], dp: 2 },
    'PSY': { tech: 'PSY', params: [12, 24], legend: ['心理線{P0}:', '心理線{P1}:'], unit: '%', dp: 2 },
    'CCI': { tech: 'CCI', params: [14, 28, 42], legend: ['CCI{P0}:', 'CCI{P1}:', 'CCI{P2}:'], dp: 2 },
    'ADO': { tech: 'ADO', params: [], legend: ['AD-Osc:'], dp: 2 },
    'ADI': { tech: 'ADI', params: [], legend: ['A/DI:'], dp: 2 },
    'HLO': { tech: 'HLO', params: [], legend: ['HL-Osc:'], dp: 2 },
    'OBV': { tech: 'OBV', params: [], legend: ['OBV:'], dp: 2 },
    'VR': { tech: 'VR', params: [26], legend: ['VR{P0}:'], unit: '%', dp: 2 },
    'TAPI': { tech: 'TAPI', params: [], legend: ['TAPI:'], dp: 2 },
    'VAO': { tech: 'VAO', params: [], legend: ['VA-Osc:'], dp: 2 },
    'VA': { tech: 'VA', params: [], legend: ['VA:'], dp: 2 }
};



if ( typeof module != 'undefined' && module.exports ) {
	module.exports = window.Matisse;
} else if ( typeof define == 'function' && define.amd ) {
    define( function () { return window.Matisse; } );
}